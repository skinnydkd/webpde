<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economia - Guia Universit√†ria Completa</title>
    <meta name="description" content="Apr√®n economia amb simuladors interactius: microeconomia, macroeconomia, teoria de jocs, IS-LM, AD-AS i molt m√©s. Nivell universitari.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.1.16/umd/Recharts.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.min.js"></script>
    <style>
        * { scrollbar-width: thin; scrollbar-color: #e91e63 #fdf6e3; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #fdf6e3; }
        ::-webkit-scrollbar-thumb { background-color: #e91e63; border-radius: 3px; }
        input[type="range"] { -webkit-appearance: none; height: 8px; border-radius: 4px; background: #fce4ec; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #e91e63; cursor: pointer; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .formula { font-family: 'Times New Roman', serif; font-style: italic; background: #fef3c7; padding: 2px 8px; border-radius: 4px; }
        .concepto { border-left: 4px solid #e91e63; padding-left: 1rem; margin: 1rem 0; }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 via-white to-pink-50">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo, useCallback } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, AreaChart, Area, ReferenceLine, Legend, BarChart, Bar, ComposedChart, Scatter } = Recharts;
        const { TrendingUp, TrendingDown, BookOpen, Users, Building2, Globe, Lightbulb, Calculator, BarChart3, Scale, Landmark, Banknote, ShoppingCart, Factory, GraduationCap, Brain, Target, ChevronDown, ChevronUp, ChevronRight, Check, X, Menu, Search, Zap, Clock, Award, RefreshCw, Info, AlertTriangle, DollarSign, Percent, Activity, Layers, ArrowRight, Play, Gamepad2, FileText, Star, Sparkles, Home, Briefcase, Building, PiggyBank, TrendingUp as TUp, Wallet, CreditCard } = lucideReact;

// ============================================================================
// SISTEMA DE TRADUCCIONS COMPLET
// ============================================================================
const translations = {
    nav: {
        inicio: { val: 'Inici', es: 'Inicio', en: 'Home' },
        micro: { val: 'Microeconomia', es: 'Microeconom√≠a', en: 'Microeconomics' },
        macro: { val: 'Macroeconomia', es: 'Macroeconom√≠a', en: 'Macroeconomics' },
        mercats: { val: 'Mercats', es: 'Mercados', en: 'Markets' },
        comerc: { val: 'Comer√ß', es: 'Comercio', en: 'Trade' },
        jocs: { val: 'Jocs', es: 'Juegos', en: 'Games' },
        historia: { val: 'Hist√≤ria', es: 'Historia', en: 'History' },
        quiz: { val: 'Quiz', es: 'Quiz', en: 'Quiz' },
    },
    inicio: {
        titol: { val: "Economia", es: "Econom√≠a", en: "Economics" },
        subtitol: { val: "Guia Universit√†ria Completa", es: "Gu√≠a Universitaria Completa", en: "Complete University Guide" },
        desc: { val: "Des dels fonaments fins als models avan√ßats. Microeconomia, Macroeconomia, Teoria de Jocs i m√©s.", es: "Desde los fundamentos hasta los modelos avanzados. Microeconom√≠a, Macroeconom√≠a, Teor√≠a de Juegos y m√°s.", en: "From fundamentals to advanced models. Microeconomics, Macroeconomics, Game Theory and more." },
    },
    micro: {
        titol: { val: "Microeconomia", es: "Microeconom√≠a", en: "Microeconomics" },
        intro: { val: "Estudi del comportament econ√≤mic individual: consumidors, empreses i mercats.", es: "Estudio del comportamiento econ√≥mico individual: consumidores, empresas y mercados.", en: "Study of individual economic behavior: consumers, firms and markets." },
    },
    macro: {
        titol: { val: "Macroeconomia", es: "Macroeconom√≠a", en: "Macroeconomics" },
        intro: { val: "Estudi de l'economia en el seu conjunt: PIB, inflaci√≥, atur, pol√≠tiques econ√≤miques.", es: "Estudio de la econom√≠a en su conjunto: PIB, inflaci√≥n, desempleo, pol√≠ticas econ√≥micas.", en: "Study of the economy as a whole: GDP, inflation, unemployment, economic policies." },
    },
    ui: {
        simulador: { val: 'Simulador', es: 'Simulador', en: 'Simulator' },
        teoria: { val: 'Teoria', es: 'Teor√≠a', en: 'Theory' },
        exemple: { val: 'Exemple', es: 'Ejemplo', en: 'Example' },
        formula: { val: 'F√≥rmula', es: 'F√≥rmula', en: 'Formula' },
    }
};

function EconomiaApp() {
    const [section, setSection] = useState('inicio');
    const [subSection, setSubSection] = useState(null);
    const [menuOpen, setMenuOpen] = useState(false);
    const [idioma, setIdioma] = useState('val');
    const [showGlosari, setShowGlosari] = useState(false);

    const t = useCallback((cat, key, sub = null) => {
        try {
            if (sub) return translations[cat][key][sub][idioma] || translations[cat][key][sub]['val'];
            return translations[cat][key][idioma] || translations[cat][key]['val'];
        } catch { return key; }
    }, [idioma]);

    // ========================================================================
    // ESTAT DELS SIMULADORS
    // ========================================================================
    
    // Oferta i Demanda
    const [demandaIntercept, setDemandaIntercept] = useState(100);
    const [demandaSlope, setDemandaSlope] = useState(2);
    const [ofertaIntercept, setOfertaIntercept] = useState(10);
    const [ofertaSlope, setOfertaSlope] = useState(1.5);
    const [shiftDemanda, setShiftDemanda] = useState(0);
    const [shiftOferta, setShiftOferta] = useState(0);
    const [preuControl, setPreuControl] = useState(null);
    
    // Elasticitat
    const [elastP1, setElastP1] = useState(10);
    const [elastP2, setElastP2] = useState(12);
    const [elastQ1, setElastQ1] = useState(100);
    const [elastQ2, setElastQ2] = useState(80);
    
    // Costos
    const [costFix, setCostFix] = useState(1000);
    const [costVarUnit, setCostVarUnit] = useState(10);
    const [quantitat, setQuantitat] = useState(100);
    
    // PIB
    const [pibC, setPibC] = useState(600);
    const [pibI, setPibI] = useState(200);
    const [pibG, setPibG] = useState(180);
    const [pibX, setPibX] = useState(120);
    const [pibM, setPibM] = useState(150);
    
    // IS-LM
    const [isC0, setIsC0] = useState(100);
    const [isPMC, setIsPMC] = useState(0.8);
    const [isI0, setIsI0] = useState(200);
    const [isb, setIsb] = useState(50);
    const [isG, setIsG] = useState(150);
    const [lmM, setLmM] = useState(500);
    const [lmP, setLmP] = useState(1);
    const [lmk, setLmk] = useState(0.5);
    const [lmh, setLmh] = useState(100);
    
    // Multiplicador
    const [multPMC, setMultPMC] = useState(0.8);
    const [multDeltaG, setMultDeltaG] = useState(100);
    
    // Inflaci√≥
    const [inflacioAny1, setInflacioAny1] = useState(100);
    const [inflacioAny2, setInflacioAny2] = useState(103);
    
    // Teoria de Jocs
    const [jocsMatriu, setJocsMatriu] = useState([[3,3], [0,5], [5,0], [1,1]]);

    // ========================================================================
    // C√ÄLCULS
    // ========================================================================
    
    // Equilibri de mercat
    const equilibri = useMemo(() => {
        // Demanda: Qd = a - bP => P = (a-Qd)/b
        // Oferta: Qs = c + dP => P = (Qs-c)/d
        // Equilibri: a - bP = c + dP => P* = (a-c)/(b+d)
        const a = demandaIntercept + shiftDemanda;
        const b = demandaSlope;
        const c = ofertaIntercept + shiftOferta;
        const d = ofertaSlope;
        const pEquilibri = (a - c) / (b + d);
        const qEquilibri = a - b * pEquilibri;
        
        // Excedents
        const excedentConsumidor = 0.5 * qEquilibri * ((a/b) - pEquilibri);
        const excedentProductor = 0.5 * qEquilibri * (pEquilibri - (c/d > 0 ? c/d : 0));
        
        return { 
            preu: Math.max(0, pEquilibri).toFixed(2), 
            quantitat: Math.max(0, qEquilibri).toFixed(2),
            excedentConsumidor: Math.max(0, excedentConsumidor).toFixed(0),
            excedentProductor: Math.max(0, excedentProductor).toFixed(0),
            excedentTotal: (Math.max(0, excedentConsumidor) + Math.max(0, excedentProductor)).toFixed(0)
        };
    }, [demandaIntercept, demandaSlope, ofertaIntercept, ofertaSlope, shiftDemanda, shiftOferta]);
    
    // Dades per al gr√†fic d'oferta i demanda
    const dadesOD = useMemo(() => {
        const a = demandaIntercept + shiftDemanda;
        const b = demandaSlope;
        const c = ofertaIntercept + shiftOferta;
        const d = ofertaSlope;
        const dades = [];
        for (let q = 0; q <= 120; q += 5) {
            const pDemanda = Math.max(0, (a - q) / b);
            const pOferta = Math.max(0, (q - c) / d);
            dades.push({ q, demanda: pDemanda > 0 ? pDemanda : null, oferta: q >= c ? pOferta : null });
        }
        return dades;
    }, [demandaIntercept, demandaSlope, ofertaIntercept, ofertaSlope, shiftDemanda, shiftOferta]);
    
    // Elasticitat
    const elasticitat = useMemo(() => {
        const deltaQ = elastQ2 - elastQ1;
        const deltaP = elastP2 - elastP1;
        const avgQ = (elastQ1 + elastQ2) / 2;
        const avgP = (elastP1 + elastP2) / 2;
        const ePD = (deltaQ / avgQ) / (deltaP / avgP);
        const absE = Math.abs(ePD);
        let tipus = '';
        if (absE > 1) tipus = idioma === 'val' ? 'El√†stica' : idioma === 'es' ? 'El√°stica' : 'Elastic';
        else if (absE < 1) tipus = idioma === 'val' ? 'Inel√†stica' : idioma === 'es' ? 'Inel√°stica' : 'Inelastic';
        else tipus = idioma === 'val' ? 'Unit√†ria' : idioma === 'es' ? 'Unitaria' : 'Unitary';
        return { valor: ePD.toFixed(2), absolut: absE.toFixed(2), tipus };
    }, [elastP1, elastP2, elastQ1, elastQ2, idioma]);
    
    // Costos
    const costos = useMemo(() => {
        const CT = costFix + (costVarUnit * quantitat);
        const CMe = CT / quantitat;
        const CFMe = costFix / quantitat;
        const CVMe = costVarUnit;
        const CMg = costVarUnit; // Simplificat per a cost variable lineal
        return { CT, CMe: CMe.toFixed(2), CFMe: CFMe.toFixed(2), CVMe, CMg };
    }, [costFix, costVarUnit, quantitat]);
    
    // Dades costos
    const dadesCostos = useMemo(() => {
        const dades = [];
        for (let q = 10; q <= 200; q += 10) {
            const CT = costFix + (costVarUnit * q);
            const CMe = CT / q;
            const CFMe = costFix / q;
            dades.push({ q, CT, CMe, CFMe, CVMe: costVarUnit, CMg: costVarUnit });
        }
        return dades;
    }, [costFix, costVarUnit]);
    
    // PIB
    const pib = useMemo(() => {
        const total = pibC + pibI + pibG + pibX - pibM;
        const xn = pibX - pibM;
        return { 
            total, 
            xn,
            percC: ((pibC/total)*100).toFixed(1),
            percI: ((pibI/total)*100).toFixed(1),
            percG: ((pibG/total)*100).toFixed(1),
            percXN: ((xn/total)*100).toFixed(1),
        };
    }, [pibC, pibI, pibG, pibX, pibM]);
    
    // Multiplicador keynesi√†
    const multiplicador = useMemo(() => {
        const mult = 1 / (1 - multPMC);
        const deltaY = mult * multDeltaG;
        return { valor: mult.toFixed(2), deltaY: deltaY.toFixed(0) };
    }, [multPMC, multDeltaG]);
    
    // IS-LM
    const islm = useMemo(() => {
        // IS: Y = C0 + PMC*Y + I0 - b*r + G => Y = (C0 + I0 + G - b*r)/(1-PMC)
        // LM: M/P = k*Y - h*r => r = (k*Y - M/P)/h
        // Equilibri: substituir LM en IS
        const mult = 1 / (1 - isPMC);
        const A = isC0 + isI0 + isG; // Despesa aut√≤noma
        // IS: Y = mult * (A - b*r)
        // LM: r = (k*Y - M/P) / h
        // Substituint: Y = mult * (A - b*(k*Y - M/P)/h)
        // Y = mult*A - mult*b*k*Y/h + mult*b*M/(P*h)
        // Y(1 + mult*b*k/h) = mult*A + mult*b*M/(P*h)
        // Y* = (mult*A + mult*b*M/(P*h)) / (1 + mult*b*k/h)
        const Ystar = (mult * A + mult * isb * lmM / (lmP * lmh)) / (1 + mult * isb * lmk / lmh);
        const rstar = (lmk * Ystar - lmM / lmP) / lmh;
        
        // Generar corbes
        const dades = [];
        for (let Y = 100; Y <= 2000; Y += 50) {
            const rIS = (A - Y / mult) / isb;
            const rLM = (lmk * Y - lmM / lmP) / lmh;
            dades.push({ Y, IS: rIS > 0 ? rIS : null, LM: rLM });
        }
        
        return { Y: Ystar.toFixed(0), r: (rstar * 100).toFixed(1), dades };
    }, [isC0, isPMC, isI0, isb, isG, lmM, lmP, lmk, lmh]);
    
    // Taxa d'inflaci√≥
    const inflacio = useMemo(() => {
        const taxa = ((inflacioAny2 - inflacioAny1) / inflacioAny1) * 100;
        return taxa.toFixed(2);
    }, [inflacioAny1, inflacioAny2]);

    // ========================================================================
    // COMPONENTS REUTILITZABLES
    // ========================================================================
    
    const Card = ({ children, className = "", title, icon: Icon }) => (
        <div className={`bg-white rounded-2xl shadow-sm border border-gray-100 p-6 ${className}`}>
            {title && (
                <div className="flex items-center gap-2 mb-4">
                    {Icon && <Icon size={20} className="text-pink-500" />}
                    <h3 className="font-bold text-gray-800">{title}</h3>
                </div>
            )}
            {children}
        </div>
    );
    
    const Slider = ({ label, value, onChange, min, max, step = 1, suffix = "" }) => (
        <div className="space-y-1">
            <div className="flex justify-between text-sm">
                <span className="text-gray-600">{label}</span>
                <span className="font-bold text-pink-600">{value}{suffix}</span>
            </div>
            <input type="range" min={min} max={max} step={step} value={value} onChange={e => onChange(Number(e.target.value))} className="w-full" />
        </div>
    );
    
    const Tabs = ({ tabs, active, onChange }) => (
        <div className="flex gap-1 bg-gray-100 p-1 rounded-xl mb-4">
            {tabs.map(tab => (
                <button key={tab.id} onClick={() => onChange(tab.id)} className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${active === tab.id ? 'bg-white shadow text-pink-600' : 'text-gray-600 hover:text-gray-800'}`}>
                    {tab.label}
                </button>
            ))}
        </div>
    );
    
    const FormulaBox = ({ formula, description }) => (
        <div className="bg-amber-50 border border-amber-200 rounded-xl p-4 my-4">
            <p className="text-center text-lg font-mono text-amber-800">{formula}</p>
            {description && <p className="text-center text-sm text-amber-600 mt-2">{description}</p>}
        </div>
    );
    
    const ConceptBox = ({ title, children, color = "pink" }) => {
        const colors = {
            pink: "border-pink-400 bg-pink-50",
            blue: "border-blue-400 bg-blue-50",
            green: "border-green-400 bg-green-50",
            amber: "border-amber-400 bg-amber-50",
            violet: "border-violet-400 bg-violet-50",
        };
        return (
            <div className={`border-l-4 ${colors[color]} p-4 rounded-r-xl my-4`}>
                {title && <h4 className="font-bold text-gray-800 mb-2">{title}</h4>}
                <div className="text-gray-700 text-sm">{children}</div>
            </div>
        );
    };
    
    const NavBtn = ({ sec, icono: Icon, label }) => (
        <button onClick={() => { setSection(sec); setSubSection(null); setMenuOpen(false); }} className={`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all ${section === sec ? 'bg-pink-100 text-pink-700' : 'text-gray-600 hover:bg-gray-100'}`}>
            <Icon size={16} /><span className="hidden xl:inline">{label}</span>
        </button>
    );
    
    const LanguageSelector = () => (
        <div className="flex items-center gap-1 bg-gray-100 rounded-lg p-1">
            {[{ code: 'val', label: 'VAL' }, { code: 'es', label: 'ES' }, { code: 'en', label: 'EN' }].map(lang => (
                <button key={lang.code} onClick={() => setIdioma(lang.code)} className={`px-2 py-1 rounded text-xs font-bold transition-all ${idioma === lang.code ? 'bg-pink-500 text-white' : 'text-gray-600 hover:bg-gray-200'}`}>
                    {lang.label}
                </button>
            ))}
        </div>
    );

    // ========================================================================
    // SECCI√ì: INICI
    // ========================================================================
    const Inicio = () => {
        const seccions = [
            { id: 'micro', nom: t('nav', 'micro'), icon: Users, color: 'from-pink-500 to-rose-500', desc: idioma === 'val' ? "Oferta, demanda, elasticitat, costos, estructures de mercat" : idioma === 'es' ? "Oferta, demanda, elasticidad, costes, estructuras de mercado" : "Supply, demand, elasticity, costs, market structures" },
            { id: 'macro', nom: t('nav', 'macro'), icon: Globe, color: 'from-blue-500 to-cyan-500', desc: idioma === 'val' ? "PIB, inflaci√≥, atur, IS-LM, AD-AS, pol√≠tiques" : idioma === 'es' ? "PIB, inflaci√≥n, desempleo, IS-LM, AD-AS, pol√≠ticas" : "GDP, inflation, unemployment, IS-LM, AD-AS, policies" },
            { id: 'mercats', nom: t('nav', 'mercats'), icon: Building2, color: 'from-amber-500 to-orange-500', desc: idioma === 'val' ? "Compet√®ncia perfecta, monopoli, oligopoli" : idioma === 'es' ? "Competencia perfecta, monopolio, oligopolio" : "Perfect competition, monopoly, oligopoly" },
            { id: 'comerc', nom: t('nav', 'comerc'), icon: Briefcase, color: 'from-emerald-500 to-teal-500', desc: idioma === 'val' ? "Avantatge comparatiu, balan√ßa de pagaments" : idioma === 'es' ? "Ventaja comparativa, balanza de pagos" : "Comparative advantage, balance of payments" },
            { id: 'jocs', nom: t('nav', 'jocs'), icon: Gamepad2, color: 'from-violet-500 to-purple-500', desc: idioma === 'val' ? "Dilema del presoner, equilibri de Nash" : idioma === 'es' ? "Dilema del prisionero, equilibrio de Nash" : "Prisoner's dilemma, Nash equilibrium" },
            { id: 'historia', nom: t('nav', 'historia'), icon: Clock, color: 'from-gray-500 to-slate-500', desc: idioma === 'val' ? "Adam Smith, Keynes, Friedman i m√©s" : idioma === 'es' ? "Adam Smith, Keynes, Friedman y m√°s" : "Adam Smith, Keynes, Friedman and more" },
        ];
        
        return (
            <div className="space-y-8">
                {/* Hero */}
                <div className="text-center py-8">
                    <div className="inline-flex items-center gap-2 px-4 py-2 bg-pink-100 rounded-full text-pink-600 text-sm font-medium mb-4">
                        <GraduationCap size={16} /> {idioma === 'val' ? 'Nivell Universitari' : idioma === 'es' ? 'Nivel Universitario' : 'University Level'}
                    </div>
                    <h1 className="text-4xl md:text-5xl font-black text-gray-800 mb-4">{t('inicio', 'titol')}</h1>
                    <p className="text-xl text-gray-500 mb-2">{t('inicio', 'subtitol')}</p>
                    <p className="text-gray-400 max-w-2xl mx-auto">{t('inicio', 'desc')}</p>
                </div>
                
                {/* Grid de seccions */}
                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {seccions.map(sec => (
                        <button key={sec.id} onClick={() => setSection(sec.id)} className="group text-left bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-lg transition-all">
                            <div className={`p-4 bg-gradient-to-r ${sec.color} text-white`}>
                                <sec.icon size={28} />
                            </div>
                            <div className="p-4">
                                <h3 className="font-bold text-gray-800 group-hover:text-pink-600 transition-colors">{sec.nom}</h3>
                                <p className="text-sm text-gray-500 mt-1">{sec.desc}</p>
                            </div>
                        </button>
                    ))}
                </div>
                
                {/* Qu√® √©s l'economia? */}
                <Card title={idioma === 'val' ? "Qu√® √©s l'Economia?" : idioma === 'es' ? "¬øQu√© es la Econom√≠a?" : "What is Economics?"} icon={BookOpen}>
                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="space-y-4 text-gray-700">
                            <p>
                                {idioma === 'val' ? "L'economia √©s la ci√®ncia social que estudia com les societats administren els recursos escassos per satisfer necessitats il¬∑limitades." : 
                                 idioma === 'es' ? "La econom√≠a es la ciencia social que estudia c√≥mo las sociedades administran los recursos escasos para satisfacer necesidades ilimitadas." :
                                 "Economics is the social science that studies how societies manage scarce resources to satisfy unlimited needs."}
                            </p>
                            <ConceptBox title={idioma === 'val' ? "Escassetat" : idioma === 'es' ? "Escasez" : "Scarcity"} color="pink">
                                {idioma === 'val' ? "El problema fonamental: els recursos s√≥n limitats per√≤ els desitjos humans s√≥n infinits. Aix√≤ ens obliga a triar." :
                                 idioma === 'es' ? "El problema fundamental: los recursos son limitados pero los deseos humanos son infinitos. Esto nos obliga a elegir." :
                                 "The fundamental problem: resources are limited but human wants are infinite. This forces us to choose."}
                            </ConceptBox>
                            <ConceptBox title={idioma === 'val' ? "Cost d'Oportunitat" : idioma === 'es' ? "Coste de Oportunidad" : "Opportunity Cost"} color="blue">
                                {idioma === 'val' ? "El valor de la millor alternativa sacrificada quan prenem una decisi√≥. Si estudies economia, el cost d'oportunitat √©s el que podries fer amb aquest temps." :
                                 idioma === 'es' ? "El valor de la mejor alternativa sacrificada cuando tomamos una decisi√≥n. Si estudias econom√≠a, el coste de oportunidad es lo que podr√≠as hacer con ese tiempo." :
                                 "The value of the best alternative foregone when making a decision. If you study economics, the opportunity cost is what you could do with that time."}
                            </ConceptBox>
                        </div>
                        <div className="space-y-4">
                            <div className="bg-gradient-to-br from-pink-100 to-amber-100 rounded-xl p-6">
                                <h4 className="font-bold text-gray-800 mb-3">{idioma === 'val' ? "Les 3 preguntes b√†siques" : idioma === 'es' ? "Las 3 preguntas b√°sicas" : "The 3 basic questions"}</h4>
                                <div className="space-y-2 text-sm">
                                    <div className="flex items-center gap-2 bg-white/80 p-2 rounded-lg"><span className="text-pink-500 font-bold">1</span> {idioma === 'val' ? "Qu√® produir?" : idioma === 'es' ? "¬øQu√© producir?" : "What to produce?"}</div>
                                    <div className="flex items-center gap-2 bg-white/80 p-2 rounded-lg"><span className="text-pink-500 font-bold">2</span> {idioma === 'val' ? "Com produir-ho?" : idioma === 'es' ? "¬øC√≥mo producirlo?" : "How to produce it?"}</div>
                                    <div className="flex items-center gap-2 bg-white/80 p-2 rounded-lg"><span className="text-pink-500 font-bold">3</span> {idioma === 'val' ? "Per a qui produir-ho?" : idioma === 'es' ? "¬øPara qui√©n producirlo?" : "For whom to produce it?"}</div>
                                </div>
                            </div>
                            <div className="bg-gray-100 rounded-xl p-4 text-sm text-gray-600">
                                <p className="font-bold text-gray-700 mb-2">{idioma === 'val' ? "Micro vs Macro" : idioma === 'es' ? "Micro vs Macro" : "Micro vs Macro"}</p>
                                <p><strong>{idioma === 'val' ? "Microeconomia:" : idioma === 'es' ? "Microeconom√≠a:" : "Microeconomics:"}</strong> {idioma === 'val' ? "Decisions individuals (consumidors, empreses)" : idioma === 'es' ? "Decisiones individuales (consumidores, empresas)" : "Individual decisions (consumers, firms)"}</p>
                                <p className="mt-1"><strong>{idioma === 'val' ? "Macroeconomia:" : idioma === 'es' ? "Macroeconom√≠a:" : "Macroeconomics:"}</strong> {idioma === 'val' ? "Economia agregada (PIB, inflaci√≥, atur)" : idioma === 'es' ? "Econom√≠a agregada (PIB, inflaci√≥n, desempleo)" : "Aggregate economy (GDP, inflation, unemployment)"}</p>
                            </div>
                        </div>
                    </div>
                </Card>
            </div>
        );
    };

    // ========================================================================
    // SECCI√ì: MICROECONOMIA
    // ========================================================================
    const Microeconomia = () => {
        const [tab, setTab] = useState('od');
        
        return (
            <div className="space-y-6">
                <div className="flex items-center justify-between">
                    <div>
                        <h1 className="text-3xl font-black text-gray-800">{t('micro', 'titol')}</h1>
                        <p className="text-gray-500">{t('micro', 'intro')}</p>
                    </div>
                </div>
                
                <Tabs tabs={[
                    { id: 'od', label: idioma === 'val' ? 'üìä Oferta i Demanda' : idioma === 'es' ? 'üìä Oferta y Demanda' : 'üìä Supply & Demand' },
                    { id: 'elast', label: idioma === 'val' ? 'üìè Elasticitat' : idioma === 'es' ? 'üìè Elasticidad' : 'üìè Elasticity' },
                    { id: 'costos', label: idioma === 'val' ? 'üè≠ Costos' : 'üè≠ Costs' },
                    { id: 'consumidor', label: idioma === 'val' ? 'üë§ Consumidor' : idioma === 'es' ? 'üë§ Consumidor' : 'üë§ Consumer' },
                ]} active={tab} onChange={setTab} />
                
                {tab === 'od' && <OfertaDemanda />}
                {tab === 'elast' && <Elasticitat />}
                {tab === 'costos' && <CostosProducio />}
                {tab === 'consumidor' && <TeoriaConsumidor />}
            </div>
        );
    };
    
    // Sub-component: Oferta i Demanda
    const OfertaDemanda = () => (
        <div className="space-y-6">
            {/* Teoria */}
            <Card title={idioma === 'val' ? "üìö Teoria: Oferta i Demanda" : idioma === 'es' ? "üìö Teor√≠a: Oferta y Demanda" : "üìö Theory: Supply and Demand"}>
                <div className="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 className="font-bold text-pink-600 mb-2">{idioma === 'val' ? "Llei de la Demanda" : idioma === 'es' ? "Ley de la Demanda" : "Law of Demand"}</h4>
                        <p className="text-gray-700 text-sm mb-3">
                            {idioma === 'val' ? "Quan el preu d'un b√© augmenta (ceteris paribus), la quantitat demandada disminueix, i viceversa." :
                             idioma === 'es' ? "Cuando el precio de un bien aumenta (ceteris paribus), la cantidad demandada disminuye, y viceversa." :
                             "When the price of a good increases (ceteris paribus), the quantity demanded decreases, and vice versa."}
                        </p>
                        <FormulaBox formula="Qd = a - bP" description={idioma === 'val' ? "a = demanda m√†xima, b = sensibilitat al preu" : idioma === 'es' ? "a = demanda m√°xima, b = sensibilidad al precio" : "a = maximum demand, b = price sensitivity"} />
                        <p className="text-sm text-gray-600 mt-2">
                            <strong>{idioma === 'val' ? "Despla√ßaments:" : idioma === 'es' ? "Desplazamientos:" : "Shifts:"}</strong> {idioma === 'val' ? "Renda, gustos, preus b√©ns relacionats, expectatives, nombre de consumidors" : idioma === 'es' ? "Renta, gustos, precios bienes relacionados, expectativas, n√∫mero de consumidores" : "Income, tastes, prices of related goods, expectations, number of consumers"}
                        </p>
                    </div>
                    <div>
                        <h4 className="font-bold text-blue-600 mb-2">{idioma === 'val' ? "Llei de l'Oferta" : idioma === 'es' ? "Ley de la Oferta" : "Law of Supply"}</h4>
                        <p className="text-gray-700 text-sm mb-3">
                            {idioma === 'val' ? "Quan el preu d'un b√© augmenta (ceteris paribus), la quantitat ofertada augmenta, i viceversa." :
                             idioma === 'es' ? "Cuando el precio de un bien aumenta (ceteris paribus), la cantidad ofertada aumenta, y viceversa." :
                             "When the price of a good increases (ceteris paribus), the quantity supplied increases, and vice versa."}
                        </p>
                        <FormulaBox formula="Qs = c + dP" description={idioma === 'val' ? "c = oferta m√≠nima, d = sensibilitat al preu" : idioma === 'es' ? "c = oferta m√≠nima, d = sensibilidad al precio" : "c = minimum supply, d = price sensitivity"} />
                        <p className="text-sm text-gray-600 mt-2">
                            <strong>{idioma === 'val' ? "Despla√ßaments:" : idioma === 'es' ? "Desplazamientos:" : "Shifts:"}</strong> {idioma === 'val' ? "Costos de producci√≥, tecnologia, preus factors, expectatives, nombre de productors" : idioma === 'es' ? "Costes de producci√≥n, tecnolog√≠a, precios factores, expectativas, n√∫mero de productores" : "Production costs, technology, factor prices, expectations, number of producers"}
                        </p>
                    </div>
                </div>
                
                <div className="mt-6 p-4 bg-green-50 border border-green-200 rounded-xl">
                    <h4 className="font-bold text-green-700 mb-2">{idioma === 'val' ? "üéØ Equilibri de Mercat" : idioma === 'es' ? "üéØ Equilibrio de Mercado" : "üéØ Market Equilibrium"}</h4>
                    <p className="text-green-700 text-sm">
                        {idioma === 'val' ? "El punt on la quantitat demandada √©s igual a la quantitat ofertada. No hi ha ni exc√©s d'oferta ni de demanda." :
                         idioma === 'es' ? "El punto donde la cantidad demandada es igual a la cantidad ofertada. No hay ni exceso de oferta ni de demanda." :
                         "The point where quantity demanded equals quantity supplied. There is neither excess supply nor demand."}
                    </p>
                    <FormulaBox formula="Qd = Qs ‚Üí P* = (a-c)/(b+d)" />
                </div>
            </Card>
            
            {/* Simulador */}
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "‚öôÔ∏è Simulador" : "‚öôÔ∏è Simulator"}>
                    <div className="space-y-4">
                        <div className="p-3 bg-pink-50 rounded-xl">
                            <p className="text-xs text-pink-600 font-bold mb-2">{idioma === 'val' ? "DEMANDA" : idioma === 'es' ? "DEMANDA" : "DEMAND"}</p>
                            <Slider label={idioma === 'val' ? "Demanda m√†xima (a)" : idioma === 'es' ? "Demanda m√°xima (a)" : "Maximum demand (a)"} value={demandaIntercept} onChange={setDemandaIntercept} min={50} max={200} />
                            <Slider label={idioma === 'val' ? "Sensibilitat preu (b)" : idioma === 'es' ? "Sensibilidad precio (b)" : "Price sensitivity (b)"} value={demandaSlope} onChange={setDemandaSlope} min={0.5} max={5} step={0.5} />
                            <Slider label={idioma === 'val' ? "Despla√ßament" : idioma === 'es' ? "Desplazamiento" : "Shift"} value={shiftDemanda} onChange={setShiftDemanda} min={-50} max={50} />
                        </div>
                        <div className="p-3 bg-blue-50 rounded-xl">
                            <p className="text-xs text-blue-600 font-bold mb-2">{idioma === 'val' ? "OFERTA" : idioma === 'es' ? "OFERTA" : "SUPPLY"}</p>
                            <Slider label={idioma === 'val' ? "Oferta m√≠nima (c)" : idioma === 'es' ? "Oferta m√≠nima (c)" : "Minimum supply (c)"} value={ofertaIntercept} onChange={setOfertaIntercept} min={0} max={50} />
                            <Slider label={idioma === 'val' ? "Sensibilitat preu (d)" : idioma === 'es' ? "Sensibilidad precio (d)" : "Price sensitivity (d)"} value={ofertaSlope} onChange={setOfertaSlope} min={0.5} max={5} step={0.5} />
                            <Slider label={idioma === 'val' ? "Despla√ßament" : idioma === 'es' ? "Desplazamiento" : "Shift"} value={shiftOferta} onChange={setShiftOferta} min={-50} max={50} />
                        </div>
                    </div>
                </Card>
                
                <Card title={idioma === 'val' ? "üìä Gr√†fic" : idioma === 'es' ? "üìä Gr√°fico" : "üìä Graph"}>
                    <ResponsiveContainer width="100%" height={250}>
                        <LineChart data={dadesOD} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>
                            <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                            <XAxis dataKey="q" label={{ value: 'Q', position: 'right' }} />
                            <YAxis label={{ value: 'P', angle: -90, position: 'insideLeft' }} />
                            <Tooltip />
                            <Legend />
                            <Line type="monotone" dataKey="demanda" stroke="#ec4899" strokeWidth={3} name={idioma === 'val' ? "Demanda" : "Demand"} dot={false} />
                            <Line type="monotone" dataKey="oferta" stroke="#3b82f6" strokeWidth={3} name={idioma === 'val' ? "Oferta" : idioma === 'es' ? "Oferta" : "Supply"} dot={false} />
                            <ReferenceLine x={Number(equilibri.quantitat)} stroke="#22c55e" strokeDasharray="5 5" />
                            <ReferenceLine y={Number(equilibri.preu)} stroke="#22c55e" strokeDasharray="5 5" />
                        </LineChart>
                    </ResponsiveContainer>
                    <div className="grid grid-cols-3 gap-2 mt-4">
                        <div className="text-center p-2 bg-green-100 rounded-lg">
                            <p className="text-xs text-green-600">{idioma === 'val' ? "Preu*" : idioma === 'es' ? "Precio*" : "Price*"}</p>
                            <p className="font-black text-green-700">{equilibri.preu}‚Ç¨</p>
                        </div>
                        <div className="text-center p-2 bg-green-100 rounded-lg">
                            <p className="text-xs text-green-600">{idioma === 'val' ? "Quantitat*" : idioma === 'es' ? "Cantidad*" : "Quantity*"}</p>
                            <p className="font-black text-green-700">{equilibri.quantitat}</p>
                        </div>
                        <div className="text-center p-2 bg-amber-100 rounded-lg">
                            <p className="text-xs text-amber-600">{idioma === 'val' ? "Excedent Total" : idioma === 'es' ? "Excedente Total" : "Total Surplus"}</p>
                            <p className="font-black text-amber-700">{equilibri.excedentTotal}‚Ç¨</p>
                        </div>
                    </div>
                </Card>
            </div>
            
            {/* Excedents */}
            <Card title={idioma === 'val' ? "üí∞ Excedents" : idioma === 'es' ? "üí∞ Excedentes" : "üí∞ Surplus"}>
                <div className="grid md:grid-cols-2 gap-6">
                    <div>
                        <ConceptBox title={idioma === 'val' ? "Excedent del Consumidor" : idioma === 'es' ? "Excedente del Consumidor" : "Consumer Surplus"} color="pink">
                            {idioma === 'val' ? "La difer√®ncia entre el que els consumidors estan disposats a pagar i el que realment paguen. Representa el 'benefici' dels consumidors." :
                             idioma === 'es' ? "La diferencia entre lo que los consumidores est√°n dispuestos a pagar y lo que realmente pagan. Representa el 'beneficio' de los consumidores." :
                             "The difference between what consumers are willing to pay and what they actually pay. Represents consumer 'benefit'."}
                            <p className="mt-2 font-bold text-pink-700">{idioma === 'val' ? "Valor actual:" : idioma === 'es' ? "Valor actual:" : "Current value:"} {equilibri.excedentConsumidor}‚Ç¨</p>
                        </ConceptBox>
                    </div>
                    <div>
                        <ConceptBox title={idioma === 'val' ? "Excedent del Productor" : idioma === 'es' ? "Excedente del Productor" : "Producer Surplus"} color="blue">
                            {idioma === 'val' ? "La difer√®ncia entre el preu que reben els productors i el m√≠nim que acceptarien. Representa el 'benefici' dels productors." :
                             idioma === 'es' ? "La diferencia entre el precio que reciben los productores y el m√≠nimo que aceptar√≠an. Representa el 'beneficio' de los productores." :
                             "The difference between the price producers receive and the minimum they would accept. Represents producer 'benefit'."}
                            <p className="mt-2 font-bold text-blue-700">{idioma === 'val' ? "Valor actual:" : idioma === 'es' ? "Valor actual:" : "Current value:"} {equilibri.excedentProductor}‚Ç¨</p>
                        </ConceptBox>
                    </div>
                </div>
            </Card>
        </div>
    );
    
    // Sub-component: Elasticitat
    const Elasticitat = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Teoria: Elasticitat" : idioma === 'es' ? "üìö Teor√≠a: Elasticidad" : "üìö Theory: Elasticity"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "L'elasticitat mesura la sensibilitat d'una variable respecte a canvis en una altra. √âs una mesura sense unitats que permet comparar diferents b√©ns i mercats." :
                     idioma === 'es' ? "La elasticidad mide la sensibilidad de una variable respecto a cambios en otra. Es una medida sin unidades que permite comparar diferentes bienes y mercados." :
                     "Elasticity measures the sensitivity of one variable to changes in another. It is a unitless measure that allows comparison across different goods and markets."}
                </p>
                
                <div className="grid md:grid-cols-3 gap-4">
                    <div className="p-4 bg-pink-50 rounded-xl">
                        <h4 className="font-bold text-pink-700">{idioma === 'val' ? "Elasticitat-Preu Demanda" : idioma === 'es' ? "Elasticidad-Precio Demanda" : "Price Elasticity of Demand"}</h4>
                        <FormulaBox formula="EPD = %ŒîQ / %ŒîP" />
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "Mesura com canvia la quantitat demandada quan canvia el preu." :
                             idioma === 'es' ? "Mide c√≥mo cambia la cantidad demandada cuando cambia el precio." :
                             "Measures how quantity demanded changes when price changes."}
                        </p>
                    </div>
                    <div className="p-4 bg-blue-50 rounded-xl">
                        <h4 className="font-bold text-blue-700">{idioma === 'val' ? "Elasticitat-Renda" : idioma === 'es' ? "Elasticidad-Renta" : "Income Elasticity"}</h4>
                        <FormulaBox formula="ER = %ŒîQ / %ŒîRenda" />
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "> 0: B√© normal, < 0: B√© inferior, > 1: B√© de luxe" :
                             idioma === 'es' ? "> 0: Bien normal, < 0: Bien inferior, > 1: Bien de lujo" :
                             "> 0: Normal good, < 0: Inferior good, > 1: Luxury good"}
                        </p>
                    </div>
                    <div className="p-4 bg-green-50 rounded-xl">
                        <h4 className="font-bold text-green-700">{idioma === 'val' ? "Elasticitat Creuada" : idioma === 'es' ? "Elasticidad Cruzada" : "Cross Elasticity"}</h4>
                        <FormulaBox formula="EC = %ŒîQx / %ŒîPy" />
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "> 0: Substitutius, < 0: Complementaris" :
                             idioma === 'es' ? "> 0: Sustitutivos, < 0: Complementarios" :
                             "> 0: Substitutes, < 0: Complements"}
                        </p>
                    </div>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "üßÆ Calculadora d'Elasticitat" : idioma === 'es' ? "üßÆ Calculadora de Elasticidad" : "üßÆ Elasticity Calculator"}>
                    <div className="space-y-3">
                        <div className="grid grid-cols-2 gap-3">
                            <Slider label={idioma === 'val' ? "Preu inicial" : idioma === 'es' ? "Precio inicial" : "Initial price"} value={elastP1} onChange={setElastP1} min={1} max={50} suffix="‚Ç¨" />
                            <Slider label={idioma === 'val' ? "Preu final" : idioma === 'es' ? "Precio final" : "Final price"} value={elastP2} onChange={setElastP2} min={1} max={50} suffix="‚Ç¨" />
                            <Slider label={idioma === 'val' ? "Quantitat inicial" : idioma === 'es' ? "Cantidad inicial" : "Initial quantity"} value={elastQ1} onChange={setElastQ1} min={10} max={200} />
                            <Slider label={idioma === 'val' ? "Quantitat final" : idioma === 'es' ? "Cantidad final" : "Final quantity"} value={elastQ2} onChange={setElastQ2} min={10} max={200} />
                        </div>
                    </div>
                </Card>
                
                <Card className={`${Math.abs(Number(elasticitat.absolut)) > 1 ? 'bg-pink-50 border-pink-200' : Math.abs(Number(elasticitat.absolut)) < 1 ? 'bg-blue-50 border-blue-200' : 'bg-green-50 border-green-200'}`}>
                    <div className="text-center">
                        <p className="text-sm text-gray-500 mb-2">{idioma === 'val' ? "Elasticitat Preu-Demanda" : idioma === 'es' ? "Elasticidad Precio-Demanda" : "Price Elasticity of Demand"}</p>
                        <p className="text-5xl font-black text-gray-800 mb-2">{elasticitat.valor}</p>
                        <p className={`text-lg font-bold ${Math.abs(Number(elasticitat.absolut)) > 1 ? 'text-pink-600' : Math.abs(Number(elasticitat.absolut)) < 1 ? 'text-blue-600' : 'text-green-600'}`}>
                            {elasticitat.tipus}
                        </p>
                        <div className="mt-4 p-3 bg-white/50 rounded-lg text-sm text-gray-600">
                            {Math.abs(Number(elasticitat.absolut)) > 1 ? 
                                (idioma === 'val' ? "La demanda √©s molt sensible al preu. Un augment del preu redueix molt les vendes." :
                                 idioma === 'es' ? "La demanda es muy sensible al precio. Un aumento del precio reduce mucho las ventas." :
                                 "Demand is very sensitive to price. A price increase greatly reduces sales.") :
                             Math.abs(Number(elasticitat.absolut)) < 1 ?
                                (idioma === 'val' ? "La demanda √©s poc sensible al preu. B√©ns necessaris o sense substituts." :
                                 idioma === 'es' ? "La demanda es poco sensible al precio. Bienes necesarios o sin sustitutos." :
                                 "Demand is not very sensitive to price. Necessary goods or those without substitutes.") :
                                (idioma === 'val' ? "La variaci√≥ percentual de la quantitat √©s igual a la del preu." :
                                 idioma === 'es' ? "La variaci√≥n porcentual de la cantidad es igual a la del precio." :
                                 "The percentage change in quantity equals the percentage change in price.")}
                        </div>
                    </div>
                </Card>
            </div>
            
            <Card title={idioma === 'val' ? "üìã Classificaci√≥ de B√©ns segons Elasticitat" : idioma === 'es' ? "üìã Clasificaci√≥n de Bienes seg√∫n Elasticidad" : "üìã Classification of Goods by Elasticity"}>
                <div className="overflow-x-auto">
                    <table className="w-full text-sm">
                        <thead>
                            <tr className="bg-gray-100">
                                <th className="p-3 text-left">{idioma === 'val' ? "Tipus" : idioma === 'es' ? "Tipo" : "Type"}</th>
                                <th className="p-3 text-left">|E|</th>
                                <th className="p-3 text-left">{idioma === 'val' ? "Exemples" : idioma === 'es' ? "Ejemplos" : "Examples"}</th>
                                <th className="p-3 text-left">{idioma === 'val' ? "Implicaci√≥ empresarial" : idioma === 'es' ? "Implicaci√≥n empresarial" : "Business implication"}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr className="border-b">
                                <td className="p-3 font-bold text-pink-600">{idioma === 'val' ? "El√†stica" : idioma === 'es' ? "El√°stica" : "Elastic"}</td>
                                <td className="p-3">{"> 1"}</td>
                                <td className="p-3">{idioma === 'val' ? "Viatges, roba de marca, restaurants" : idioma === 'es' ? "Viajes, ropa de marca, restaurantes" : "Travel, brand clothing, restaurants"}</td>
                                <td className="p-3">{idioma === 'val' ? "Baixar preus augmenta ingressos" : idioma === 'es' ? "Bajar precios aumenta ingresos" : "Lowering prices increases revenue"}</td>
                            </tr>
                            <tr className="border-b">
                                <td className="p-3 font-bold text-green-600">{idioma === 'val' ? "Unit√†ria" : idioma === 'es' ? "Unitaria" : "Unitary"}</td>
                                <td className="p-3">= 1</td>
                                <td className="p-3">-</td>
                                <td className="p-3">{idioma === 'val' ? "Ingressos constants" : idioma === 'es' ? "Ingresos constantes" : "Constant revenue"}</td>
                            </tr>
                            <tr>
                                <td className="p-3 font-bold text-blue-600">{idioma === 'val' ? "Inel√†stica" : idioma === 'es' ? "Inel√°stica" : "Inelastic"}</td>
                                <td className="p-3">{"< 1"}</td>
                                <td className="p-3">{idioma === 'val' ? "Benzina, medicaments, pa" : idioma === 'es' ? "Gasolina, medicamentos, pan" : "Gasoline, medicine, bread"}</td>
                                <td className="p-3">{idioma === 'val' ? "Pujar preus augmenta ingressos" : idioma === 'es' ? "Subir precios aumenta ingresos" : "Raising prices increases revenue"}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </Card>
        </div>
    );
    
    // Sub-component: Costos de Producci√≥
    const CostosProducio = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Teoria: Costos de Producci√≥" : idioma === 'es' ? "üìö Teor√≠a: Costes de Producci√≥n" : "üìö Theory: Production Costs"}>
                <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                        <ConceptBox title={idioma === 'val' ? "Cost Fix (CF)" : idioma === 'es' ? "Coste Fijo (CF)" : "Fixed Cost (FC)"} color="blue">
                            {idioma === 'val' ? "Costos que no varien amb la producci√≥: lloguer, assegurances, sous fixos." :
                             idioma === 'es' ? "Costes que no var√≠an con la producci√≥n: alquiler, seguros, sueldos fijos." :
                             "Costs that don't vary with production: rent, insurance, fixed salaries."}
                        </ConceptBox>
                        <ConceptBox title={idioma === 'val' ? "Cost Variable (CV)" : idioma === 'es' ? "Coste Variable (CV)" : "Variable Cost (VC)"} color="pink">
                            {idioma === 'val' ? "Costos que varien amb la producci√≥: mat√®ries primeres, energia, hores extra." :
                             idioma === 'es' ? "Costes que var√≠an con la producci√≥n: materias primas, energ√≠a, horas extra." :
                             "Costs that vary with production: raw materials, energy, overtime."}
                        </ConceptBox>
                        <ConceptBox title={idioma === 'val' ? "Cost Total (CT)" : idioma === 'es' ? "Coste Total (CT)" : "Total Cost (TC)"} color="green">
                            <FormulaBox formula="CT = CF + CV" />
                        </ConceptBox>
                    </div>
                    <div className="space-y-3">
                        <ConceptBox title={idioma === 'val' ? "Cost Mitj√† (CMe)" : idioma === 'es' ? "Coste Medio (CMe)" : "Average Cost (AC)"} color="amber">
                            <FormulaBox formula="CMe = CT / Q = CFMe + CVMe" />
                            {idioma === 'val' ? "Cost per unitat produ√Øda. T√© forma d'U." :
                             idioma === 'es' ? "Coste por unidad producida. Tiene forma de U." :
                             "Cost per unit produced. U-shaped."}
                        </ConceptBox>
                        <ConceptBox title={idioma === 'val' ? "Cost Marginal (CMg)" : idioma === 'es' ? "Coste Marginal (CMg)" : "Marginal Cost (MC)"} color="violet">
                            <FormulaBox formula="CMg = ŒîCT / ŒîQ" />
                            {idioma === 'val' ? "Cost addicional de produir una unitat m√©s. Clau per a decisions." :
                             idioma === 'es' ? "Coste adicional de producir una unidad m√°s. Clave para decisiones." :
                             "Additional cost of producing one more unit. Key for decisions."}
                        </ConceptBox>
                    </div>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "‚öôÔ∏è Simulador de Costos" : idioma === 'es' ? "‚öôÔ∏è Simulador de Costes" : "‚öôÔ∏è Cost Simulator"}>
                    <div className="space-y-4">
                        <Slider label={idioma === 'val' ? "Cost Fix Total" : idioma === 'es' ? "Coste Fijo Total" : "Total Fixed Cost"} value={costFix} onChange={setCostFix} min={100} max={5000} step={100} suffix="‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Cost Variable Unitari" : idioma === 'es' ? "Coste Variable Unitario" : "Unit Variable Cost"} value={costVarUnit} onChange={setCostVarUnit} min={1} max={50} suffix="‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Quantitat Produ√Øda" : idioma === 'es' ? "Cantidad Producida" : "Quantity Produced"} value={quantitat} onChange={setQuantitat} min={10} max={500} step={10} />
                    </div>
                    <div className="grid grid-cols-2 gap-3 mt-4">
                        <div className="p-3 bg-blue-50 rounded-lg text-center">
                            <p className="text-xs text-blue-600">CF</p>
                            <p className="font-bold text-blue-700">{costFix}‚Ç¨</p>
                        </div>
                        <div className="p-3 bg-pink-50 rounded-lg text-center">
                            <p className="text-xs text-pink-600">CV</p>
                            <p className="font-bold text-pink-700">{costVarUnit * quantitat}‚Ç¨</p>
                        </div>
                        <div className="p-3 bg-green-50 rounded-lg text-center">
                            <p className="text-xs text-green-600">CT</p>
                            <p className="font-bold text-green-700">{costos.CT}‚Ç¨</p>
                        </div>
                        <div className="p-3 bg-amber-50 rounded-lg text-center">
                            <p className="text-xs text-amber-600">CMe</p>
                            <p className="font-bold text-amber-700">{costos.CMe}‚Ç¨</p>
                        </div>
                    </div>
                </Card>
                
                <Card title={idioma === 'val' ? "üìä Corbes de Costos" : idioma === 'es' ? "üìä Curvas de Costes" : "üìä Cost Curves"}>
                    <ResponsiveContainer width="100%" height={250}>
                        <LineChart data={dadesCostos} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>
                            <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                            <XAxis dataKey="q" label={{ value: 'Q', position: 'right' }} />
                            <YAxis />
                            <Tooltip />
                            <Legend />
                            <Line type="monotone" dataKey="CMe" stroke="#f59e0b" strokeWidth={2} name="CMe" dot={false} />
                            <Line type="monotone" dataKey="CFMe" stroke="#3b82f6" strokeWidth={2} name="CFMe" dot={false} />
                            <Line type="monotone" dataKey="CVMe" stroke="#ec4899" strokeWidth={2} name="CVMe" dot={false} />
                            <Line type="monotone" dataKey="CMg" stroke="#8b5cf6" strokeWidth={2} name="CMg" dot={false} />
                        </LineChart>
                    </ResponsiveContainer>
                </Card>
            </div>
        </div>
    );
    
    // Sub-component: Teoria del Consumidor (breu)
    const TeoriaConsumidor = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Teoria del Consumidor" : idioma === 'es' ? "üìö Teor√≠a del Consumidor" : "üìö Consumer Theory"}>
                <div className="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 className="font-bold text-pink-600 mb-3">{idioma === 'val' ? "Utilitat" : idioma === 'es' ? "Utilidad" : "Utility"}</h4>
                        <p className="text-gray-700 text-sm mb-3">
                            {idioma === 'val' ? "La satisfacci√≥ que obt√© un consumidor del consum d'un b√©. L'objectiu del consumidor √©s maximitzar la seva utilitat total." :
                             idioma === 'es' ? "La satisfacci√≥n que obtiene un consumidor del consumo de un bien. El objetivo del consumidor es maximizar su utilidad total." :
                             "The satisfaction a consumer gets from consuming a good. The consumer's goal is to maximize total utility."}
                        </p>
                        <ConceptBox title={idioma === 'val' ? "Utilitat Marginal Decreixent" : idioma === 'es' ? "Utilidad Marginal Decreciente" : "Diminishing Marginal Utility"} color="pink">
                            {idioma === 'val' ? "Cada unitat addicional d'un b√© proporciona menys satisfacci√≥ que l'anterior. El primer got d'aigua satisf√† m√©s que el des√®." :
                             idioma === 'es' ? "Cada unidad adicional de un bien proporciona menos satisfacci√≥n que la anterior. El primer vaso de agua satisface m√°s que el d√©cimo." :
                             "Each additional unit of a good provides less satisfaction than the previous one. The first glass of water satisfies more than the tenth."}
                        </ConceptBox>
                    </div>
                    <div>
                        <h4 className="font-bold text-blue-600 mb-3">{idioma === 'val' ? "Restricci√≥ Pressupost√†ria" : idioma === 'es' ? "Restricci√≥n Presupuestaria" : "Budget Constraint"}</h4>
                        <FormulaBox formula="Px¬∑X + Py¬∑Y = M" description={idioma === 'val' ? "M = Renda, Px, Py = Preus" : idioma === 'es' ? "M = Renta, Px, Py = Precios" : "M = Income, Px, Py = Prices"} />
                        <p className="text-gray-700 text-sm mt-3">
                            {idioma === 'val' ? "El consumidor ha de triar combinacions de b√©ns que pot pagar amb la seva renda." :
                             idioma === 'es' ? "El consumidor debe elegir combinaciones de bienes que puede pagar con su renta." :
                             "The consumer must choose combinations of goods they can afford with their income."}
                        </p>
                        <div className="mt-4 p-3 bg-blue-50 rounded-lg">
                            <p className="text-sm text-blue-700 font-bold">{idioma === 'val' ? "Condici√≥ d'Equilibri:" : idioma === 'es' ? "Condici√≥n de Equilibrio:" : "Equilibrium Condition:"}</p>
                            <p className="text-blue-800 font-mono text-center mt-1">UMgx/Px = UMgy/Py</p>
                        </div>
                    </div>
                </div>
            </Card>
            
            <Card title={idioma === 'val' ? "üìä Corbes d'Indifer√®ncia" : idioma === 'es' ? "üìä Curvas de Indiferencia" : "üìä Indifference Curves"}>
                <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                        <p className="text-gray-700 text-sm">
                            {idioma === 'val' ? "Les corbes d'indifer√®ncia representen totes les combinacions de dos b√©ns que proporcionen el mateix nivell d'utilitat al consumidor." :
                             idioma === 'es' ? "Las curvas de indiferencia representan todas las combinaciones de dos bienes que proporcionan el mismo nivel de utilidad al consumidor." :
                             "Indifference curves represent all combinations of two goods that provide the same level of utility to the consumer."}
                        </p>
                        <div className="space-y-2 text-sm">
                            <div className="flex items-center gap-2 p-2 bg-gray-50 rounded-lg">
                                <Check size={16} className="text-green-500" />
                                <span>{idioma === 'val' ? "Tenen pendent negativa" : idioma === 'es' ? "Tienen pendiente negativa" : "They have negative slope"}</span>
                            </div>
                            <div className="flex items-center gap-2 p-2 bg-gray-50 rounded-lg">
                                <Check size={16} className="text-green-500" />
                                <span>{idioma === 'val' ? "S√≥n convexes a l'origen" : idioma === 'es' ? "Son convexas al origen" : "They are convex to the origin"}</span>
                            </div>
                            <div className="flex items-center gap-2 p-2 bg-gray-50 rounded-lg">
                                <Check size={16} className="text-green-500" />
                                <span>{idioma === 'val' ? "No es creuen mai" : idioma === 'es' ? "Nunca se cruzan" : "They never cross"}</span>
                            </div>
                            <div className="flex items-center gap-2 p-2 bg-gray-50 rounded-lg">
                                <Check size={16} className="text-green-500" />
                                <span>{idioma === 'val' ? "M√©s lluny de l'origen = m√©s utilitat" : idioma === 'es' ? "M√°s lejos del origen = m√°s utilidad" : "Further from origin = more utility"}</span>
                            </div>
                        </div>
                    </div>
                    <div className="p-4 bg-gradient-to-br from-pink-100 to-amber-100 rounded-xl text-center">
                        <p className="font-bold text-gray-700 mb-2">{idioma === 'val' ? "Taxa Marginal de Substituci√≥ (TMS)" : idioma === 'es' ? "Tasa Marginal de Sustituci√≥n (TMS)" : "Marginal Rate of Substitution (MRS)"}</p>
                        <p className="text-gray-600 text-sm mb-3">
                            {idioma === 'val' ? "Quantitat d'un b√© que el consumidor est√† disposat a renunciar per obtenir una unitat addicional de l'altre b√©." :
                             idioma === 'es' ? "Cantidad de un bien que el consumidor est√° dispuesto a renunciar para obtener una unidad adicional del otro bien." :
                             "Amount of one good the consumer is willing to give up to get one more unit of the other good."}
                        </p>
                        <FormulaBox formula="TMS = -ŒîY/ŒîX = UMgx/UMgy" />
                    </div>
                </div>
            </Card>
        </div>
    );

    // ========================================================================
    // SECCI√ì: MACROECONOMIA
    // ========================================================================
    const Macroeconomia = () => {
        const [tab, setTab] = useState('pib');
        
        return (
            <div className="space-y-6">
                <div>
                    <h1 className="text-3xl font-black text-gray-800">{t('macro', 'titol')}</h1>
                    <p className="text-gray-500">{t('macro', 'intro')}</p>
                </div>
                
                <Tabs tabs={[
                    { id: 'pib', label: idioma === 'val' ? 'üìä PIB' : 'üìä GDP' },
                    { id: 'inflacio', label: idioma === 'val' ? 'üìà Inflaci√≥' : idioma === 'es' ? 'üìà Inflaci√≥n' : 'üìà Inflation' },
                    { id: 'mult', label: idioma === 'val' ? '‚úñÔ∏è Multiplicador' : '‚úñÔ∏è Multiplier' },
                    { id: 'islm', label: 'üìâ IS-LM' },
                ]} active={tab} onChange={setTab} />
                
                {tab === 'pib' && <PIBSection />}
                {tab === 'inflacio' && <InflacioSection />}
                {tab === 'mult' && <MultiplicadorSection />}
                {tab === 'islm' && <ISLMSection />}
            </div>
        );
    };
    
    // Sub-component: PIB
    const PIBSection = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Producte Interior Brut (PIB)" : idioma === 'es' ? "üìö Producto Interior Bruto (PIB)" : "üìö Gross Domestic Product (GDP)"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "El PIB √©s el valor monetari de tots els b√©ns i serveis finals produ√Øts dins d'un pa√≠s en un per√≠ode determinat (normalment un any)." :
                     idioma === 'es' ? "El PIB es el valor monetario de todos los bienes y servicios finales producidos dentro de un pa√≠s en un per√≠odo determinado (normalmente un a√±o)." :
                     "GDP is the monetary value of all final goods and services produced within a country in a given period (usually a year)."}
                </p>
                
                <div className="p-4 bg-gradient-to-r from-pink-100 to-amber-100 rounded-xl mb-4">
                    <h4 className="font-bold text-gray-800 mb-2">{idioma === 'val' ? "M√®tode de la Despesa" : idioma === 'es' ? "M√©todo del Gasto" : "Expenditure Method"}</h4>
                    <FormulaBox formula="PIB = C + I + G + (X - M)" />
                    <div className="grid grid-cols-5 gap-2 mt-3 text-center text-sm">
                        <div><strong>C</strong><br/>{idioma === 'val' ? "Consum" : idioma === 'es' ? "Consumo" : "Consumption"}</div>
                        <div><strong>I</strong><br/>{idioma === 'val' ? "Inversi√≥" : idioma === 'es' ? "Inversi√≥n" : "Investment"}</div>
                        <div><strong>G</strong><br/>{idioma === 'val' ? "Govern" : idioma === 'es' ? "Gobierno" : "Government"}</div>
                        <div><strong>X</strong><br/>{idioma === 'val' ? "Export." : "Export."}</div>
                        <div><strong>M</strong><br/>{idioma === 'val' ? "Import." : "Import."}</div>
                    </div>
                </div>
                
                <div className="grid md:grid-cols-2 gap-4">
                    <ConceptBox title={idioma === 'val' ? "PIB Nominal vs Real" : idioma === 'es' ? "PIB Nominal vs Real" : "Nominal vs Real GDP"} color="blue">
                        <p><strong>{idioma === 'val' ? "Nominal:" : "Nominal:"}</strong> {idioma === 'val' ? "A preus actuals" : idioma === 'es' ? "A precios actuales" : "At current prices"}</p>
                        <p><strong>{idioma === 'val' ? "Real:" : "Real:"}</strong> {idioma === 'val' ? "A preus constants (descompta inflaci√≥)" : idioma === 'es' ? "A precios constantes (descuenta inflaci√≥n)" : "At constant prices (removes inflation)"}</p>
                        <FormulaBox formula="PIB Real = PIB Nominal / Deflactor" />
                    </ConceptBox>
                    <ConceptBox title={idioma === 'val' ? "Taxa de Creixement" : idioma === 'es' ? "Tasa de Crecimiento" : "Growth Rate"} color="green">
                        <FormulaBox formula="g = (PIBt - PIBt-1) / PIBt-1 √ó 100" />
                        <p>{idioma === 'val' ? "Si g > 0: Expansi√≥. Si g < 0: Recessi√≥" : idioma === 'es' ? "Si g > 0: Expansi√≥n. Si g < 0: Recesi√≥n" : "If g > 0: Expansion. If g < 0: Recession"}</p>
                    </ConceptBox>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "‚öôÔ∏è Calculadora PIB" : idioma === 'es' ? "‚öôÔ∏è Calculadora PIB" : "‚öôÔ∏è GDP Calculator"}>
                    <div className="space-y-3">
                        <Slider label={idioma === 'val' ? "Consum (C)" : idioma === 'es' ? "Consumo (C)" : "Consumption (C)"} value={pibC} onChange={setPibC} min={200} max={1000} step={10} suffix="M‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Inversi√≥ (I)" : idioma === 'es' ? "Inversi√≥n (I)" : "Investment (I)"} value={pibI} onChange={setPibI} min={50} max={500} step={10} suffix="M‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Despesa P√∫blica (G)" : idioma === 'es' ? "Gasto P√∫blico (G)" : "Government (G)"} value={pibG} onChange={setPibG} min={50} max={400} step={10} suffix="M‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Exportacions (X)" : idioma === 'es' ? "Exportaciones (X)" : "Exports (X)"} value={pibX} onChange={setPibX} min={0} max={300} step={10} suffix="M‚Ç¨" />
                        <Slider label={idioma === 'val' ? "Importacions (M)" : idioma === 'es' ? "Importaciones (M)" : "Imports (M)"} value={pibM} onChange={setPibM} min={0} max={300} step={10} suffix="M‚Ç¨" />
                    </div>
                </Card>
                
                <Card className="bg-gradient-to-br from-pink-500 to-rose-500 text-white border-0">
                    <div className="text-center mb-4">
                        <p className="text-white/70">PIB</p>
                        <p className="text-5xl font-black">{pib.total}M‚Ç¨</p>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-sm">
                        <div className="p-2 bg-white/20 rounded-lg text-center">
                            <p className="text-white/70">C</p>
                            <p className="font-bold">{pib.percC}%</p>
                        </div>
                        <div className="p-2 bg-white/20 rounded-lg text-center">
                            <p className="text-white/70">I</p>
                            <p className="font-bold">{pib.percI}%</p>
                        </div>
                        <div className="p-2 bg-white/20 rounded-lg text-center">
                            <p className="text-white/70">G</p>
                            <p className="font-bold">{pib.percG}%</p>
                        </div>
                        <div className="p-2 bg-white/20 rounded-lg text-center">
                            <p className="text-white/70">XN</p>
                            <p className="font-bold">{pib.percXN}%</p>
                        </div>
                    </div>
                </Card>
            </div>
        </div>
    );
    
    // Sub-component: Inflaci√≥
    const InflacioSection = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Inflaci√≥" : idioma === 'es' ? "üìö Inflaci√≥n" : "üìö Inflation"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "L'augment generalitzat i sostingut dels preus d'una economia. Es mesura amb l'IPC (√çndex de Preus al Consum)." :
                     idioma === 'es' ? "El aumento generalizado y sostenido de los precios de una econom√≠a. Se mide con el IPC (√çndice de Precios al Consumo)." :
                     "The generalized and sustained increase in prices in an economy. Measured with CPI (Consumer Price Index)."}
                </p>
                
                <FormulaBox formula="Taxa d'Inflaci√≥ = (IPCt - IPCt-1) / IPCt-1 √ó 100" />
                
                <div className="grid md:grid-cols-3 gap-4 mt-4">
                    <ConceptBox title={idioma === 'val' ? "Causes" : idioma === 'es' ? "Causas" : "Causes"} color="pink">
                        <ul className="list-disc list-inside text-sm space-y-1">
                            <li>{idioma === 'val' ? "Demanda > Oferta" : idioma === 'es' ? "Demanda > Oferta" : "Demand > Supply"}</li>
                            <li>{idioma === 'val' ? "Augment costos" : idioma === 'es' ? "Aumento costes" : "Rising costs"}</li>
                            <li>{idioma === 'val' ? "Exc√©s de diners" : idioma === 'es' ? "Exceso de dinero" : "Excess money"}</li>
                        </ul>
                    </ConceptBox>
                    <ConceptBox title={idioma === 'val' ? "Efectes" : idioma === 'es' ? "Efectos" : "Effects"} color="blue">
                        <ul className="list-disc list-inside text-sm space-y-1">
                            <li>{idioma === 'val' ? "P√®rdua poder adquisitiu" : idioma === 'es' ? "P√©rdida poder adquisitivo" : "Loss of purchasing power"}</li>
                            <li>{idioma === 'val' ? "Redistribuci√≥ riquesa" : idioma === 'es' ? "Redistribuci√≥n riqueza" : "Wealth redistribution"}</li>
                            <li>{idioma === 'val' ? "Incertesa econ√≤mica" : idioma === 'es' ? "Incertidumbre econ√≥mica" : "Economic uncertainty"}</li>
                        </ul>
                    </ConceptBox>
                    <ConceptBox title={idioma === 'val' ? "Tipus" : idioma === 'es' ? "Tipos" : "Types"} color="amber">
                        <ul className="list-disc list-inside text-sm space-y-1">
                            <li><strong>{idioma === 'val' ? "Moderada:" : "Moderate:"}</strong> {"<"} 10%</li>
                            <li><strong>{idioma === 'val' ? "Alta:" : "High:"}</strong> 10-100%</li>
                            <li><strong>{idioma === 'val' ? "Hiperinflaci√≥:" : "Hyperinflation:"}</strong> {">"} 100%</li>
                        </ul>
                    </ConceptBox>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "üßÆ Calculadora d'Inflaci√≥" : idioma === 'es' ? "üßÆ Calculadora de Inflaci√≥n" : "üßÆ Inflation Calculator"}>
                    <div className="space-y-4">
                        <Slider label={idioma === 'val' ? "IPC Any 1" : idioma === 'es' ? "IPC A√±o 1" : "CPI Year 1"} value={inflacioAny1} onChange={setInflacioAny1} min={80} max={150} />
                        <Slider label={idioma === 'val' ? "IPC Any 2" : idioma === 'es' ? "IPC A√±o 2" : "CPI Year 2"} value={inflacioAny2} onChange={setInflacioAny2} min={80} max={150} />
                    </div>
                </Card>
                
                <Card className={`text-center ${Number(inflacio) > 5 ? 'bg-red-50 border-red-200' : Number(inflacio) > 2 ? 'bg-amber-50 border-amber-200' : 'bg-green-50 border-green-200'}`}>
                    <p className="text-gray-500 mb-2">{idioma === 'val' ? "Taxa d'Inflaci√≥" : idioma === 'es' ? "Tasa de Inflaci√≥n" : "Inflation Rate"}</p>
                    <p className={`text-5xl font-black ${Number(inflacio) > 5 ? 'text-red-600' : Number(inflacio) > 2 ? 'text-amber-600' : 'text-green-600'}`}>{inflacio}%</p>
                    <p className="text-sm text-gray-500 mt-2">
                        {Number(inflacio) > 5 ? (idioma === 'val' ? "‚ö†Ô∏è Inflaci√≥ alta" : idioma === 'es' ? "‚ö†Ô∏è Inflaci√≥n alta" : "‚ö†Ô∏è High inflation") :
                         Number(inflacio) > 2 ? (idioma === 'val' ? "üìà Inflaci√≥ moderada" : idioma === 'es' ? "üìà Inflaci√≥n moderada" : "üìà Moderate inflation") :
                         (idioma === 'val' ? "‚úÖ Inflaci√≥ baixa" : idioma === 'es' ? "‚úÖ Inflaci√≥n baja" : "‚úÖ Low inflation")}
                    </p>
                </Card>
            </div>
        </div>
    );
    
    // Sub-component: Multiplicador Keynesi√†
    const MultiplicadorSection = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Multiplicador Keynesi√†" : idioma === 'es' ? "üìö Multiplicador Keynesiano" : "üìö Keynesian Multiplier"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "Un increment de la despesa genera un efecte amplificat sobre el PIB. Aix√≤ passa perqu√® la despesa d'uns √©s l'ingr√©s d'altres, que al seu torn gasten una part." :
                     idioma === 'es' ? "Un incremento del gasto genera un efecto amplificado sobre el PIB. Esto ocurre porque el gasto de unos es el ingreso de otros, que a su vez gastan una parte." :
                     "An increase in spending generates an amplified effect on GDP. This happens because one's spending is another's income, who in turn spend a part of it."}
                </p>
                
                <div className="grid md:grid-cols-2 gap-4">
                    <div className="p-4 bg-pink-50 rounded-xl">
                        <h4 className="font-bold text-pink-700 mb-2">{idioma === 'val' ? "Propensi√≥ Marginal al Consum (PMC)" : idioma === 'es' ? "Propensi√≥n Marginal al Consumo (PMC)" : "Marginal Propensity to Consume (MPC)"}</h4>
                        <FormulaBox formula="PMC = ŒîC / ŒîRenda" />
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "Part de cada euro addicional que es destina al consum. Si PMC = 0.8, de cada 100‚Ç¨ extra es gasten 80‚Ç¨." :
                             idioma === 'es' ? "Parte de cada euro adicional que se destina al consumo. Si PMC = 0.8, de cada 100‚Ç¨ extra se gastan 80‚Ç¨." :
                             "Part of each additional euro spent on consumption. If MPC = 0.8, of every extra ‚Ç¨100, ‚Ç¨80 is spent."}
                        </p>
                    </div>
                    <div className="p-4 bg-blue-50 rounded-xl">
                        <h4 className="font-bold text-blue-700 mb-2">{idioma === 'val' ? "El Multiplicador" : idioma === 'es' ? "El Multiplicador" : "The Multiplier"}</h4>
                        <FormulaBox formula="k = 1 / (1 - PMC) = 1 / PMA" />
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "Si PMC = 0.8, k = 5. Un augment de 100‚Ç¨ en despesa p√∫blica genera 500‚Ç¨ de PIB." :
                             idioma === 'es' ? "Si PMC = 0.8, k = 5. Un aumento de 100‚Ç¨ en gasto p√∫blico genera 500‚Ç¨ de PIB." :
                             "If MPC = 0.8, k = 5. A ‚Ç¨100 increase in government spending generates ‚Ç¨500 in GDP."}
                        </p>
                    </div>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "‚öôÔ∏è Simulador" : "‚öôÔ∏è Simulator"}>
                    <div className="space-y-4">
                        <Slider label={idioma === 'val' ? "PMC (Propensi√≥ Marginal Consum)" : idioma === 'es' ? "PMC (Propensi√≥n Marginal Consumo)" : "MPC (Marginal Propensity to Consume)"} value={multPMC} onChange={setMultPMC} min={0.1} max={0.95} step={0.05} />
                        <Slider label={idioma === 'val' ? "Augment de Despesa (ŒîG)" : idioma === 'es' ? "Aumento de Gasto (ŒîG)" : "Spending Increase (ŒîG)"} value={multDeltaG} onChange={setMultDeltaG} min={10} max={500} step={10} suffix="‚Ç¨" />
                    </div>
                </Card>
                
                <Card className="bg-gradient-to-br from-amber-500 to-orange-500 text-white border-0">
                    <div className="text-center">
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <div className="p-3 bg-white/20 rounded-xl">
                                <p className="text-white/70 text-sm">{idioma === 'val' ? "Multiplicador" : "Multiplier"}</p>
                                <p className="text-3xl font-black">{multiplicador.valor}x</p>
                            </div>
                            <div className="p-3 bg-white/20 rounded-xl">
                                <p className="text-white/70 text-sm">PMA</p>
                                <p className="text-3xl font-black">{(1 - multPMC).toFixed(2)}</p>
                            </div>
                        </div>
                        <div className="p-4 bg-white/20 rounded-xl">
                            <p className="text-white/70 text-sm">{idioma === 'val' ? "Efecte sobre PIB (ŒîY)" : idioma === 'es' ? "Efecto sobre PIB (ŒîY)" : "Effect on GDP (ŒîY)"}</p>
                            <p className="text-4xl font-black">+{multiplicador.deltaY}‚Ç¨</p>
                            <p className="text-sm text-white/70 mt-1">
                                {multDeltaG}‚Ç¨ √ó {multiplicador.valor} = {multiplicador.deltaY}‚Ç¨
                            </p>
                        </div>
                    </div>
                </Card>
            </div>
        </div>
    );
    
    // Sub-component: IS-LM
    const ISLMSection = () => (
        <div className="space-y-6">
            <Card title={idioma === 'val' ? "üìö Model IS-LM" : idioma === 'es' ? "üìö Modelo IS-LM" : "üìö IS-LM Model"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "Model que mostra l'equilibri simultani del mercat de b√©ns (IS) i el mercat monetari (LM). Determina el nivell de renda (Y) i tipus d'inter√®s (r) d'equilibri." :
                     idioma === 'es' ? "Modelo que muestra el equilibrio simult√°neo del mercado de bienes (IS) y el mercado monetario (LM). Determina el nivel de renta (Y) y tipo de inter√©s (r) de equilibrio." :
                     "Model showing simultaneous equilibrium in the goods market (IS) and money market (LM). Determines equilibrium income (Y) and interest rate (r)."}
                </p>
                
                <div className="grid md:grid-cols-2 gap-4">
                    <div className="p-4 bg-pink-50 rounded-xl">
                        <h4 className="font-bold text-pink-700 mb-2">{idioma === 'val' ? "Corba IS (Mercat de B√©ns)" : idioma === 'es' ? "Curva IS (Mercado de Bienes)" : "IS Curve (Goods Market)"}</h4>
                        <p className="text-sm text-gray-600 mb-2">
                            {idioma === 'val' ? "Combinacions de Y i r on el mercat de b√©ns est√† en equilibri (Y = DA)." :
                             idioma === 'es' ? "Combinaciones de Y y r donde el mercado de bienes est√° en equilibrio (Y = DA)." :
                             "Combinations of Y and r where goods market is in equilibrium (Y = AD)."}
                        </p>
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "Pendent negatiu: ‚Üër ‚Üí ‚ÜìI ‚Üí ‚ÜìY" :
                             idioma === 'es' ? "Pendiente negativo: ‚Üër ‚Üí ‚ÜìI ‚Üí ‚ÜìY" :
                             "Negative slope: ‚Üër ‚Üí ‚ÜìI ‚Üí ‚ÜìY"}
                        </p>
                    </div>
                    <div className="p-4 bg-blue-50 rounded-xl">
                        <h4 className="font-bold text-blue-700 mb-2">{idioma === 'val' ? "Corba LM (Mercat Monetari)" : idioma === 'es' ? "Curva LM (Mercado Monetario)" : "LM Curve (Money Market)"}</h4>
                        <p className="text-sm text-gray-600 mb-2">
                            {idioma === 'val' ? "Combinacions de Y i r on el mercat monetari est√† en equilibri (M/P = L)." :
                             idioma === 'es' ? "Combinaciones de Y y r donde el mercado monetario est√° en equilibrio (M/P = L)." :
                             "Combinations of Y and r where money market is in equilibrium (M/P = L)."}
                        </p>
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "Pendent positiu: ‚ÜëY ‚Üí ‚ÜëLd ‚Üí ‚Üër" :
                             idioma === 'es' ? "Pendiente positivo: ‚ÜëY ‚Üí ‚ÜëLd ‚Üí ‚Üër" :
                             "Positive slope: ‚ÜëY ‚Üí ‚ÜëLd ‚Üí ‚Üër"}
                        </p>
                    </div>
                </div>
            </Card>
            
            <div className="grid lg:grid-cols-2 gap-6">
                <Card title={idioma === 'val' ? "‚öôÔ∏è Par√†metres IS-LM" : "‚öôÔ∏è IS-LM Parameters"}>
                    <div className="space-y-3">
                        <p className="text-xs text-gray-500 font-bold">IS</p>
                        <Slider label={idioma === 'val' ? "Consum aut√≤nom (C‚ÇÄ)" : idioma === 'es' ? "Consumo aut√≥nomo (C‚ÇÄ)" : "Autonomous consumption (C‚ÇÄ)"} value={isC0} onChange={setIsC0} min={50} max={200} />
                        <Slider label="PMC" value={isPMC} onChange={setIsPMC} min={0.5} max={0.95} step={0.05} />
                        <Slider label={idioma === 'val' ? "Inversi√≥ aut√≤noma (I‚ÇÄ)" : idioma === 'es' ? "Inversi√≥n aut√≥noma (I‚ÇÄ)" : "Autonomous investment (I‚ÇÄ)"} value={isI0} onChange={setIsI0} min={50} max={400} />
                        <Slider label={idioma === 'val' ? "Despesa p√∫blica (G)" : idioma === 'es' ? "Gasto p√∫blico (G)" : "Government spending (G)"} value={isG} onChange={setIsG} min={50} max={300} />
                        <p className="text-xs text-gray-500 font-bold mt-4">LM</p>
                        <Slider label={idioma === 'val' ? "Oferta monet√†ria (M)" : idioma === 'es' ? "Oferta monetaria (M)" : "Money supply (M)"} value={lmM} onChange={setLmM} min={200} max={1000} />
                    </div>
                </Card>
                
                <Card>
                    <ResponsiveContainer width="100%" height={250}>
                        <LineChart data={islm.dades} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>
                            <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                            <XAxis dataKey="Y" label={{ value: 'Y', position: 'right' }} />
                            <YAxis label={{ value: 'r', angle: -90, position: 'insideLeft' }} domain={[-5, 15]} />
                            <Tooltip />
                            <Legend />
                            <Line type="monotone" dataKey="IS" stroke="#ec4899" strokeWidth={3} name="IS" dot={false} />
                            <Line type="monotone" dataKey="LM" stroke="#3b82f6" strokeWidth={3} name="LM" dot={false} />
                        </LineChart>
                    </ResponsiveContainer>
                    <div className="grid grid-cols-2 gap-3 mt-4">
                        <div className="text-center p-3 bg-green-100 rounded-xl">
                            <p className="text-xs text-green-600">Y*</p>
                            <p className="font-black text-green-700 text-2xl">{islm.Y}</p>
                        </div>
                        <div className="text-center p-3 bg-green-100 rounded-xl">
                            <p className="text-xs text-green-600">r*</p>
                            <p className="font-black text-green-700 text-2xl">{islm.r}%</p>
                        </div>
                    </div>
                </Card>
            </div>
            
            <Card title={idioma === 'val' ? "üéØ Pol√≠tiques Econ√≤miques" : idioma === 'es' ? "üéØ Pol√≠ticas Econ√≥micas" : "üéØ Economic Policies"}>
                <div className="grid md:grid-cols-2 gap-4">
                    <div className="p-4 bg-amber-50 rounded-xl">
                        <h4 className="font-bold text-amber-700 mb-2">{idioma === 'val' ? "Pol√≠tica Fiscal Expansiva" : idioma === 'es' ? "Pol√≠tica Fiscal Expansiva" : "Expansionary Fiscal Policy"}</h4>
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "‚ÜëG o ‚ÜìT ‚Üí IS es despla√ßa a la dreta ‚Üí ‚ÜëY, ‚Üër" :
                             idioma === 'es' ? "‚ÜëG o ‚ÜìT ‚Üí IS se desplaza a la derecha ‚Üí ‚ÜëY, ‚Üër" :
                             "‚ÜëG or ‚ÜìT ‚Üí IS shifts right ‚Üí ‚ÜëY, ‚Üër"}
                        </p>
                        <p className="text-xs text-amber-600 mt-2">
                            {idioma === 'val' ? "Efecte crowding-out: ‚Üër pot reduir inversi√≥ privada" :
                             idioma === 'es' ? "Efecto crowding-out: ‚Üër puede reducir inversi√≥n privada" :
                             "Crowding-out effect: ‚Üër may reduce private investment"}
                        </p>
                    </div>
                    <div className="p-4 bg-emerald-50 rounded-xl">
                        <h4 className="font-bold text-emerald-700 mb-2">{idioma === 'val' ? "Pol√≠tica Monet√†ria Expansiva" : idioma === 'es' ? "Pol√≠tica Monetaria Expansiva" : "Expansionary Monetary Policy"}</h4>
                        <p className="text-sm text-gray-600">
                            {idioma === 'val' ? "‚ÜëM ‚Üí LM es despla√ßa a la dreta ‚Üí ‚ÜëY, ‚Üìr" :
                             idioma === 'es' ? "‚ÜëM ‚Üí LM se desplaza a la derecha ‚Üí ‚ÜëY, ‚Üìr" :
                             "‚ÜëM ‚Üí LM shifts right ‚Üí ‚ÜëY, ‚Üìr"}
                        </p>
                        <p className="text-xs text-emerald-600 mt-2">
                            {idioma === 'val' ? "Trampa de liquiditat: si r ja √©s molt baixa, no √©s efectiva" :
                             idioma === 'es' ? "Trampa de liquidez: si r ya es muy baja, no es efectiva" :
                             "Liquidity trap: if r is already very low, it's ineffective"}
                        </p>
                    </div>
                </div>
            </Card>
        </div>
    );

    // ========================================================================
    // ALTRES SECCIONS (breument definides)
    // ========================================================================
    
    const Mercats = () => (
        <div className="space-y-6">
            <h1 className="text-3xl font-black text-gray-800">{idioma === 'val' ? 'Estructures de Mercat' : idioma === 'es' ? 'Estructuras de Mercado' : 'Market Structures'}</h1>
            <div className="grid md:grid-cols-2 gap-4">
                {[
                    { nom: idioma === 'val' ? 'Compet√®ncia Perfecta' : idioma === 'es' ? 'Competencia Perfecta' : 'Perfect Competition', desc: idioma === 'val' ? 'Molts venedors, producte homogeni, lliure entrada' : idioma === 'es' ? 'Muchos vendedores, producto homog√©neo, libre entrada' : 'Many sellers, homogeneous product, free entry', color: 'green', exemple: idioma === 'val' ? 'Mercats agr√≠coles' : idioma === 'es' ? 'Mercados agr√≠colas' : 'Agricultural markets' },
                    { nom: idioma === 'val' ? 'Monopoli' : idioma === 'es' ? 'Monopolio' : 'Monopoly', desc: idioma === 'val' ? 'Un sol venedor, sense substituts, barreres altes' : idioma === 'es' ? 'Un solo vendedor, sin sustitutos, barreras altas' : 'Single seller, no substitutes, high barriers', color: 'red', exemple: idioma === 'val' ? 'Serveis p√∫blics locals' : idioma === 'es' ? 'Servicios p√∫blicos locales' : 'Local utilities' },
                    { nom: idioma === 'val' ? 'Oligopoli' : idioma === 'es' ? 'Oligopolio' : 'Oligopoly', desc: idioma === 'val' ? 'Pocs venedors, interdepend√®ncia estrat√®gica' : idioma === 'es' ? 'Pocos vendedores, interdependencia estrat√©gica' : 'Few sellers, strategic interdependence', color: 'amber', exemple: idioma === 'val' ? 'Autom√≤bils, aerol√≠nies' : idioma === 'es' ? 'Autom√≥viles, aerol√≠neas' : 'Cars, airlines' },
                    { nom: idioma === 'val' ? 'Comp. Monopol√≠stica' : idioma === 'es' ? 'Comp. Monopol√≠stica' : 'Monopolistic Comp.', desc: idioma === 'val' ? 'Molts venedors, producte diferenciat' : idioma === 'es' ? 'Muchos vendedores, producto diferenciado' : 'Many sellers, differentiated product', color: 'blue', exemple: idioma === 'val' ? 'Restaurants, roba' : idioma === 'es' ? 'Restaurantes, ropa' : 'Restaurants, clothing' },
                ].map((m, i) => (
                    <Card key={i} className={`border-l-4 border-${m.color}-500`}>
                        <h3 className={`font-bold text-${m.color}-700 mb-2`}>{m.nom}</h3>
                        <p className="text-gray-600 text-sm mb-2">{m.desc}</p>
                        <p className="text-xs text-gray-400">{idioma === 'val' ? 'Exemple:' : idioma === 'es' ? 'Ejemplo:' : 'Example:'} {m.exemple}</p>
                    </Card>
                ))}
            </div>
        </div>
    );
    
    const Comerc = () => (
        <div className="space-y-6">
            <h1 className="text-3xl font-black text-gray-800">{idioma === 'val' ? 'Comer√ß Internacional' : idioma === 'es' ? 'Comercio Internacional' : 'International Trade'}</h1>
            <Card title={idioma === 'val' ? "Avantatge Comparatiu" : idioma === 'es' ? "Ventaja Comparativa" : "Comparative Advantage"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "Un pa√≠s t√© avantatge comparatiu en un b√© si pot produir-lo amb un cost d'oportunitat menor que altres pa√Øsos. Aix√≤ justifica l'especialitzaci√≥ i el comer√ß." :
                     idioma === 'es' ? "Un pa√≠s tiene ventaja comparativa en un bien si puede producirlo con un coste de oportunidad menor que otros pa√≠ses. Esto justifica la especializaci√≥n y el comercio." :
                     "A country has comparative advantage in a good if it can produce it at a lower opportunity cost than other countries. This justifies specialization and trade."}
                </p>
                <ConceptBox title={idioma === 'val' ? "Balan√ßa de Pagaments" : idioma === 'es' ? "Balanza de Pagos" : "Balance of Payments"} color="blue">
                    <p>{idioma === 'val' ? "Registra totes les transaccions econ√≤miques d'un pa√≠s amb l'exterior:" :
                        idioma === 'es' ? "Registra todas las transacciones econ√≥micas de un pa√≠s con el exterior:" :
                        "Records all economic transactions of a country with abroad:"}</p>
                    <ul className="list-disc list-inside mt-2 text-sm">
                        <li><strong>{idioma === 'val' ? "Compte Corrent:" : idioma === 'es' ? "Cuenta Corriente:" : "Current Account:"}</strong> {idioma === 'val' ? "B√©ns, serveis, rendes" : idioma === 'es' ? "Bienes, servicios, rentas" : "Goods, services, income"}</li>
                        <li><strong>{idioma === 'val' ? "Compte Capital:" : idioma === 'es' ? "Cuenta Capital:" : "Capital Account:"}</strong> {idioma === 'val' ? "Transfer√®ncies de capital" : idioma === 'es' ? "Transferencias de capital" : "Capital transfers"}</li>
                        <li><strong>{idioma === 'val' ? "Compte Financer:" : idioma === 'es' ? "Cuenta Financiera:" : "Financial Account:"}</strong> {idioma === 'val' ? "Inversions, pr√©stecs" : idioma === 'es' ? "Inversiones, pr√©stamos" : "Investments, loans"}</li>
                    </ul>
                </ConceptBox>
            </Card>
        </div>
    );
    
    const TeoriaJocs = () => (
        <div className="space-y-6">
            <h1 className="text-3xl font-black text-gray-800">{idioma === 'val' ? 'Teoria de Jocs' : idioma === 'es' ? 'Teor√≠a de Juegos' : 'Game Theory'}</h1>
            <Card title={idioma === 'val' ? "Dilema del Presoner" : idioma === 'es' ? "Dilema del Prisionero" : "Prisoner's Dilemma"}>
                <p className="text-gray-700 mb-4">
                    {idioma === 'val' ? "Dos jugadors prenen decisions simult√†niament sense con√®ixer la decisi√≥ de l'altre. Cada jugador busca maximitzar el seu guany." :
                     idioma === 'es' ? "Dos jugadores toman decisiones simult√°neamente sin conocer la decisi√≥n del otro. Cada jugador busca maximizar su ganancia." :
                     "Two players make decisions simultaneously without knowing the other's decision. Each player seeks to maximize their payoff."}
                </p>
                <div className="overflow-x-auto">
                    <table className="w-full text-center border">
                        <thead>
                            <tr className="bg-gray-100">
                                <th className="p-3 border"></th>
                                <th className="p-3 border">{idioma === 'val' ? "Cooperar" : idioma === 'es' ? "Cooperar" : "Cooperate"}</th>
                                <th className="p-3 border">{idioma === 'val' ? "Trair" : idioma === 'es' ? "Traicionar" : "Defect"}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td className="p-3 border font-bold bg-gray-50">{idioma === 'val' ? "Cooperar" : idioma === 'es' ? "Cooperar" : "Cooperate"}</td>
                                <td className="p-3 border bg-green-50">(3, 3)</td>
                                <td className="p-3 border bg-red-50">(0, 5)</td>
                            </tr>
                            <tr>
                                <td className="p-3 border font-bold bg-gray-50">{idioma === 'val' ? "Trair" : idioma === 'es' ? "Traicionar" : "Defect"}</td>
                                <td className="p-3 border bg-red-50">(5, 0)</td>
                                <td className="p-3 border bg-amber-50">(1, 1)*</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p className="text-sm text-gray-500 mt-3">* {idioma === 'val' ? "Equilibri de Nash: cap jugador pot millorar canviant unilateralment" : idioma === 'es' ? "Equilibrio de Nash: ning√∫n jugador puede mejorar cambiando unilateralmente" : "Nash Equilibrium: no player can improve by changing unilaterally"}</p>
            </Card>
        </div>
    );
    
    const Historia = () => (
        <div className="space-y-6">
            <h1 className="text-3xl font-black text-gray-800">{idioma === 'val' ? "Hist√≤ria del Pensament Econ√≤mic" : idioma === 'es' ? "Historia del Pensamiento Econ√≥mico" : "History of Economic Thought"}</h1>
            <div className="space-y-4">
                {[
                    { nom: "Adam Smith (1723-1790)", escola: idioma === 'val' ? "Economia Cl√†ssica" : idioma === 'es' ? "Econom√≠a Cl√°sica" : "Classical Economics", idea: idioma === 'val' ? "La m√† invisible, divisi√≥ del treball, lliure mercat" : idioma === 'es' ? "La mano invisible, divisi√≥n del trabajo, libre mercado" : "Invisible hand, division of labor, free market", color: "amber" },
                    { nom: "Karl Marx (1818-1883)", escola: idioma === 'val' ? "Marxisme" : idioma === 'es' ? "Marxismo" : "Marxism", idea: idioma === 'val' ? "Lluita de classes, plusv√†lua, cr√≠tica al capitalisme" : idioma === 'es' ? "Lucha de clases, plusval√≠a, cr√≠tica al capitalismo" : "Class struggle, surplus value, critique of capitalism", color: "red" },
                    { nom: "John M. Keynes (1883-1946)", escola: idioma === 'val' ? "Keynesianisme" : idioma === 'es' ? "Keynesianismo" : "Keynesianism", idea: idioma === 'val' ? "Intervenci√≥ de l'Estat, demanda agregada, multiplicador" : idioma === 'es' ? "Intervenci√≥n del Estado, demanda agregada, multiplicador" : "Government intervention, aggregate demand, multiplier", color: "blue" },
                    { nom: "Milton Friedman (1912-2006)", escola: idioma === 'val' ? "Monetarisme" : idioma === 'es' ? "Monetarismo" : "Monetarism", idea: idioma === 'val' ? "Control de l'oferta monet√†ria, lliure mercat, cr√≠tica a Keynes" : idioma === 'es' ? "Control de la oferta monetaria, libre mercado, cr√≠tica a Keynes" : "Money supply control, free market, critique of Keynes", color: "green" },
                ].map((e, i) => (
                    <Card key={i} className={`border-l-4 border-${e.color}-500`}>
                        <div className="flex justify-between items-start">
                            <div>
                                <h3 className="font-bold text-gray-800">{e.nom}</h3>
                                <p className={`text-sm text-${e.color}-600 font-medium`}>{e.escola}</p>
                            </div>
                        </div>
                        <p className="text-gray-600 text-sm mt-2">{e.idea}</p>
                    </Card>
                ))}
            </div>
        </div>
    );
    
    const Quiz = () => {
        const [current, setCurrent] = useState(0);
        const [score, setScore] = useState(0);
        const [finished, setFinished] = useState(false);
        
        const preguntes = [
            { q: idioma === 'val' ? "Qu√® passa si augmenta el preu d'un b√© (ceteris paribus)?" : idioma === 'es' ? "¬øQu√© pasa si aumenta el precio de un bien (ceteris paribus)?" : "What happens if a good's price increases (ceteris paribus)?", opts: [idioma === 'val' ? "Augmenta Qd" : idioma === 'es' ? "Aumenta Qd" : "Qd increases", idioma === 'val' ? "Disminueix Qd" : idioma === 'es' ? "Disminuye Qd" : "Qd decreases", idioma === 'val' ? "No canvia" : idioma === 'es' ? "No cambia" : "No change"], correct: 1 },
            { q: idioma === 'val' ? "F√≥rmula del PIB pel m√®tode de la despesa?" : idioma === 'es' ? "¬øF√≥rmula del PIB por el m√©todo del gasto?" : "GDP formula by expenditure method?", opts: ["C + I + G + X - M", "C + I + G + M - X", "C √ó I √ó G √ó (X-M)"], correct: 0 },
            { q: idioma === 'val' ? "Si PMC = 0.8, quin √©s el multiplicador?" : idioma === 'es' ? "Si PMC = 0.8, ¬øcu√°l es el multiplicador?" : "If MPC = 0.8, what's the multiplier?", opts: ["0.8", "1.25", "5"], correct: 2 },
            { q: idioma === 'val' ? "Una elasticitat de -0.5 indica demanda..." : idioma === 'es' ? "Una elasticidad de -0.5 indica demanda..." : "An elasticity of -0.5 indicates... demand", opts: [idioma === 'val' ? "El√†stica" : idioma === 'es' ? "El√°stica" : "Elastic", idioma === 'val' ? "Inel√†stica" : idioma === 'es' ? "Inel√°stica" : "Inelastic", idioma === 'val' ? "Unit√†ria" : idioma === 'es' ? "Unitaria" : "Unitary"], correct: 1 },
            { q: idioma === 'val' ? "La corba IS t√© pendent..." : idioma === 'es' ? "La curva IS tiene pendiente..." : "The IS curve has... slope", opts: [idioma === 'val' ? "Positiu" : idioma === 'es' ? "Positivo" : "Positive", idioma === 'val' ? "Negatiu" : idioma === 'es' ? "Negativo" : "Negative", idioma === 'val' ? "Zero" : "Zero"], correct: 1 },
        ];
        
        const handleAnswer = (idx) => {
            if (idx === preguntes[current].correct) setScore(score + 1);
            if (current < preguntes.length - 1) setCurrent(current + 1);
            else setFinished(true);
        };
        
        if (finished) {
            return (
                <Card className="text-center">
                    <h2 className="text-2xl font-black text-gray-800 mb-4">{idioma === 'val' ? "Resultat" : idioma === 'es' ? "Resultado" : "Result"}</h2>
                    <p className="text-5xl font-black text-pink-600 mb-4">{score}/{preguntes.length}</p>
                    <p className="text-gray-600 mb-4">
                        {score === preguntes.length ? "üéâ " + (idioma === 'val' ? "Perfecte!" : idioma === 'es' ? "¬°Perfecto!" : "Perfect!") :
                         score >= preguntes.length * 0.6 ? "üëç " + (idioma === 'val' ? "Molt b√©!" : idioma === 'es' ? "¬°Muy bien!" : "Very good!") :
                         "üìö " + (idioma === 'val' ? "Segueix estudiant!" : idioma === 'es' ? "¬°Sigue estudiando!" : "Keep studying!")}
                    </p>
                    <button onClick={() => { setCurrent(0); setScore(0); setFinished(false); }} className="px-6 py-2 bg-pink-500 text-white rounded-lg font-bold">
                        {idioma === 'val' ? "Repetir" : idioma === 'es' ? "Repetir" : "Retry"}
                    </button>
                </Card>
            );
        }
        
        return (
            <div className="space-y-6">
                <h1 className="text-3xl font-black text-gray-800">Quiz</h1>
                <Card>
                    <div className="flex justify-between text-sm text-gray-500 mb-4">
                        <span>{idioma === 'val' ? "Pregunta" : idioma === 'es' ? "Pregunta" : "Question"} {current + 1}/{preguntes.length}</span>
                        <span>{idioma === 'val' ? "Punts" : idioma === 'es' ? "Puntos" : "Score"}: {score}</span>
                    </div>
                    <h3 className="text-xl font-bold text-gray-800 mb-6">{preguntes[current].q}</h3>
                    <div className="space-y-3">
                        {preguntes[current].opts.map((opt, i) => (
                            <button key={i} onClick={() => handleAnswer(i)} className="w-full p-4 text-left bg-gray-50 hover:bg-pink-50 rounded-xl border border-gray-200 hover:border-pink-300 transition-all">
                                {opt}
                            </button>
                        ))}
                    </div>
                </Card>
            </div>
        );
    };

    // ========================================================================
    // RENDER PRINCIPAL
    // ========================================================================
    
    return (
        <div className="min-h-screen">
            {/* Header */}
            <header className="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 shadow-sm">
                <div className="max-w-7xl mx-auto px-4">
                    <div className="flex items-center justify-between h-16">
                        <button onClick={() => setSection('inicio')} className="flex items-center gap-2">
                            <div className="p-2 bg-pink-500 rounded-xl text-white"><BarChart3 size={20} /></div>
                            <span className="font-bold text-lg text-gray-800 hidden sm:block">{t('inicio', 'titol')}</span>
                        </button>
                        
                        <nav className="hidden lg:flex items-center gap-1">
                            <NavBtn sec="inicio" icono={Home} label={t('nav', 'inicio')} />
                            <NavBtn sec="micro" icono={Users} label={t('nav', 'micro')} />
                            <NavBtn sec="macro" icono={Globe} label={t('nav', 'macro')} />
                            <NavBtn sec="mercats" icono={Building2} label={t('nav', 'mercats')} />
                            <NavBtn sec="comerc" icono={Briefcase} label={t('nav', 'comerc')} />
                            <NavBtn sec="jocs" icono={Gamepad2} label={t('nav', 'jocs')} />
                            <NavBtn sec="historia" icono={Clock} label={t('nav', 'historia')} />
                            <NavBtn sec="quiz" icono={Brain} label={t('nav', 'quiz')} />
                        </nav>
                        
                        <div className="flex items-center gap-2">
                            <a href="./index.html" className="p-2 text-gray-600 hover:text-pink-500 hover:bg-pink-50 rounded-lg transition-all" title={idioma === 'val' ? "Tornar a l'inici" : idioma === 'es' ? "Volver al inicio" : "Back to home"}>
                                <Home size={20} />
                            </a>
                            <LanguageSelector />
                            <button onClick={() => setMenuOpen(!menuOpen)} className="lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg">
                                {menuOpen ? <X size={24} /> : <Menu size={24} />}
                            </button>
                        </div>
                    </div>
                    
                    {menuOpen && (
                        <div className="lg:hidden py-4 border-t border-gray-100">
                            <div className="grid grid-cols-4 gap-2">
                                {[
                                    { sec: 'inicio', icon: Home, label: t('nav', 'inicio') },
                                    { sec: 'micro', icon: Users, label: t('nav', 'micro') },
                                    { sec: 'macro', icon: Globe, label: t('nav', 'macro') },
                                    { sec: 'mercats', icon: Building2, label: t('nav', 'mercats') },
                                    { sec: 'comerc', icon: Briefcase, label: t('nav', 'comerc') },
                                    { sec: 'jocs', icon: Gamepad2, label: t('nav', 'jocs') },
                                    { sec: 'historia', icon: Clock, label: t('nav', 'historia') },
                                    { sec: 'quiz', icon: Brain, label: t('nav', 'quiz') },
                                ].map(item => (
                                    <button key={item.sec} onClick={() => { setSection(item.sec); setMenuOpen(false); }} className={`p-3 rounded-lg text-center ${section === item.sec ? 'bg-pink-100 text-pink-700' : 'bg-gray-50 text-gray-600'}`}>
                                        <item.icon size={20} className="mx-auto mb-1" />
                                        <span className="text-xs font-medium">{item.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            </header>
            
            {/* Main */}
            <main className="max-w-7xl mx-auto px-4 py-8">
                {section === 'inicio' && <Inicio />}
                {section === 'micro' && <Microeconomia />}
                {section === 'macro' && <Macroeconomia />}
                {section === 'mercats' && <Mercats />}
                {section === 'comerc' && <Comerc />}
                {section === 'jocs' && <TeoriaJocs />}
                {section === 'historia' && <Historia />}
                {section === 'quiz' && <Quiz />}
            </main>
            
            {/* Footer */}
            <footer className="py-6 text-center text-sm text-gray-400 border-t border-gray-100">
                <p>Economia ¬∑ PDE ¬∑ 2025</p>
            </footer>
        </div>
    );
}

ReactDOM.render(<EconomiaApp />, document.getElementById('root'));
    </script>
</body>
</html>
