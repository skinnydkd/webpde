<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economia de l'Empresa - Guia Completa Interactiva</title>
    <meta name="description" content="Apr√®n economia de l'empresa amb simuladors interactius.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¢</text></svg>">
    <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { scrollbar-width: thin; scrollbar-color: #ec4899 #fdf2f8; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #fdf2f8; }
        ::-webkit-scrollbar-thumb { background-color: #ec4899; border-radius: 3px; }
        input[type="range"] { -webkit-appearance: none; appearance: none; height: 8px; border-radius: 4px; background: #fce4ec; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #ec4899; cursor: pointer; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .bg-gradient-to-br { background: linear-gradient(to bottom right, #fffbeb, #ffffff, #fdf2f8); }
        .bg-gradient-to-r { background: linear-gradient(to right, var(--tw-gradient-stops)); }
        /* Colors addicionals Tailwind 3 */
        .bg-emerald-50 { background-color: #ecfdf5; }
        .bg-emerald-100 { background-color: #d1fae5; }
        .bg-emerald-500 { background-color: #10b981; }
        .text-emerald-500 { color: #10b981; }
        .text-emerald-600 { color: #059669; }
        .text-emerald-700 { color: #047857; }
        .border-emerald-200 { border-color: #a7f3d0; }
        .bg-amber-50 { background-color: #fffbeb; }
        .bg-amber-100 { background-color: #fef3c7; }
        .text-amber-600 { color: #d97706; }
        .text-amber-700 { color: #b45309; }
        .border-amber-200 { border-color: #fde68a; }
        .bg-rose-50 { background-color: #fff1f2; }
        .text-rose-600 { color: #e11d48; }
        .text-rose-700 { color: #be123c; }
        .border-rose-200 { border-color: #fecdd3; }
        .bg-violet-50 { background-color: #f5f3ff; }
        .bg-violet-500 { background-color: #8b5cf6; }
        .text-violet-600 { color: #7c3aed; }
        .text-violet-700 { color: #6d28d9; }
        .border-violet-200 { border-color: #ddd6fe; }
        .bg-slate-50 { background-color: #f8fafc; }
        .bg-slate-800 { background-color: #1e293b; }
        .text-slate-600 { color: #475569; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-2xl { border-radius: 1rem; }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 via-white to-pink-50">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo, useCallback } = React;
        
        // Gr√†fic de barres CSS (sense Recharts)
        const SimpleBarChart = ({ data, height = 150 }) => {
            const max = Math.max(...data.map(d => d.value));
            return (
                <div className="flex items-end gap-2 justify-center p-4" style={{height}}>
                    {data.map((d, i) => (
                        <div key={i} className="flex flex-col items-center flex-1">
                            <div className="text-xs font-bold mb-1">{d.value >= 1000 ? `${(d.value/1000).toFixed(0)}k` : d.value.toFixed ? d.value.toFixed(0) : d.value}</div>
                            <div className="rounded-t transition-all w-full max-w-12" style={{ height: Math.max(8, (d.value / max) * (height - 50)), backgroundColor: d.color || '#ec4899' }} />
                            <div className="text-xs mt-1 text-gray-500 text-center truncate w-full">{d.label}</div>
                        </div>
                    ))}
                </div>
            );
        };
        
        // Gr√†fic de l√≠nies CSS
        const SimpleLineChart = ({ data, height = 120, color = '#ec4899' }) => {
            const max = Math.max(...data.map(d => d.value));
            const min = Math.min(...data.map(d => d.value));
            const range = max - min || 1;
            return (
                <div className="relative p-4" style={{height}}>
                    <svg className="w-full h-full" viewBox={`0 0 ${data.length * 40} 100`} preserveAspectRatio="none">
                        <polyline fill="none" stroke={color} strokeWidth="2" points={data.map((d, i) => `${i * 40 + 20},${100 - ((d.value - min) / range) * 80}`).join(' ')} />
                        {data.map((d, i) => (
                            <circle key={i} cx={i * 40 + 20} cy={100 - ((d.value - min) / range) * 80} r="4" fill={color} />
                        ))}
                    </svg>
                </div>
            );
        };
        
        // Sistema d'icones amb emojis
        const Icon = ({ name, size = 24, className = "" }) => {
            const icons = {
                Building2: "üè¢", Calculator: "üßÆ", TrendingUp: "üìà", TrendingDown: "üìâ", Users: "üë•",
                FileText: "üìÑ", Target: "üéØ", Lightbulb: "üí°", PieChart: "ü•ß", BarChart3: "üìä",
                Scale: "‚öñÔ∏è", Landmark: "üèõÔ∏è", Banknote: "üíµ", ShoppingCart: "üõí", Factory: "üè≠",
                GraduationCap: "üéì", Brain: "üß†", ChevronDown: "‚ñº", ChevronUp: "‚ñ≤", ChevronRight: "‚ñ∂",
                Check: "‚úì", X: "‚úï", Menu: "‚ò∞", Search: "üîç", Zap: "‚ö°", Clock: "üïê",
                Award: "üèÜ", RefreshCw: "üîÑ", Info: "‚ÑπÔ∏è", AlertTriangle: "‚ö†Ô∏è", DollarSign: "$",
                Percent: "%", Activity: "üìà", Layers: "üìö", ArrowRight: "‚Üí", Briefcase: "üíº",
                Settings: "‚öôÔ∏è", Package: "üì¶", Megaphone: "üì£", Truck: "üöö", BookOpen: "üìñ",
                CircleDollarSign: "üí≤", Receipt: "üßæ", Building: "üè¢", Coins: "ü™ô", HandCoins: "ü§≤",
                Wallet: "üëõ", Rocket: "üöÄ", Sparkles: "‚ú®", Globe: "üåç", Heart: "‚ù§Ô∏è",
                Shield: "üõ°Ô∏è", Wrench: "üîß", Eye: "üëÅÔ∏è", MessageSquare: "üí¨", Share2: "üîó",
                Box: "üì¶", CreditCard: "üí≥", PiggyBank: "üê∑", BarChart2: "üìä", FileCheck: "‚úÖ",
                ClipboardList: "üìã", UserCheck: "‚úì", Store: "üè™", Compass: "üß≠", Map: "üó∫Ô∏è",
                Flag: "üö©", Star: "‚≠ê", Home: "üè†", ArrowUpRight: "‚ÜóÔ∏è", ArrowDownRight: "‚ÜòÔ∏è",
                Repeat: "üîÅ", Network: "üîó", GitBranch: "üåø", Gauge: "üéõÔ∏è", Timer: "‚è±Ô∏è",
                Warehouse: "üè≠", MapPin: "üìç", Mail: "üìß", MousePointer: "üñ±Ô∏è", Hash: "#",
                Video: "üé•", Smartphone: "üì±", Share: "üîó", ThumbsUp: "üëç"
            };
            return <span style={{fontSize: size * 0.75, lineHeight: 1}} className={className}>{icons[name] || "‚Ä¢"}</span>;
        };
        const Building2 = (p) => <Icon name="Building2" {...p} />;
        const Calculator = (p) => <Icon name="Calculator" {...p} />;
        const TrendingUp = (p) => <Icon name="TrendingUp" {...p} />;
        const TrendingDown = (p) => <Icon name="TrendingDown" {...p} />;
        const Users = (p) => <Icon name="Users" {...p} />;
        const FileText = (p) => <Icon name="FileText" {...p} />;
        const Target = (p) => <Icon name="Target" {...p} />;
        const Lightbulb = (p) => <Icon name="Lightbulb" {...p} />;
        const PieChart = (p) => <Icon name="PieChart" {...p} />;
        const BarChart3 = (p) => <Icon name="BarChart3" {...p} />;
        const Scale = (p) => <Icon name="Scale" {...p} />;
        const Landmark = (p) => <Icon name="Landmark" {...p} />;
        const Banknote = (p) => <Icon name="Banknote" {...p} />;
        const ShoppingCart = (p) => <Icon name="ShoppingCart" {...p} />;
        const Factory = (p) => <Icon name="Factory" {...p} />;
        const GraduationCap = (p) => <Icon name="GraduationCap" {...p} />;
        const Brain = (p) => <Icon name="Brain" {...p} />;
        const ChevronDown = (p) => <Icon name="ChevronDown" {...p} />;
        const ChevronUp = (p) => <Icon name="ChevronUp" {...p} />;
        const ChevronRight = (p) => <Icon name="ChevronRight" {...p} />;
        const Check = (p) => <Icon name="Check" {...p} />;
        const X = (p) => <Icon name="X" {...p} />;
        const Menu = (p) => <Icon name="Menu" {...p} />;
        const Search = (p) => <Icon name="Search" {...p} />;
        const Zap = (p) => <Icon name="Zap" {...p} />;
        const Clock = (p) => <Icon name="Clock" {...p} />;
        const Award = (p) => <Icon name="Award" {...p} />;
        const RefreshCw = (p) => <Icon name="RefreshCw" {...p} />;
        const Info = (p) => <Icon name="Info" {...p} />;
        const AlertTriangle = (p) => <Icon name="AlertTriangle" {...p} />;
        const DollarSign = (p) => <Icon name="DollarSign" {...p} />;
        const Percent = (p) => <Icon name="Percent" {...p} />;
        const Activity = (p) => <Icon name="Activity" {...p} />;
        const Layers = (p) => <Icon name="Layers" {...p} />;
        const ArrowRight = (p) => <Icon name="ArrowRight" {...p} />;
        const Briefcase = (p) => <Icon name="Briefcase" {...p} />;
        const Settings = (p) => <Icon name="Settings" {...p} />;
        const Package = (p) => <Icon name="Package" {...p} />;
        const Megaphone = (p) => <Icon name="Megaphone" {...p} />;
        const Truck = (p) => <Icon name="Truck" {...p} />;
        const BookOpen = (p) => <Icon name="BookOpen" {...p} />;
        const CircleDollarSign = (p) => <Icon name="CircleDollarSign" {...p} />;
        const Receipt = (p) => <Icon name="Receipt" {...p} />;
        const Building = (p) => <Icon name="Building" {...p} />;
        const Coins = (p) => <Icon name="Coins" {...p} />;
        const HandCoins = (p) => <Icon name="HandCoins" {...p} />;
        const Wallet = (p) => <Icon name="Wallet" {...p} />;
        const Rocket = (p) => <Icon name="Rocket" {...p} />;
        const Sparkles = (p) => <Icon name="Sparkles" {...p} />;
        const Globe = (p) => <Icon name="Globe" {...p} />;
        const Heart = (p) => <Icon name="Heart" {...p} />;
        const Shield = (p) => <Icon name="Shield" {...p} />;
        const Wrench = (p) => <Icon name="Wrench" {...p} />;
        const Eye = (p) => <Icon name="Eye" {...p} />;
        const MessageSquare = (p) => <Icon name="MessageSquare" {...p} />;
        const Share2 = (p) => <Icon name="Share2" {...p} />;
        const Box = (p) => <Icon name="Box" {...p} />;
        const CreditCard = (p) => <Icon name="CreditCard" {...p} />;
        const PiggyBank = (p) => <Icon name="PiggyBank" {...p} />;
        const BarChart2 = (p) => <Icon name="BarChart2" {...p} />;
        const FileCheck = (p) => <Icon name="FileCheck" {...p} />;
        const ClipboardList = (p) => <Icon name="ClipboardList" {...p} />;
        const UserCheck = (p) => <Icon name="UserCheck" {...p} />;
        const Store = (p) => <Icon name="Store" {...p} />;
        const Compass = (p) => <Icon name="Compass" {...p} />;
        const Map = (p) => <Icon name="Map" {...p} />;
        const Flag = (p) => <Icon name="Flag" {...p} />;
        const Star = (p) => <Icon name="Star" {...p} />;
        const Home = (p) => <Icon name="Home" {...p} />;
        const ArrowUpRight = (p) => <Icon name="ArrowUpRight" {...p} />;
        const ArrowDownRight = (p) => <Icon name="ArrowDownRight" {...p} />;
        const Repeat = (p) => <Icon name="Repeat" {...p} />;
        const Network = (p) => <Icon name="Network" {...p} />;
        const GitBranch = (p) => <Icon name="GitBranch" {...p} />;
        const Gauge = (p) => <Icon name="Gauge" {...p} />;
        const Timer = (p) => <Icon name="Timer" {...p} />;
        const Warehouse = (p) => <Icon name="Warehouse" {...p} />;
        const MapPin = (p) => <Icon name="MapPin" {...p} />;
        const Mail = (p) => <Icon name="Mail" {...p} />;
        const MousePointer = (p) => <Icon name="MousePointer" {...p} />;
        const Hash = (p) => <Icon name="Hash" {...p} />;
        const Video = (p) => <Icon name="Video" {...p} />;
        const Smartphone = (p) => <Icon name="Smartphone" {...p} />;
        const Share = (p) => <Icon name="Share" {...p} />;
        const ThumbsUp = (p) => <Icon name="ThumbsUp" {...p} />;


// ============================================================================
// SISTEMA DE TRADUCCIONS
// ============================================================================

const translations = {
  // NAVEGACI√ì I UI
  nav: {
    inicio: { val: 'Inici', es: 'Inicio', en: 'Home' },
    costos: { val: 'Costos', es: 'Costes', en: 'Costs' },
    puntmort: { val: 'Punt Mort', es: 'Punto Muerto', en: 'Break-even' },
    productivitat: { val: 'Productivitat', es: 'Productividad', en: 'Productivity' },
    van: { val: 'VAN/TIR', es: 'VAN/TIR', en: 'NPV/IRR' },
    formes: { val: 'Formes Jur√≠diques', es: 'Formas Jur√≠dicas', en: 'Legal Forms' },
    financament: { val: 'Finan√ßament', es: 'Financiaci√≥n', en: 'Financing' },
    ratios: { val: 'R√†tios', es: 'Ratios', en: 'Ratios' },
    rrhh: { val: 'Recursos Humans', es: 'Recursos Humanos', en: 'Human Resources' },
    produccio: { val: 'Producci√≥', es: 'Producci√≥n', en: 'Production' },
    marketing: { val: 'M√†rqueting', es: 'Marketing', en: 'Marketing' },
    estrategia: { val: 'Estrat√®gia', es: 'Estrategia', en: 'Strategy' },
    canvas: { val: 'Canvas', es: 'Canvas', en: 'Canvas' },
    analisi: { val: 'An√†lisi', es: 'An√°lisis', en: 'Analysis' },
    creixement: { val: 'Creixement', es: 'Crecimiento', en: 'Growth' },
    innovacio: { val: 'Innovaci√≥', es: 'Innovaci√≥n', en: 'Innovation' },
    quiz: { val: 'Quiz', es: 'Quiz', en: 'Quiz' },
    glosari: { val: 'Glosari', es: 'Glosario', en: 'Glossary' },
  },
  
  // TEXTOS GENERALS
  ui: {
    buscar: { val: 'Cercar...', es: 'Buscar...', en: 'Search...' },
    unitats: { val: 'unitats', es: 'unidades', en: 'units' },
    euros: { val: 'euros', es: 'euros', en: 'euros' },
    anys: { val: 'anys', es: 'a√±os', en: 'years' },
    mesos: { val: 'mesos', es: 'meses', en: 'months' },
    formula: { val: 'F√≥rmula', es: 'F√≥rmula', en: 'Formula' },
    exemple: { val: 'Exemple', es: 'Ejemplo', en: 'Example' },
    avantatges: { val: 'Avantatges', es: 'Ventajas', en: 'Advantages' },
    desavantatges: { val: 'Desavantatges', es: 'Desventajas', en: 'Disadvantages' },
    caracteristiques: { val: 'Caracter√≠stiques', es: 'Caracter√≠sticas', en: 'Features' },
    ideal: { val: 'Ideal per a', es: 'Ideal para', en: 'Ideal for' },
    seguent: { val: 'Seg√ºent', es: 'Siguiente', en: 'Next' },
    anterior: { val: 'Anterior', es: 'Anterior', en: 'Previous' },
    correcte: { val: 'Correcte!', es: '¬°Correcto!', en: 'Correct!' },
    incorrecte: { val: 'Incorrecte', es: 'Incorrecto', en: 'Incorrect' },
    puntuacio: { val: 'Puntuaci√≥', es: 'Puntuaci√≥n', en: 'Score' },
    repetir: { val: 'Repetir', es: 'Repetir', en: 'Retry' },
    tornar: { val: 'Tornar', es: 'Volver', en: 'Back' },
    comen√ßar: { val: 'Comen√ßar', es: 'Empezar', en: 'Start' },
    resultat: { val: 'Resultat', es: 'Resultado', en: 'Result' },
    calcular: { val: 'Calcular', es: 'Calcular', en: 'Calculate' },
  },

  // INICI
  inicio: {
    titol: { 
      val: 'Empresa', 
      es: 'Empresa', 
      en: 'Business' 
    },
    subtitol: { 
      val: 'Guia Completa per Emprenedors i Estudiants', 
      es: 'Gu√≠a Completa para Emprendedores y Estudiantes', 
      en: 'Complete Guide for Entrepreneurs and Students' 
    },
    desc: {
      val: 'Tot el que necessites saber per crear, gestionar i fer cr√©ixer el teu negoci',
      es: 'Todo lo que necesitas saber para crear, gestionar y hacer crecer tu negocio',
      en: 'Everything you need to know to create, manage and grow your business'
    },
    frase: {
      val: 'Un negoci existeix per resoldre problemes',
      es: 'Un negocio existe para resolver problemas',
      en: 'A business exists to solve problems'
    },
    fraseDesc: {
      val: 'Guanyar diners no √©s la causa, √©s la conseq√º√®ncia de solucionar problemes millor que la compet√®ncia.',
      es: 'Ganar dinero no es la causa, es la consecuencia de solucionar problemas mejor que la competencia.',
      en: 'Making money is not the cause, it is the consequence of solving problems better than the competition.'
    }
  },

  // COSTOS
  costos: {
    titol: { val: 'Costos de Producci√≥', es: 'Costes de Producci√≥n', en: 'Production Costs' },
    cf: { val: 'Costos Fixos (CF)', es: 'Costes Fijos (CF)', en: 'Fixed Costs (FC)' },
    cv: { val: 'Costos Variables (CV)', es: 'Costes Variables (CV)', en: 'Variable Costs (VC)' },
    ct: { val: 'Cost Total (CT)', es: 'Coste Total (CT)', en: 'Total Cost (TC)' },
    cme: { val: 'Cost Mitj√† (CMe)', es: 'Coste Medio (CMe)', en: 'Average Cost (AC)' },
    cmg: { val: 'Cost Marginal (CMg)', es: 'Coste Marginal (CMg)', en: 'Marginal Cost (MC)' },
    cfDesc: { 
      val: 'Costos que NO varien amb la producci√≥: lloguer, assegurances, amortitzaci√≥, sous fixos', 
      es: 'Costes que NO var√≠an con la producci√≥n: alquiler, seguros, amortizaci√≥n, sueldos fijos',
      en: 'Costs that do NOT vary with production: rent, insurance, depreciation, fixed salaries'
    },
    cvDesc: {
      val: 'Costos que S√ç varien amb la producci√≥: mat√®ries primes, energia, m√† d\'obra directa',
      es: 'Costes que S√ç var√≠an con la producci√≥n: materias primas, energ√≠a, mano de obra directa',
      en: 'Costs that DO vary with production: raw materials, energy, direct labor'
    }
  },

  // PUNT MORT
  puntmort: {
    titol: { val: 'Punt Mort (Break-even)', es: 'Punto Muerto (Break-even)', en: 'Break-even Point' },
    desc: {
      val: 'El punt mort √©s el nivell de vendes on els ingressos totals igualen els costos totals. A partir d\'aqu√≠, comences a tenir beneficis.',
      es: 'El punto muerto es el nivel de ventas donde los ingresos totales igualan los costes totales. A partir de aqu√≠, empiezas a tener beneficios.',
      en: 'The break-even point is the sales level where total revenue equals total costs. From here, you start making profits.'
    },
    margeContribucio: { val: 'Marge de Contribuci√≥', es: 'Margen de Contribuci√≥n', en: 'Contribution Margin' },
    preuVenda: { val: 'Preu de Venda (PV)', es: 'Precio de Venta (PV)', en: 'Selling Price (SP)' },
    costVariable: { val: 'Cost Variable Unitari (CVu)', es: 'Coste Variable Unitario (CVu)', en: 'Variable Cost per Unit (VCu)' }
  },

  // VAN/TIR
  van: {
    titol: { val: 'An√†lisi d\'Inversions: VAN i TIR', es: 'An√°lisis de Inversiones: VAN y TIR', en: 'Investment Analysis: NPV and IRR' },
    vanNom: { val: 'Valor Actual Net (VAN)', es: 'Valor Actual Neto (VAN)', en: 'Net Present Value (NPV)' },
    tirNom: { val: 'Taxa Interna de Rendibilitat (TIR)', es: 'Tasa Interna de Rendibilidad (TIR)', en: 'Internal Rate of Return (IRR)' },
    payback: { val: 'Termini de Recuperaci√≥ (Payback)', es: 'Plazo de Recuperaci√≥n (Payback)', en: 'Payback Period' },
    inversioInicial: { val: 'Inversi√≥ Inicial', es: 'Inversi√≥n Inicial', en: 'Initial Investment' },
    taxaDescompte: { val: 'Taxa de Descompte (k)', es: 'Tasa de Descuento (k)', en: 'Discount Rate (k)' },
    fluxos: { val: 'Fluxos de Caixa', es: 'Flujos de Caja', en: 'Cash Flows' },
    vanPositiu: { val: 'VAN > 0: Projecte RENDIBLE ‚úì', es: 'VAN > 0: Proyecto RENTABLE ‚úì', en: 'NPV > 0: PROFITABLE Project ‚úì' },
    vanNegatiu: { val: 'VAN < 0: Projecte NO rendible ‚úó', es: 'VAN < 0: Proyecto NO rentable ‚úó', en: 'NPV < 0: NOT profitable Project ‚úó' },
    vanDesc: {
      val: 'El VAN actualitza tots els fluxos de caixa futurs al valor present. Si √©s positiu, el projecte genera valor.',
      es: 'El VAN actualiza todos los flujos de caja futuros al valor presente. Si es positivo, el proyecto genera valor.',
      en: 'NPV discounts all future cash flows to present value. If positive, the project generates value.'
    },
    tirDesc: {
      val: 'La TIR √©s la taxa que fa el VAN = 0. Si TIR > k (cost de capital), el projecte √©s rendible.',
      es: 'La TIR es la tasa que hace el VAN = 0. Si TIR > k (coste de capital), el proyecto es rentable.',
      en: 'IRR is the rate that makes NPV = 0. If IRR > k (cost of capital), the project is profitable.'
    }
  },

  // FORMES JUR√çDIQUES
  formes: {
    titol: { val: 'Formes Jur√≠diques', es: 'Formas Jur√≠dicas', en: 'Legal Forms' },
    capitalMinim: { val: 'Capital m√≠nim', es: 'Capital m√≠nimo', en: 'Minimum capital' },
    socis: { val: 'Socis', es: 'Socios', en: 'Partners' },
    responsabilitat: { val: 'Responsabilitat', es: 'Responsabilidad', en: 'Liability' },
    tributacio: { val: 'Tributaci√≥', es: 'Tributaci√≥n', en: 'Taxation' },
    tramits: { val: 'Tr√†mits', es: 'Tr√°mites', en: 'Procedures' },
    autonomo: { val: 'Empresari Individual (Aut√≤nom)', es: 'Empresario Individual (Aut√≥nomo)', en: 'Sole Proprietor (Self-employed)' },
    sl: { val: 'Societat Limitada (SL)', es: 'Sociedad Limitada (SL)', en: 'Limited Liability Company (LLC)' },
    sa: { val: 'Societat An√≤nima (SA)', es: 'Sociedad An√≥nima (SA)', en: 'Corporation (Inc.)' },
    coop: { val: 'Cooperativa', es: 'Cooperativa', en: 'Cooperative' },
    slaboral: { val: 'Societat Laboral', es: 'Sociedad Laboral', en: 'Worker-owned Company' }
  },

  // FINAN√áAMENT
  financament: {
    titol: { val: 'Fonts de Finan√ßament', es: 'Fuentes de Financiaci√≥n', en: 'Sources of Financing' },
    propi: { val: 'Finan√ßament Propi', es: 'Financiaci√≥n Propia', en: 'Equity Financing' },
    alie: { val: 'Finan√ßament Ali√®', es: 'Financiaci√≥n Ajena', en: 'Debt Financing' },
    curtTermini: { val: 'Curt Termini', es: 'Corto Plazo', en: 'Short Term' },
    llargTermini: { val: 'Llarg Termini', es: 'Largo Plazo', en: 'Long Term' },
    aportacions: { val: 'Aportacions dels socis', es: 'Aportaciones de los socios', en: 'Partner contributions' },
    reserves: { val: 'Reserves i beneficis retinguts', es: 'Reservas y beneficios retenidos', en: 'Reserves and retained earnings' },
    prestec: { val: 'Pr√©stec bancari', es: 'Pr√©stamo bancario', en: 'Bank loan' },
    hipoteca: { val: 'Hipoteca', es: 'Hipoteca', en: 'Mortgage' },
    leasing: { val: 'Leasing', es: 'Leasing', en: 'Leasing' },
    renting: { val: 'Renting', es: 'Renting', en: 'Renting' },
    factoring: { val: 'Factoring', es: 'Factoring', en: 'Factoring' },
    confirming: { val: 'Confirming', es: 'Confirming', en: 'Confirming' },
    crowdfunding: { val: 'Crowdfunding', es: 'Crowdfunding', en: 'Crowdfunding' },
    businessAngels: { val: 'Business Angels', es: 'Business Angels', en: 'Business Angels' },
    capitalRisc: { val: 'Capital Risc', es: 'Capital Riesgo', en: 'Venture Capital' },
    subvencions: { val: 'Subvencions', es: 'Subvenciones', en: 'Grants' }
  },

  // R√ÄTIOS
  ratios: {
    titol: { val: 'An√†lisi per R√†tios', es: 'An√°lisis por Ratios', en: 'Ratio Analysis' },
    liquiditat: { val: 'R√†tios de Liquiditat', es: 'Ratios de Liquidez', en: 'Liquidity Ratios' },
    endeutament: { val: 'R√†tios d\'Endeutament', es: 'Ratios de Endeudamiento', en: 'Debt Ratios' },
    rendibilitat: { val: 'R√†tios de Rendibilitat', es: 'Ratios de Rentabilidad', en: 'Profitability Ratios' },
    activitat: { val: 'R√†tios d\'Activitat', es: 'Ratios de Actividad', en: 'Activity Ratios' },
    fonsManiobra: { val: 'Fons de Maniobra', es: 'Fondo de Maniobra', en: 'Working Capital' },
    ratioLiquiditat: { val: 'R√†tio de Liquiditat', es: 'Ratio de Liquidez', en: 'Current Ratio' },
    acidTest: { val: 'Prova √Äcida (Acid Test)', es: 'Prueba √Åcida (Acid Test)', en: 'Acid Test (Quick Ratio)' },
    tresoreria: { val: 'R√†tio de Tresoreria', es: 'Ratio de Tesorer√≠a', en: 'Cash Ratio' },
    endeutamentTotal: { val: 'Endeutament Total', es: 'Endeudamiento Total', en: 'Total Debt Ratio' },
    autonomia: { val: 'Autonomia Financera', es: 'Autonom√≠a Financiera', en: 'Financial Autonomy' },
    roe: { val: 'ROE (Rendibilitat Financera)', es: 'ROE (Rentabilidad Financiera)', en: 'ROE (Return on Equity)' },
    roa: { val: 'ROA (Rendibilitat Econ√≤mica)', es: 'ROA (Rentabilidad Econ√≥mica)', en: 'ROA (Return on Assets)' },
    ros: { val: 'ROS (Rendibilitat sobre Vendes)', es: 'ROS (Rentabilidad sobre Ventas)', en: 'ROS (Return on Sales)' }
  },

  // RECURSOS HUMANS
  rrhh: {
    titol: { val: 'Recursos Humans', es: 'Recursos Humanos', en: 'Human Resources' },
    organigrama: { val: 'Organigrama', es: 'Organigrama', en: 'Organization Chart' },
    contractes: { val: 'Tipus de Contractes', es: 'Tipos de Contratos', en: 'Types of Contracts' },
    seleccio: { val: 'Proc√©s de Selecci√≥', es: 'Proceso de Selecci√≥n', en: 'Selection Process' },
    motivacio: { val: 'Motivaci√≥', es: 'Motivaci√≥n', en: 'Motivation' },
    retribucio: { val: 'Retribuci√≥', es: 'Retribuci√≥n', en: 'Compensation' },
    formacio: { val: 'Formaci√≥', es: 'Formaci√≥n', en: 'Training' },
    indefinit: { val: 'Indefinit', es: 'Indefinido', en: 'Permanent' },
    temporal: { val: 'Temporal', es: 'Temporal', en: 'Temporary' },
    formacioAprenentatge: { val: 'Formaci√≥ i Aprenentatge', es: 'Formaci√≥n y Aprendizaje', en: 'Training and Apprenticeship' },
    practiques: { val: 'Pr√†ctiques', es: 'Pr√°cticas', en: 'Internship' },
    fixDiscontinuu: { val: 'Fix Discontinu', es: 'Fijo Discontinuo', en: 'Seasonal Permanent' },
    maslow: { val: 'Pir√†mide de Maslow', es: 'Pir√°mide de Maslow', en: 'Maslow\'s Pyramid' },
    herzberg: { val: 'Teoria de Herzberg', es: 'Teor√≠a de Herzberg', en: 'Herzberg\'s Theory' },
    mcgregor: { val: 'Teoria X i Y de McGregor', es: 'Teor√≠a X e Y de McGregor', en: 'McGregor\'s Theory X and Y' }
  },

  // PRODUCCI√ì
  produccio: {
    titol: { val: 'Producci√≥ i Operacions', es: 'Producci√≥n y Operaciones', en: 'Production and Operations' },
    procesProductiu: { val: 'Proc√©s Productiu', es: 'Proceso Productivo', en: 'Production Process' },
    tipusProces: { val: 'Tipus de Processos', es: 'Tipos de Procesos', en: 'Types of Processes' },
    gestioEstocs: { val: 'Gesti√≥ d\'Estocs', es: 'Gesti√≥n de Stocks', en: 'Inventory Management' },
    qualitat: { val: 'Qualitat', es: 'Calidad', en: 'Quality' },
    cadenaValor: { val: 'Cadena de Valor', es: 'Cadena de Valor', en: 'Value Chain' },
    jit: { val: 'Just in Time', es: 'Just in Time', en: 'Just in Time' },
    kanban: { val: 'Kanban', es: 'Kanban', en: 'Kanban' },
    eoq: { val: 'Lot Econ√≤mic (EOQ)', es: 'Lote Econ√≥mico (EOQ)', en: 'Economic Order Quantity (EOQ)' },
    puntComanda: { val: 'Punt de Comanda', es: 'Punto de Pedido', en: 'Reorder Point' },
    estocSeguretat: { val: 'Estoc de Seguretat', es: 'Stock de Seguridad', en: 'Safety Stock' },
    productivitat: { val: 'Productivitat', es: 'Productividad', en: 'Productivity' },
    eficiencia: { val: 'Efici√®ncia', es: 'Eficiencia', en: 'Efficiency' },
    eficacia: { val: 'Efic√†cia', es: 'Eficacia', en: 'Effectiveness' }
  },

  // MARKETING
  marketing: {
    titol: { val: 'M√†rqueting', es: 'Marketing', en: 'Marketing' },
    les4p: { val: 'Les 4P del Marketing Mix', es: 'Las 4P del Marketing Mix', en: 'The 4Ps of Marketing Mix' },
    producte: { val: 'Producte (Product)', es: 'Producto (Product)', en: 'Product' },
    preu: { val: 'Preu (Price)', es: 'Precio (Price)', en: 'Price' },
    distribucio: { val: 'Distribuci√≥ (Place)', es: 'Distribuci√≥n (Place)', en: 'Place (Distribution)' },
    comunicacio: { val: 'Comunicaci√≥ (Promotion)', es: 'Comunicaci√≥n (Promotion)', en: 'Promotion' },
    segmentacio: { val: 'Segmentaci√≥', es: 'Segmentaci√≥n', en: 'Segmentation' },
    posicionament: { val: 'Posicionament', es: 'Posicionamiento', en: 'Positioning' },
    buyerPersona: { val: 'Buyer Persona', es: 'Buyer Persona', en: 'Buyer Persona' },
    cicleVidaProducte: { val: 'Cicle de Vida del Producte', es: 'Ciclo de Vida del Producto', en: 'Product Life Cycle' },
    introduccio: { val: 'Introducci√≥', es: 'Introducci√≥n', en: 'Introduction' },
    creixement: { val: 'Creixement', es: 'Crecimiento', en: 'Growth' },
    maduresa: { val: 'Maduresa', es: 'Madurez', en: 'Maturity' },
    declivi: { val: 'Declivi', es: 'Declive', en: 'Decline' },
    marketingDigital: { val: 'M√†rqueting Digital', es: 'Marketing Digital', en: 'Digital Marketing' },
    seo: { val: 'SEO (Posicionament Org√†nic)', es: 'SEO (Posicionamiento Org√°nico)', en: 'SEO (Search Engine Optimization)' },
    sem: { val: 'SEM (Publicitat en Cercadors)', es: 'SEM (Publicidad en Buscadores)', en: 'SEM (Search Engine Marketing)' },
    xarxesSocials: { val: 'Xarxes Socials', es: 'Redes Sociales', en: 'Social Media' },
    emailMarketing: { val: 'Email Marketing', es: 'Email Marketing', en: 'Email Marketing' },
    contentMarketing: { val: 'Marketing de Continguts', es: 'Marketing de Contenidos', en: 'Content Marketing' }
  },

  // ESTRAT√àGIA
  estrategia: {
    titol: { val: 'Estrat√®gia Empresarial', es: 'Estrategia Empresarial', en: 'Business Strategy' },
    missio: { val: 'Missi√≥', es: 'Misi√≥n', en: 'Mission' },
    visio: { val: 'Visi√≥', es: 'Visi√≥n', en: 'Vision' },
    valors: { val: 'Valors', es: 'Valores', en: 'Values' },
    objectius: { val: 'Objectius', es: 'Objetivos', en: 'Objectives' },
    porter: { val: 'Estrat√®gies Gen√®riques de Porter', es: 'Estrategias Gen√©ricas de Porter', en: 'Porter\'s Generic Strategies' },
    lideratge: { val: 'Lideratge en Costos', es: 'Liderazgo en Costes', en: 'Cost Leadership' },
    diferenciacio: { val: 'Diferenciaci√≥', es: 'Diferenciaci√≥n', en: 'Differentiation' },
    focus: { val: 'Enfocament (N√≠nxol)', es: 'Enfoque (Nicho)', en: 'Focus (Niche)' },
    ansoff: { val: 'Matriu d\'Ansoff', es: 'Matriz de Ansoff', en: 'Ansoff Matrix' },
    penetracio: { val: 'Penetraci√≥ de Mercat', es: 'Penetraci√≥n de Mercado', en: 'Market Penetration' },
    desenvolupamentProducte: { val: 'Desenvolupament de Producte', es: 'Desarrollo de Producto', en: 'Product Development' },
    desenvolupamentMercat: { val: 'Desenvolupament de Mercat', es: 'Desarrollo de Mercado', en: 'Market Development' },
    diversificacio: { val: 'Diversificaci√≥', es: 'Diversificaci√≥n', en: 'Diversification' }
  },

  // AN√ÄLISI
  analisi: {
    titol: { val: 'Eines d\'An√†lisi Estrat√®gica', es: 'Herramientas de An√°lisis Estrat√©gico', en: 'Strategic Analysis Tools' },
    dafo: { val: 'An√†lisi DAFO/SWOT', es: 'An√°lisis DAFO/SWOT', en: 'SWOT Analysis' },
    debilitats: { val: 'Debilitats', es: 'Debilidades', en: 'Weaknesses' },
    amenaces: { val: 'Amenaces', es: 'Amenazas', en: 'Threats' },
    fortaleses: { val: 'Fortaleses', es: 'Fortalezas', en: 'Strengths' },
    oportunitats: { val: 'Oportunitats', es: 'Oportunidades', en: 'Opportunities' },
    porter5: { val: '5 Forces de Porter', es: '5 Fuerzas de Porter', en: 'Porter\'s 5 Forces' },
    pestel: { val: 'An√†lisi PESTEL', es: 'An√°lisis PESTEL', en: 'PESTEL Analysis' },
    politic: { val: 'Pol√≠tic', es: 'Pol√≠tico', en: 'Political' },
    economic: { val: 'Econ√≤mic', es: 'Econ√≥mico', en: 'Economic' },
    social: { val: 'Social', es: 'Social', en: 'Social' },
    tecnologic: { val: 'Tecnol√≤gic', es: 'Tecnol√≥gico', en: 'Technological' },
    ecologic: { val: 'Ecol√≤gic', es: 'Ecol√≥gico', en: 'Environmental' },
    legal: { val: 'Legal', es: 'Legal', en: 'Legal' }
  },

  // CREIXEMENT
  creixement: {
    titol: { val: 'Creixement Empresarial', es: 'Crecimiento Empresarial', en: 'Business Growth' },
    intern: { val: 'Creixement Intern', es: 'Crecimiento Interno', en: 'Internal Growth' },
    extern: { val: 'Creixement Extern', es: 'Crecimiento Externo', en: 'External Growth' },
    fusio: { val: 'Fusi√≥', es: 'Fusi√≥n', en: 'Merger' },
    adquisicio: { val: 'Adquisici√≥', es: 'Adquisici√≥n', en: 'Acquisition' },
    jointVenture: { val: 'Joint Venture', es: 'Joint Venture', en: 'Joint Venture' },
    franquicia: { val: 'Franqu√≠cia', es: 'Franquicia', en: 'Franchise' },
    internacionalitzacio: { val: 'Internacionalitzaci√≥', es: 'Internacionalizaci√≥n', en: 'Internationalization' },
    exportacio: { val: 'Exportaci√≥', es: 'Exportaci√≥n', en: 'Export' },
    filial: { val: 'Filial', es: 'Filial', en: 'Subsidiary' },
    integracio: { val: 'Integraci√≥', es: 'Integraci√≥n', en: 'Integration' },
    vertical: { val: 'Vertical', es: 'Vertical', en: 'Vertical' },
    horitzontal: { val: 'Horitzontal', es: 'Horizontal', en: 'Horizontal' }
  },

  // INNOVACI√ì
  innovacio: {
    titol: { val: 'Innovaci√≥ i Emprenedoria', es: 'Innovaci√≥n y Emprendimiento', en: 'Innovation and Entrepreneurship' },
    tipusInnovacio: { val: 'Tipus d\'Innovaci√≥', es: 'Tipos de Innovaci√≥n', en: 'Types of Innovation' },
    producte: { val: 'Innovaci√≥ de Producte', es: 'Innovaci√≥n de Producto', en: 'Product Innovation' },
    proces: { val: 'Innovaci√≥ de Proc√©s', es: 'Innovaci√≥n de Proceso', en: 'Process Innovation' },
    organitzativa: { val: 'Innovaci√≥ Organitzativa', es: 'Innovaci√≥n Organizativa', en: 'Organizational Innovation' },
    marketing: { val: 'Innovaci√≥ en M√†rqueting', es: 'Innovaci√≥n en Marketing', en: 'Marketing Innovation' },
    incremental: { val: 'Incremental', es: 'Incremental', en: 'Incremental' },
    radical: { val: 'Radical/Disruptiva', es: 'Radical/Disruptiva', en: 'Radical/Disruptive' },
    leanStartup: { val: 'Lean Startup', es: 'Lean Startup', en: 'Lean Startup' },
    mvp: { val: 'MVP (M√≠nim Producte Viable)', es: 'MVP (M√≠nimo Producto Viable)', en: 'MVP (Minimum Viable Product)' },
    pivotar: { val: 'Pivotar', es: 'Pivotar', en: 'Pivot' },
    construirMesurarAprendre: { val: 'Construir-Mesurar-Aprendre', es: 'Construir-Medir-Aprender', en: 'Build-Measure-Learn' }
  },

  // CANVAS
  canvas: {
    titol: { val: 'Business Model Canvas', es: 'Business Model Canvas', en: 'Business Model Canvas' },
    segments: { val: 'Segments de Clients', es: 'Segmentos de Clientes', en: 'Customer Segments' },
    proposta: { val: 'Proposta de Valor', es: 'Propuesta de Valor', en: 'Value Proposition' },
    canals: { val: 'Canals', es: 'Canales', en: 'Channels' },
    relacions: { val: 'Relacions amb Clients', es: 'Relaciones con Clientes', en: 'Customer Relationships' },
    ingressos: { val: 'Fonts d\'Ingressos', es: 'Fuentes de Ingresos', en: 'Revenue Streams' },
    recursos: { val: 'Recursos Clau', es: 'Recursos Clave', en: 'Key Resources' },
    activitats: { val: 'Activitats Clau', es: 'Actividades Clave', en: 'Key Activities' },
    socis: { val: 'Socis Clau', es: 'Socios Clave', en: 'Key Partners' },
    costos: { val: 'Estructura de Costos', es: 'Estructura de Costes', en: 'Cost Structure' }
  },

  // LOCALITZACI√ì
  localitzacio: {
    titol: { val: 'Localitzaci√≥ Empresarial', es: 'Localizaci√≥n Empresarial', en: 'Business Location' },
    factors: { val: 'Factors de Localitzaci√≥', es: 'Factores de Localizaci√≥n', en: 'Location Factors' },
    accessibilitat: { val: 'Accessibilitat', es: 'Accesibilidad', en: 'Accessibility' },
    infraestructures: { val: 'Infraestructures', es: 'Infraestructuras', en: 'Infrastructure' },
    maObra: { val: 'M√† d\'Obra', es: 'Mano de Obra', en: 'Labor Force' },
    proximitat: { val: 'Proximitat a clients/prove√Ødors', es: 'Proximidad a clientes/proveedores', en: 'Proximity to customers/suppliers' },
    costTerreny: { val: 'Cost del terreny', es: 'Coste del terreno', en: 'Land cost' },
    fiscalitat: { val: 'Fiscalitat', es: 'Fiscalidad', en: 'Taxation' },
    mediAmbient: { val: 'Medi Ambient', es: 'Medio Ambiente', en: 'Environment' }
  }
};

// ============================================================================
// DADES COMPLETES
// ============================================================================

const glosarioData = {
  val: [
    { term: 'Punt mort', def: 'Nivell de vendes on IT = CT. Benefici = 0. Q* = CF / (PV - CVu)', cat: 'costos' },
    { term: 'Costos fixos (CF)', def: 'Costos independents de la producci√≥: lloguer, assegurances, amortitzaci√≥', cat: 'costos' },
    { term: 'Costos variables (CV)', def: 'Costos que varien amb la producci√≥: mat√®ries primes, energia', cat: 'costos' },
    { term: 'Cost total (CT)', def: 'CT = CF + CV. Suma de tots els costos de producci√≥', cat: 'costos' },
    { term: 'Cost mitj√† (CMe)', def: 'Cost per unitat: CMe = CT/Q', cat: 'costos' },
    { term: 'Cost marginal (CMg)', def: 'Cost d\'una unitat addicional: CMg = ŒîCT/ŒîQ', cat: 'costos' },
    { term: 'Marge de contribuci√≥', def: 'PV - CVu. El que cada unitat aporta per cobrir CF', cat: 'costos' },
    { term: 'Economies d\'escala', def: 'Reducci√≥ del CMe quan augmenta la producci√≥', cat: 'costos' },
    { term: 'Productivitat', def: 'Producci√≥ / Factors utilitzats. Mesura l\'efici√®ncia', cat: 'produccio' },
    { term: 'Efici√®ncia', def: 'Aconseguir objectius amb el m√≠nim de recursos', cat: 'produccio' },
    { term: 'Efic√†cia', def: 'Aconseguir els objectius proposats', cat: 'produccio' },
    { term: 'VAN', def: 'Valor Actual Net. Suma dels fluxos actualitzats - inversi√≥ inicial', cat: 'inversions' },
    { term: 'TIR', def: 'Taxa Interna de Rendibilitat. Taxa que fa VAN = 0', cat: 'inversions' },
    { term: 'Payback', def: 'Termini de recuperaci√≥ de la inversi√≥', cat: 'inversions' },
    { term: 'ROI', def: 'Return on Investment: (Benefici / Inversi√≥) √ó 100', cat: 'ratios' },
    { term: 'ROE', def: 'Return on Equity: Benefici Net / Patrimoni Net', cat: 'ratios' },
    { term: 'ROA', def: 'Return on Assets: BAII / Actiu Total', cat: 'ratios' },
    { term: 'Fons de maniobra', def: 'AC - PC. Ha de ser positiu per garantir liquiditat', cat: 'ratios' },
    { term: 'R√†tio de liquiditat', def: 'AC / PC. Ideal: 1,5-2', cat: 'ratios' },
    { term: 'Acid test', def: '(AC - Exist√®ncies) / PC. Ideal: 0,8-1', cat: 'ratios' },
    { term: 'Aut√≤nom', def: 'Empresari individual amb responsabilitat il¬∑limitada. Tributa IRPF', cat: 'formes' },
    { term: 'SL', def: 'Societat Limitada. Capital m√≠nim 1‚Ç¨, responsabilitat limitada. IS 25%', cat: 'formes' },
    { term: 'SA', def: 'Societat An√≤nima. Capital m√≠nim 60.000‚Ç¨, accions negociables', cat: 'formes' },
    { term: 'Cooperativa', def: 'Societat democr√†tica. 1 persona = 1 vot. Avantatges fiscals', cat: 'formes' },
    { term: 'DAFO/SWOT', def: 'An√†lisi: Debilitats, Amenaces, Fortaleses, Oportunitats', cat: 'estrategia' },
    { term: 'Canvas', def: 'Business Model Canvas: 9 blocs del model de negoci', cat: 'estrategia' },
    { term: 'Proposta de valor', def: 'El motiu pel qual els clients et trien a tu', cat: 'estrategia' },
    { term: 'Buyer persona', def: 'Representaci√≥ semifict√≠cia del client ideal', cat: 'marketing' },
    { term: 'Marketing mix', def: 'Les 4P: Producte, Preu, Promoci√≥, Place (distribuci√≥)', cat: 'marketing' },
    { term: 'Segmentaci√≥', def: 'Dividir el mercat en grups homogenis', cat: 'marketing' },
    { term: 'Posicionament', def: 'Lloc que ocupa la marca a la ment del consumidor', cat: 'marketing' },
    { term: 'Lean Startup', def: 'Metodologia: Construir-Mesurar-Aprendre', cat: 'innovacio' },
    { term: 'MVP', def: 'M√≠nim Producte Viable. Versi√≥ b√†sica per validar hip√≤tesis', cat: 'innovacio' },
    { term: 'Pivotar', def: 'Canviar d\'estrat√®gia basant-se en l\'aprenentatge', cat: 'innovacio' },
    { term: 'Leasing', def: 'Arrendament financer amb opci√≥ de compra', cat: 'financament' },
    { term: 'Renting', def: 'Arrendament operatiu sense opci√≥ de compra', cat: 'financament' },
    { term: 'Factoring', def: 'Vendre els drets de cobrament de factures', cat: 'financament' },
    { term: 'Crowdfunding', def: 'Finan√ßament col¬∑lectiu a trav√©s de plataformes', cat: 'financament' },
    { term: 'Business Angels', def: 'Inversors privats en startups en fases inicials', cat: 'financament' },
    { term: 'Capital risc', def: 'Fons d\'inversi√≥ en empreses amb alt potencial', cat: 'financament' },
    { term: 'EOQ', def: 'Lot Econ√≤mic de Comanda. Quantitat √≤ptima a demanar', cat: 'produccio' },
    { term: 'Just in Time', def: 'Producci√≥ sense estocs, just quan es necessita', cat: 'produccio' },
    { term: 'Cadena de valor', def: 'Activitats que afegeixen valor al producte (Porter)', cat: 'produccio' },
    { term: 'Integraci√≥ vertical', def: 'Controlar fases anteriors o posteriors de la producci√≥', cat: 'creixement' },
    { term: 'Integraci√≥ horitzontal', def: 'Fusi√≥ o adquisici√≥ de competidors', cat: 'creixement' },
    { term: 'Franqu√≠cia', def: 'Model on el franquiciador cedeix marca i know-how', cat: 'creixement' },
    { term: 'Joint venture', def: 'Associaci√≥ temporal entre empreses per un projecte', cat: 'creixement' },
    { term: 'Matriu d\'Ansoff', def: 'Estrat√®gies de creixement: producte/mercat actual/nou', cat: 'estrategia' },
    { term: '5 forces de Porter', def: 'An√†lisi competitiu del sector', cat: 'estrategia' },
    { term: 'PESTEL', def: 'An√†lisi macroentorn: Pol√≠tic, Econ√≤mic, Social, Tecnol√≤gic, Ecol√≤gic, Legal', cat: 'estrategia' }
  ],
  es: [
    { term: 'Punto muerto', def: 'Nivel de ventas donde IT = CT. Beneficio = 0. Q* = CF / (PV - CVu)', cat: 'costos' },
    { term: 'Costes fijos (CF)', def: 'Costes independientes de la producci√≥n: alquiler, seguros, amortizaci√≥n', cat: 'costos' },
    { term: 'Costes variables (CV)', def: 'Costes que var√≠an con la producci√≥n: materias primas, energ√≠a', cat: 'costos' },
    { term: 'Coste total (CT)', def: 'CT = CF + CV. Suma de todos los costes de producci√≥n', cat: 'costos' },
    { term: 'Coste medio (CMe)', def: 'Coste por unidad: CMe = CT/Q', cat: 'costos' },
    { term: 'Coste marginal (CMg)', def: 'Coste de una unidad adicional: CMg = ŒîCT/ŒîQ', cat: 'costos' },
    { term: 'Margen de contribuci√≥n', def: 'PV - CVu. Lo que cada unidad aporta para cubrir CF', cat: 'costos' },
    { term: 'Econom√≠as de escala', def: 'Reducci√≥n del CMe cuando aumenta la producci√≥n', cat: 'costos' },
    { term: 'Productividad', def: 'Producci√≥n / Factores utilizados. Mide la eficiencia', cat: 'produccio' },
    { term: 'Eficiencia', def: 'Conseguir objetivos con el m√≠nimo de recursos', cat: 'produccio' },
    { term: 'Eficacia', def: 'Conseguir los objetivos propuestos', cat: 'produccio' },
    { term: 'VAN', def: 'Valor Actual Neto. Suma de flujos actualizados - inversi√≥n inicial', cat: 'inversions' },
    { term: 'TIR', def: 'Tasa Interna de Rendibilidad. Tasa que hace VAN = 0', cat: 'inversions' },
    { term: 'Payback', def: 'Plazo de recuperaci√≥n de la inversi√≥n', cat: 'inversions' },
    { term: 'ROI', def: 'Return on Investment: (Beneficio / Inversi√≥n) √ó 100', cat: 'ratios' },
    { term: 'ROE', def: 'Return on Equity: Beneficio Neto / Patrimonio Neto', cat: 'ratios' },
    { term: 'ROA', def: 'Return on Assets: BAII / Activo Total', cat: 'ratios' },
    { term: 'Fondo de maniobra', def: 'AC - PC. Debe ser positivo para garantizar liquidez', cat: 'ratios' },
    { term: 'Ratio de liquidez', def: 'AC / PC. Ideal: 1,5-2', cat: 'ratios' },
    { term: 'Acid test', def: '(AC - Existencias) / PC. Ideal: 0,8-1', cat: 'ratios' },
    { term: 'Aut√≥nomo', def: 'Empresario individual con responsabilidad ilimitada. Tributa IRPF', cat: 'formes' },
    { term: 'SL', def: 'Sociedad Limitada. Capital m√≠nimo 1‚Ç¨, responsabilidad limitada. IS 25%', cat: 'formes' },
    { term: 'SA', def: 'Sociedad An√≥nima. Capital m√≠nimo 60.000‚Ç¨, acciones negociables', cat: 'formes' },
    { term: 'Cooperativa', def: 'Sociedad democr√°tica. 1 persona = 1 voto. Ventajas fiscales', cat: 'formes' },
    { term: 'DAFO/SWOT', def: 'An√°lisis: Debilidades, Amenazas, Fortalezas, Oportunidades', cat: 'estrategia' },
    { term: 'Canvas', def: 'Business Model Canvas: 9 bloques del modelo de negocio', cat: 'estrategia' },
    { term: 'Propuesta de valor', def: 'El motivo por el cual los clientes te eligen a ti', cat: 'estrategia' },
    { term: 'Buyer persona', def: 'Representaci√≥n semificticia del cliente ideal', cat: 'marketing' },
    { term: 'Marketing mix', def: 'Las 4P: Producto, Precio, Promoci√≥n, Place (distribuci√≥n)', cat: 'marketing' },
    { term: 'Segmentaci√≥n', def: 'Dividir el mercado en grupos homog√©neos', cat: 'marketing' },
    { term: 'Posicionamiento', def: 'Lugar que ocupa la marca en la mente del consumidor', cat: 'marketing' },
    { term: 'Lean Startup', def: 'Metodolog√≠a: Construir-Medir-Aprender', cat: 'innovacio' },
    { term: 'MVP', def: 'M√≠nimo Producto Viable. Versi√≥n b√°sica para validar hip√≥tesis', cat: 'innovacio' },
    { term: 'Pivotar', def: 'Cambiar de estrategia bas√°ndose en el aprendizaje', cat: 'innovacio' },
    { term: 'Leasing', def: 'Arrendamiento financiero con opci√≥n de compra', cat: 'financament' },
    { term: 'Renting', def: 'Arrendamiento operativo sin opci√≥n de compra', cat: 'financament' },
    { term: 'Factoring', def: 'Vender los derechos de cobro de facturas', cat: 'financament' },
    { term: 'Crowdfunding', def: 'Financiaci√≥n colectiva a trav√©s de plataformas', cat: 'financament' },
    { term: 'Business Angels', def: 'Inversores privados en startups en fases iniciales', cat: 'financament' },
    { term: 'Capital riesgo', def: 'Fondos de inversi√≥n en empresas con alto potencial', cat: 'financament' },
    { term: 'EOQ', def: 'Lote Econ√≥mico de Pedido. Cantidad √≥ptima a pedir', cat: 'produccio' },
    { term: 'Just in Time', def: 'Producci√≥n sin stocks, justo cuando se necesita', cat: 'produccio' },
    { term: 'Cadena de valor', def: 'Actividades que a√±aden valor al producto (Porter)', cat: 'produccio' },
    { term: 'Integraci√≥n vertical', def: 'Controlar fases anteriores o posteriores de la producci√≥n', cat: 'creixement' },
    { term: 'Integraci√≥n horizontal', def: 'Fusi√≥n o adquisici√≥n de competidores', cat: 'creixement' },
    { term: 'Franquicia', def: 'Modelo donde el franquiciador cede marca y know-how', cat: 'creixement' },
    { term: 'Joint venture', def: 'Asociaci√≥n temporal entre empresas para un proyecto', cat: 'creixement' },
    { term: 'Matriz de Ansoff', def: 'Estrategias de crecimiento: producto/mercado actual/nuevo', cat: 'estrategia' },
    { term: '5 fuerzas de Porter', def: 'An√°lisis competitivo del sector', cat: 'estrategia' },
    { term: 'PESTEL', def: 'An√°lisis macroentorno: Pol√≠tico, Econ√≥mico, Social, Tecnol√≥gico, Ecol√≥gico, Legal', cat: 'estrategia' }
  ],
  en: [
    { term: 'Break-even point', def: 'Sales level where TR = TC. Profit = 0. Q* = FC / (SP - VCu)', cat: 'costos' },
    { term: 'Fixed costs (FC)', def: 'Costs independent of production: rent, insurance, depreciation', cat: 'costos' },
    { term: 'Variable costs (VC)', def: 'Costs that vary with production: raw materials, energy', cat: 'costos' },
    { term: 'Total cost (TC)', def: 'TC = FC + VC. Sum of all production costs', cat: 'costos' },
    { term: 'Average cost (AC)', def: 'Cost per unit: AC = TC/Q', cat: 'costos' },
    { term: 'Marginal cost (MC)', def: 'Cost of one additional unit: MC = ŒîTC/ŒîQ', cat: 'costos' },
    { term: 'Contribution margin', def: 'SP - VCu. What each unit contributes to cover FC', cat: 'costos' },
    { term: 'Economies of scale', def: 'Reduction of AC when production increases', cat: 'costos' },
    { term: 'Productivity', def: 'Output / Inputs used. Measures efficiency', cat: 'produccio' },
    { term: 'Efficiency', def: 'Achieving objectives with minimum resources', cat: 'produccio' },
    { term: 'Effectiveness', def: 'Achieving the proposed objectives', cat: 'produccio' },
    { term: 'NPV', def: 'Net Present Value. Sum of discounted cash flows - initial investment', cat: 'inversions' },
    { term: 'IRR', def: 'Internal Rate of Return. Rate that makes NPV = 0', cat: 'inversions' },
    { term: 'Payback', def: 'Investment recovery period', cat: 'inversions' },
    { term: 'ROI', def: 'Return on Investment: (Profit / Investment) √ó 100', cat: 'ratios' },
    { term: 'ROE', def: 'Return on Equity: Net Income / Shareholders Equity', cat: 'ratios' },
    { term: 'ROA', def: 'Return on Assets: EBIT / Total Assets', cat: 'ratios' },
    { term: 'Working capital', def: 'CA - CL. Must be positive to ensure liquidity', cat: 'ratios' },
    { term: 'Current ratio', def: 'CA / CL. Ideal: 1.5-2', cat: 'ratios' },
    { term: 'Acid test', def: '(CA - Inventory) / CL. Ideal: 0.8-1', cat: 'ratios' },
    { term: 'Sole proprietor', def: 'Individual entrepreneur with unlimited liability', cat: 'formes' },
    { term: 'LLC', def: 'Limited Liability Company. Limited liability, flexible structure', cat: 'formes' },
    { term: 'Corporation', def: 'Company with shareholders, tradable shares', cat: 'formes' },
    { term: 'Cooperative', def: 'Democratic society. 1 person = 1 vote. Tax benefits', cat: 'formes' },
    { term: 'SWOT', def: 'Analysis: Strengths, Weaknesses, Opportunities, Threats', cat: 'estrategia' },
    { term: 'Canvas', def: 'Business Model Canvas: 9 blocks of the business model', cat: 'estrategia' },
    { term: 'Value proposition', def: 'The reason why customers choose you', cat: 'estrategia' },
    { term: 'Buyer persona', def: 'Semi-fictional representation of the ideal customer', cat: 'marketing' },
    { term: 'Marketing mix', def: 'The 4Ps: Product, Price, Promotion, Place', cat: 'marketing' },
    { term: 'Segmentation', def: 'Dividing the market into homogeneous groups', cat: 'marketing' },
    { term: 'Positioning', def: 'Place the brand occupies in the consumer\'s mind', cat: 'marketing' },
    { term: 'Lean Startup', def: 'Methodology: Build-Measure-Learn', cat: 'innovacio' },
    { term: 'MVP', def: 'Minimum Viable Product. Basic version to validate hypotheses', cat: 'innovacio' },
    { term: 'Pivot', def: 'Change strategy based on learning', cat: 'innovacio' },
    { term: 'Leasing', def: 'Financial lease with purchase option', cat: 'financament' },
    { term: 'Renting', def: 'Operating lease without purchase option', cat: 'financament' },
    { term: 'Factoring', def: 'Selling invoice collection rights', cat: 'financament' },
    { term: 'Crowdfunding', def: 'Collective financing through platforms', cat: 'financament' },
    { term: 'Business Angels', def: 'Private investors in early-stage startups', cat: 'financament' },
    { term: 'Venture Capital', def: 'Investment funds in high-potential companies', cat: 'financament' },
    { term: 'EOQ', def: 'Economic Order Quantity. Optimal quantity to order', cat: 'produccio' },
    { term: 'Just in Time', def: 'Production without inventory, just when needed', cat: 'produccio' },
    { term: 'Value chain', def: 'Activities that add value to the product (Porter)', cat: 'produccio' },
    { term: 'Vertical integration', def: 'Controlling upstream or downstream production phases', cat: 'creixement' },
    { term: 'Horizontal integration', def: 'Merger or acquisition of competitors', cat: 'creixement' },
    { term: 'Franchise', def: 'Model where franchisor grants brand and know-how', cat: 'creixement' },
    { term: 'Joint venture', def: 'Temporary association between companies for a project', cat: 'creixement' },
    { term: 'Ansoff Matrix', def: 'Growth strategies: product/market current/new', cat: 'estrategia' },
    { term: 'Porter\'s 5 forces', def: 'Competitive analysis of the industry', cat: 'estrategia' },
    { term: 'PESTEL', def: 'Macro-environment analysis: Political, Economic, Social, Technological, Environmental, Legal', cat: 'estrategia' }
  ]
};

// Formes jur√≠diques per idioma
const formesJuridiquesData = {
  val: [
    {
      id: 'autonomo', nom: 'Empresari Individual (Aut√≤nom)', capitalMinim: '0‚Ç¨', socis: '1',
      responsabilitat: 'Il¬∑limitada (patrimoni personal)', tributacio: 'IRPF (19-47%)',
      seguretatSocial: 'RETA (r√®gim d\'aut√≤noms)',
      avantatges: ['Constituci√≥ senzilla i r√†pida', 'Control total de la gesti√≥', 'Menys obligacions comptables', 'Quota redu√Øda nous aut√≤noms (80‚Ç¨/mes)', 'Pot deduir despeses'],
      desavantatges: ['Responsabilitat il¬∑limitada', 'IRPF progressiu pot ser alt', 'Dificultat per obtenir finan√ßament', 'Menys credibilitat empresarial'],
      ideal: 'Freelancers, professionals liberals, petits comer√ßos',
      tramits: ['Alta censal (model 036/037)', 'Alta RETA', 'Llic√®ncia d\'activitat si cal']
    },
    {
      id: 'sl', nom: 'Societat Limitada (SL)', capitalMinim: '1‚Ç¨ (nova llei 2022)', socis: '1 o m√©s',
      responsabilitat: 'Limitada al capital aportat', tributacio: 'IS (25%, 15% primers anys)',
      seguretatSocial: 'R√®gim General o RETA',
      avantatges: ['Responsabilitat limitada', 'IS fix (pot ser menor que IRPF)', 'Major credibilitat', 'Facilitat per incorporar socis', 'Pot cr√©ixer i captar inversi√≥'],
      desavantatges: ['Tr√†mits m√©s complexos', 'Obligacions comptables (comptes anuals)', 'Participacions no lliurement transmissibles', 'Costos de gestoria i notaria'],
      ideal: 'PIMES, negocis amb risc, diversos socis',
      tramits: ['Certificaci√≥ nom al Registre Mercantil', 'Estatuts socials', 'Escriptura notarial', 'NIF', 'Inscripci√≥ RM']
    },
    {
      id: 'sa', nom: 'Societat An√≤nima (SA)', capitalMinim: '60.000‚Ç¨ (25% desemborsat)', socis: '1 o m√©s',
      responsabilitat: 'Limitada al capital aportat', tributacio: 'IS (25%)',
      seguretatSocial: 'R√®gim General o RETA',
      avantatges: ['Pot cotitzar en borsa', 'Accions lliurement transmissibles', 'Gran capacitat de finan√ßament', 'M√†xima credibilitat'],
      desavantatges: ['Capital m√≠nim molt elevat', 'Tr√†mits complexos', 'Obligacions d\'auditoria', 'Normativa molt exigent'],
      ideal: 'Grans empreses, empreses que volen cotitzar',
      tramits: ['Certificaci√≥ nom', 'Escriptura p√∫blica', 'Inscripci√≥ RM', 'Dip√≤sit accions']
    },
    {
      id: 'coop', nom: 'Cooperativa', capitalMinim: 'Segons estatuts', socis: 'M√≠nim 3',
      responsabilitat: 'Limitada', tributacio: 'R√®gim especial (bonificacions)',
      seguretatSocial: 'R√®gim General o RETA',
      avantatges: ['Importants avantatges fiscals', 'Democr√†tica: 1 persona = 1 vot', 'Subvencions i ajudes', 'Valors socials'],
      desavantatges: ['M√≠nim 3 socis', 'Decisions m√©s lentes', 'Dificultat per atraure inversors', 'Normativa auton√≤mica variable'],
      ideal: 'Grups amb valors cooperatius, economia social',
      tramits: ['Assemblea constituent', 'Estatuts', 'Inscripci√≥ Registre Cooperatives']
    },
    {
      id: 'slaboral', nom: 'Societat Laboral (SLL/SAL)', capitalMinim: '1‚Ç¨ (SLL) / 60.000‚Ç¨ (SAL)', socis: 'M√≠nim 2 (majoria treballadors)',
      responsabilitat: 'Limitada', tributacio: 'IS amb bonificacions',
      seguretatSocial: 'R√®gim General',
      avantatges: ['Bonificacions fiscals', 'Subvencions espec√≠fiques', 'Treballadors s√≥n propietaris', 'Major implicaci√≥'],
      desavantatges: ['Majoria socis han de ser treballadors', 'Cap soci pot tenir >33%', 'Tr√†mits complexos'],
      ideal: 'Grups de treballadors que creen empresa',
      tramits: ['Certificaci√≥ nom', 'Escriptura', 'Qualificaci√≥ com a laboral', 'Inscripci√≥ RM']
    }
  ],
  es: [
    {
      id: 'autonomo', nom: 'Empresario Individual (Aut√≥nomo)', capitalMinim: '0‚Ç¨', socis: '1',
      responsabilitat: 'Ilimitada (patrimonio personal)', tributacio: 'IRPF (19-47%)',
      seguretatSocial: 'RETA (r√©gimen de aut√≥nomos)',
      avantatges: ['Constituci√≥n sencilla y r√°pida', 'Control total de la gesti√≥n', 'Menos obligaciones contables', 'Cuota reducida nuevos aut√≥nomos (80‚Ç¨/mes)', 'Puede deducir gastos'],
      desavantatges: ['Responsabilidad ilimitada', 'IRPF progresivo puede ser alto', 'Dificultad para obtener financiaci√≥n', 'Menos credibilidad empresarial'],
      ideal: 'Freelancers, profesionales liberales, peque√±os comercios',
      tramits: ['Alta censal (modelo 036/037)', 'Alta RETA', 'Licencia de actividad si procede']
    },
    {
      id: 'sl', nom: 'Sociedad Limitada (SL)', capitalMinim: '1‚Ç¨ (nueva ley 2022)', socis: '1 o m√°s',
      responsabilitat: 'Limitada al capital aportado', tributacio: 'IS (25%, 15% primeros a√±os)',
      seguretatSocial: 'R√©gimen General o RETA',
      avantatges: ['Responsabilidad limitada', 'IS fijo (puede ser menor que IRPF)', 'Mayor credibilidad', 'Facilidad para incorporar socios', 'Puede crecer y captar inversi√≥n'],
      desavantatges: ['Tr√°mites m√°s complejos', 'Obligaciones contables (cuentas anuales)', 'Participaciones no libremente transmisibles', 'Costes de gestor√≠a y notar√≠a'],
      ideal: 'PYMES, negocios con riesgo, varios socios',
      tramits: ['Certificaci√≥n nombre en Registro Mercantil', 'Estatutos sociales', 'Escritura notarial', 'NIF', 'Inscripci√≥n RM']
    },
    {
      id: 'sa', nom: 'Sociedad An√≥nima (SA)', capitalMinim: '60.000‚Ç¨ (25% desembolsado)', socis: '1 o m√°s',
      responsabilitat: 'Limitada al capital aportado', tributacio: 'IS (25%)',
      seguretatSocial: 'R√©gimen General o RETA',
      avantatges: ['Puede cotizar en bolsa', 'Acciones libremente transmisibles', 'Gran capacidad de financiaci√≥n', 'M√°xima credibilidad'],
      desavantatges: ['Capital m√≠nimo muy elevado', 'Tr√°mites complejos', 'Obligaciones de auditor√≠a', 'Normativa muy exigente'],
      ideal: 'Grandes empresas, empresas que quieren cotizar',
      tramits: ['Certificaci√≥n nombre', 'Escritura p√∫blica', 'Inscripci√≥n RM', 'Dep√≥sito acciones']
    },
    {
      id: 'coop', nom: 'Cooperativa', capitalMinim: 'Seg√∫n estatutos', socis: 'M√≠nimo 3',
      responsabilitat: 'Limitada', tributacio: 'R√©gimen especial (bonificaciones)',
      seguretatSocial: 'R√©gimen General o RETA',
      avantatges: ['Importantes ventajas fiscales', 'Democr√°tica: 1 persona = 1 voto', 'Subvenciones y ayudas', 'Valores sociales'],
      desavantatges: ['M√≠nimo 3 socios', 'Decisiones m√°s lentas', 'Dificultad para atraer inversores', 'Normativa auton√≥mica variable'],
      ideal: 'Grupos con valores cooperativos, econom√≠a social',
      tramits: ['Asamblea constituyente', 'Estatutos', 'Inscripci√≥n Registro Cooperativas']
    },
    {
      id: 'slaboral', nom: 'Sociedad Laboral (SLL/SAL)', capitalMinim: '1‚Ç¨ (SLL) / 60.000‚Ç¨ (SAL)', socis: 'M√≠nimo 2 (mayor√≠a trabajadores)',
      responsabilitat: 'Limitada', tributacio: 'IS con bonificaciones',
      seguretatSocial: 'R√©gimen General',
      avantatges: ['Bonificaciones fiscales', 'Subvenciones espec√≠ficas', 'Trabajadores son propietarios', 'Mayor implicaci√≥n'],
      desavantatges: ['Mayor√≠a socios deben ser trabajadores', 'Ning√∫n socio puede tener >33%', 'Tr√°mites complejos'],
      ideal: 'Grupos de trabajadores que crean empresa',
      tramits: ['Certificaci√≥n nombre', 'Escritura', 'Calificaci√≥n como laboral', 'Inscripci√≥n RM']
    }
  ],
  en: [
    {
      id: 'autonomo', nom: 'Sole Proprietor (Self-employed)', capitalMinim: '‚Ç¨0', socis: '1',
      responsabilitat: 'Unlimited (personal assets)', tributacio: 'Income Tax (19-47%)',
      seguretatSocial: 'Self-employed regime',
      avantatges: ['Simple and quick setup', 'Full control of management', 'Fewer accounting obligations', 'Reduced fee for new self-employed', 'Can deduct expenses'],
      desavantatges: ['Unlimited liability', 'Progressive tax can be high', 'Difficulty obtaining financing', 'Less business credibility'],
      ideal: 'Freelancers, liberal professionals, small shops',
      tramits: ['Tax registration', 'Social Security registration', 'Activity license if needed']
    },
    {
      id: 'sl', nom: 'Limited Liability Company (LLC)', capitalMinim: '‚Ç¨1 (new law 2022)', socis: '1 or more',
      responsabilitat: 'Limited to contributed capital', tributacio: 'Corporate Tax (25%, 15% first years)',
      seguretatSocial: 'General Regime or Self-employed',
      avantatges: ['Limited liability', 'Fixed corporate tax', 'Greater credibility', 'Easy to add partners', 'Can grow and attract investment'],
      desavantatges: ['More complex procedures', 'Accounting obligations', 'Shares not freely transferable', 'Agency and notary costs'],
      ideal: 'SMEs, risky businesses, multiple partners',
      tramits: ['Name certification', 'Bylaws', 'Notarial deed', 'Tax ID', 'Commercial Registry']
    },
    {
      id: 'sa', nom: 'Corporation (Inc.)', capitalMinim: '‚Ç¨60,000 (25% paid up)', socis: '1 or more',
      responsabilitat: 'Limited to contributed capital', tributacio: 'Corporate Tax (25%)',
      seguretatSocial: 'General Regime or Self-employed',
      avantatges: ['Can be publicly traded', 'Freely transferable shares', 'Great financing capacity', 'Maximum credibility'],
      desavantatges: ['Very high minimum capital', 'Complex procedures', 'Audit obligations', 'Very demanding regulations'],
      ideal: 'Large companies, companies seeking to go public',
      tramits: ['Name certification', 'Public deed', 'Commercial Registry', 'Share deposit']
    },
    {
      id: 'coop', nom: 'Cooperative', capitalMinim: 'According to bylaws', socis: 'Minimum 3',
      responsabilitat: 'Limited', tributacio: 'Special regime (tax benefits)',
      seguretatSocial: 'General Regime or Self-employed',
      avantatges: ['Important tax benefits', 'Democratic: 1 person = 1 vote', 'Subsidies and grants', 'Social values'],
      desavantatges: ['Minimum 3 members', 'Slower decisions', 'Difficulty attracting investors', 'Variable regional regulations'],
      ideal: 'Groups with cooperative values, social economy',
      tramits: ['Constituent assembly', 'Bylaws', 'Cooperative Registry']
    },
    {
      id: 'slaboral', nom: 'Worker-owned Company', capitalMinim: '‚Ç¨1 (SLL) / ‚Ç¨60,000 (SAL)', socis: 'Minimum 2 (majority workers)',
      responsabilitat: 'Limited', tributacio: 'Corporate Tax with bonuses',
      seguretatSocial: 'General Regime',
      avantatges: ['Tax bonuses', 'Specific subsidies', 'Workers are owners', 'Greater involvement'],
      desavantatges: ['Majority must be workers', 'No partner can have >33%', 'Complex procedures'],
      ideal: 'Groups of workers creating a company',
      tramits: ['Name certification', 'Deed', 'Labor qualification', 'Commercial Registry']
    }
  ]
};

function EmpresaApp() {
  // ============================================================================
  // ESTAT
  // ============================================================================
  const [idioma, setIdioma] = useState('val');
  const [section, setSection] = useState('inicio');
  const [menuOpen, setMenuOpen] = useState(false);
  const [showGlosario, setShowGlosario] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  
  // Funci√≥ de traducci√≥
  const t = useCallback((category, key) => {
    try {
      return translations[category][key][idioma] || translations[category][key]['val'];
    } catch {
      return key;
    }
  }, [idioma]);

  // Obtenir glosari per idioma
  const glosario = glosarioData[idioma] || glosarioData.val;
  const formesJuridiques = formesJuridiquesData[idioma] || formesJuridiquesData.val;

  // ============================================================================
  // ESTATS SIMULADORS
  // ============================================================================
  
  // Punt mort
  const [costosFixos, setCostosFixos] = useState(50000);
  const [preuVenda, setPreuVenda] = useState(50);
  const [costVariable, setCostVariable] = useState(30);
  
  // Productivitat
  const [produccioTotal, setProduccioTotal] = useState(1000);
  const [treballadors, setTreballadors] = useState(10);
  const [horesTreballades, setHoresTreballades] = useState(1600);
  const [capitalInvertit, setCapitalInvertit] = useState(100000);
  
  // VAN/TIR
  const [inversioInicial, setInversioInicial] = useState(100000);
  const [fluxos, setFluxos] = useState([30000, 35000, 40000, 45000, 50000]);
  const [taxaDescompte, setTaxaDescompte] = useState(10);
  
  // Costos
  const [cfSimulador, setCfSimulador] = useState(10000);
  const [cvUnitari, setCvUnitari] = useState(20);
  const [produccioSimulador, setProduccioSimulador] = useState(500);
  const [preuVendaSimulador, setPreuVendaSimulador] = useState(40);
  
  // R√†tios financers
  const [actiuCorrent, setActiuCorrent] = useState(150000);
  const [passiuCorrent, setPassiuCorrent] = useState(100000);
  const [existencies, setExistencies] = useState(30000);
  const [tresoreria, setTresoreria] = useState(20000);
  const [actiuTotal, setActiuTotal] = useState(500000);
  const [passiuTotal, setPassiuTotal] = useState(300000);
  const [patrimoniNet, setPatrimoniNet] = useState(200000);
  const [beneficiNet, setBeneficiNet] = useState(40000);
  const [baii, setBaii] = useState(60000);
  const [vendes, setVendes] = useState(800000);
  
  // Pr√©stec
  const [capitalPrestec, setCapitalPrestec] = useState(50000);
  const [tipusInteres, setTipusInteres] = useState(5);
  const [anysPrestec, setAnysPrestec] = useState(5);
  
  // Estocs (EOQ)
  const [demandaAnual, setDemandaAnual] = useState(10000);
  const [costComanda, setCostComanda] = useState(100);
  const [costEmmagatzematge, setCostEmmagatzematge] = useState(2);
  const [diesLliurament, setDiesLliurament] = useState(5);
  
  // N√≤mina
  const [salariBase, setSalariBase] = useState(1500);
  const [extres, setExtres] = useState(0);
  const [irpfPercent, setIrpfPercent] = useState(15);
  
  // Formes jur√≠diques
  const [formaSeleccionada, setFormaSeleccionada] = useState('autonomo');
  
  // DAFO
  const [dafoItems, setDafoItems] = useState({
    fortaleses: [''], debilitats: [''], oportunitats: [''], amenaces: ['']
  });
  
  // Canvas
  const [canvasActiu, setCanvasActiu] = useState(null);
  const [canvasData, setCanvasData] = useState({
    segments: '', proposta: '', canals: '', relacions: '', ingressos: '',
    recursos: '', activitats: '', socis: '', costos: ''
  });
  
  // Ansoff
  const [ansoffSeleccionat, setAnsoffSeleccionat] = useState(null);
  
  // Cicle de vida
  const [faseSeleccionada, setFaseSeleccionada] = useState('introduccio');
  
  // Quiz
  const [quizIniciado, setQuizIniciado] = useState(false);
  const [quizPregunta, setQuizPregunta] = useState(0);
  const [quizRespuestas, setQuizRespuestas] = useState({});
  const [quizTerminado, setQuizTerminado] = useState(false);
  const [quizCategoria, setQuizCategoria] = useState('tots');
  
  // Expansions
  const [temaExpandit, setTemaExpandit] = useState(null);
  const [subSection, setSubSection] = useState(null);

  // ============================================================================
  // C√ÄLCULS
  // ============================================================================
  
  // Punt mort
  const margeContribucio = preuVenda - costVariable;
  const puntMortUnitats = margeContribucio > 0 ? Math.ceil(costosFixos / margeContribucio) : 0;
  const puntMortEuros = puntMortUnitats * preuVenda;
  
  const dadesPuntMort = useMemo(() => {
    const dades = [];
    const maxUnitats = Math.max(puntMortUnitats * 2, 100);
    for (let q = 0; q <= maxUnitats; q += Math.ceil(maxUnitats / 20)) {
      dades.push({
        unitats: q,
        ingressos: q * preuVenda,
        costos: costosFixos + (q * costVariable),
        benefici: (q * preuVenda) - costosFixos - (q * costVariable)
      });
    }
    return dades;
  }, [costosFixos, preuVenda, costVariable, puntMortUnitats]);

  // Productivitat
  const productTreball = treballadors > 0 ? (produccioTotal / treballadors).toFixed(2) : 0;
  const productHora = horesTreballades > 0 ? (produccioTotal / horesTreballades).toFixed(2) : 0;
  const productCapital = capitalInvertit > 0 ? (produccioTotal / capitalInvertit * 1000).toFixed(2) : 0;

  // Costos
  const ctSimulador = cfSimulador + (cvUnitari * produccioSimulador);
  const cmeSimulador = produccioSimulador > 0 ? (ctSimulador / produccioSimulador).toFixed(2) : 0;
  const cmgSimulador = cvUnitari; // Simplificat
  const itSimulador = preuVendaSimulador * produccioSimulador;
  const beneficiSimulador = itSimulador - ctSimulador;

  const dadesCostos = useMemo(() => {
    const d = [];
    for (let q = 1; q <= 100; q += 5) {
      const cf = cfSimulador;
      const cv = cvUnitari * q;
      const ct = cf + cv;
      const cme = ct / q;
      const cmg = cvUnitari + (0.1 * q); // Rendiments decreixents
      d.push({ q, CF: cf, CV: cv, CT: ct, CMe: cme.toFixed(1), CMg: cmg.toFixed(1) });
    }
    return d;
  }, [cfSimulador, cvUnitari]);

  // VAN i TIR
  const van = useMemo(() => {
    let suma = 0;
    fluxos.forEach((flux, i) => {
      suma += flux / Math.pow(1 + taxaDescompte / 100, i + 1);
    });
    return (suma - inversioInicial).toFixed(2);
  }, [fluxos, taxaDescompte, inversioInicial]);

  // C√†lcul aproximat de TIR (m√®tode iteratiu simplificat)
  const tir = useMemo(() => {
    let low = 0, high = 100;
    for (let i = 0; i < 50; i++) {
      const mid = (low + high) / 2;
      let vanMid = -inversioInicial;
      fluxos.forEach((f, j) => { vanMid += f / Math.pow(1 + mid / 100, j + 1); });
      if (vanMid > 0) low = mid;
      else high = mid;
    }
    return ((low + high) / 2).toFixed(2);
  }, [fluxos, inversioInicial]);

  const payback = useMemo(() => {
    let acumulat = 0;
    for (let i = 0; i < fluxos.length; i++) {
      acumulat += fluxos[i];
      if (acumulat >= inversioInicial) {
        const anterior = acumulat - fluxos[i];
        const fraccio = (inversioInicial - anterior) / fluxos[i];
        return (i + fraccio).toFixed(2);
      }
    }
    return `>${fluxos.length}`;
  }, [fluxos, inversioInicial]);

  // R√†tios
  const fonsManiobra = actiuCorrent - passiuCorrent;
  const ratioLiquiditat = passiuCorrent > 0 ? (actiuCorrent / passiuCorrent).toFixed(2) : 0;
  const acidTest = passiuCorrent > 0 ? ((actiuCorrent - existencies) / passiuCorrent).toFixed(2) : 0;
  const ratioTresoreria = passiuCorrent > 0 ? (tresoreria / passiuCorrent).toFixed(2) : 0;
  const endeutament = actiuTotal > 0 ? ((passiuTotal / actiuTotal) * 100).toFixed(1) : 0;
  const autonomia = actiuTotal > 0 ? ((patrimoniNet / actiuTotal) * 100).toFixed(1) : 0;
  const roe = patrimoniNet > 0 ? ((beneficiNet / patrimoniNet) * 100).toFixed(2) : 0;
  const roa = actiuTotal > 0 ? ((baii / actiuTotal) * 100).toFixed(2) : 0;
  const ros = vendes > 0 ? ((beneficiNet / vendes) * 100).toFixed(2) : 0;

  // Pr√©stec
  const tipusMensual = tipusInteres / 100 / 12;
  const numPagaments = anysPrestec * 12;
  const quotaMensual = tipusMensual > 0 ? 
    (capitalPrestec * tipusMensual * Math.pow(1 + tipusMensual, numPagaments)) / (Math.pow(1 + tipusMensual, numPagaments) - 1) : 
    capitalPrestec / numPagaments;
  const totalPagar = quotaMensual * numPagaments;
  const interessosTotals = totalPagar - capitalPrestec;

  // EOQ (Lot Econ√≤mic)
  const eoq = Math.sqrt((2 * demandaAnual * costComanda) / costEmmagatzematge).toFixed(0);
  const numComandes = (demandaAnual / eoq).toFixed(1);
  const puntRecomanda = ((demandaAnual / 365) * diesLliurament).toFixed(0);
  const costTotalEstoc = (numComandes * costComanda + (eoq / 2) * costEmmagatzematge).toFixed(2);

  // N√≤mina simplificada
  const salariTotal = salariBase + extres;
  const seguretaSocialTreballador = salariTotal * 0.0635; // 6.35% aprox
  const baseIrpf = salariTotal - seguretaSocialTreballador;
  const retencioIrpf = baseIrpf * (irpfPercent / 100);
  const salariNet = salariTotal - seguretaSocialTreballador - retencioIrpf;
  const costEmpresa = salariTotal * 1.32; // ~32% SS empresa

  // Quiz puntuaci√≥
  const quizPuntuacion = Object.entries(quizRespuestas).filter(([i, r]) => {
    const preguntes = getQuizPreguntes();
    return preguntes[parseInt(i)]?.correcta === r;
  }).length;

  // ============================================================================
  // QUIZ DATA
  // ============================================================================
  
  function getQuizPreguntes() {
    const preguntes = {
      val: [
        { pregunta: 'Qu√® √©s el punt mort?', opcions: ['El benefici m√†xim', 'El punt on IT = CT (benefici = 0)', 'El m√≠nim de producci√≥', 'El m√†xim de vendes'], correcta: 1, cat: 'costos' },
        { pregunta: 'Quins s√≥n els costos fixos?', opcions: ['Els que varien amb la producci√≥', 'Els que NO canvien amb el nivell de producci√≥', 'Els costos de mat√®ries primes', 'Els impostos sobre vendes'], correcta: 1, cat: 'costos' },
        { pregunta: 'Quin √©s el capital m√≠nim d\'una SL actualment?', opcions: ['3.000‚Ç¨', '1‚Ç¨', '60.000‚Ç¨', '10.000‚Ç¨'], correcta: 1, cat: 'formes' },
        { pregunta: 'Com tributa un aut√≤nom?', opcions: ['Impost de Societats', 'IVA', 'IRPF', 'IAE'], correcta: 2, cat: 'formes' },
        { pregunta: 'Qu√® √©s el marge de contribuci√≥?', opcions: ['Benefici total', 'Preu - Cost Variable Unitari', 'Cost Mitj√†', 'Ingressos totals'], correcta: 1, cat: 'costos' },
        { pregunta: 'Qu√® significa DAFO?', opcions: ['Debilitats, Amenaces, Fortaleses, Oportunitats', 'Diner, Actius, Fons, Obligacions', 'Demanda, Aprovisionament, Fabricaci√≥, Oferta', 'Distribuci√≥, Associacions, Finances, Operacions'], correcta: 0, cat: 'estrategia' },
        { pregunta: 'Si el VAN √©s positiu, el projecte √©s...', opcions: ['Rebutjable', 'Rendible', 'Indiferent', 'Arriscat'], correcta: 1, cat: 'inversions' },
        { pregunta: 'Quin tipus de responsabilitat t√© un aut√≤nom?', opcions: ['Limitada', 'Il¬∑limitada', 'Compartida', 'Cap'], correcta: 1, cat: 'formes' },
        { pregunta: 'Qu√® √©s el ROE?', opcions: ['Rendibilitat sobre actius', 'Rendibilitat financera (sobre patrimoni net)', 'R√†tio d\'endeutament', 'Retorn operatiu'], correcta: 1, cat: 'ratios' },
        { pregunta: 'Per calcular el punt mort, qu√® dividim?', opcions: ['IT entre CT', 'CF entre Marge de Contribuci√≥', 'CV entre Preu', 'Benefici entre Vendes'], correcta: 1, cat: 'costos' },
        { pregunta: 'Quants blocs t√© el Business Model Canvas?', opcions: ['5', '7', '9', '12'], correcta: 2, cat: 'estrategia' },
        { pregunta: 'Qu√® √©s el fons de maniobra?', opcions: ['Actiu Total - Passiu Total', 'Actiu Corrent - Passiu Corrent', 'Patrimoni Net', 'Benefici Retingut'], correcta: 1, cat: 'ratios' },
        { pregunta: 'La TIR √©s la taxa que fa el VAN igual a...', opcions: ['1', '100', '0', 'La inversi√≥'], correcta: 2, cat: 'inversions' },
        { pregunta: 'Quantes P t√© el Marketing Mix tradicional?', opcions: ['2', '3', '4', '5'], correcta: 2, cat: 'marketing' },
        { pregunta: 'Qu√® √©s el Lean Startup?', opcions: ['Un tipus de societat', 'Una metodologia per crear empreses minimitzant risc', 'Un tipus de finan√ßament', 'Una forma de comptabilitat'], correcta: 1, cat: 'innovacio' },
        { pregunta: 'Qu√® √©s el leasing?', opcions: ['Pr√©stec bancari', 'Arrendament financer amb opci√≥ de compra', 'Finan√ßament col¬∑lectiu', 'Venda d\'accions'], correcta: 1, cat: 'financament' },
        { pregunta: 'Qu√® √©s l\'EOQ?', opcions: ['Una r√†tio financera', 'El lot econ√≤mic de comanda', 'Un tipus de societat', 'Un indicador de productivitat'], correcta: 1, cat: 'produccio' },
        { pregunta: 'Qu√® √©s el crowdfunding?', opcions: ['Finan√ßament bancari', 'Finan√ßament col¬∑lectiu per internet', 'Capital risc', 'Subvenci√≥ p√∫blica'], correcta: 1, cat: 'financament' },
        { pregunta: 'A la matriu d\'Ansoff, vendre productes nous a mercats nous √©s...', opcions: ['Penetraci√≥', 'Desenvolupament producte', 'Desenvolupament mercat', 'Diversificaci√≥'], correcta: 3, cat: 'estrategia' },
        { pregunta: 'Quantes forces t√© el model de Porter?', opcions: ['3', '4', '5', '6'], correcta: 2, cat: 'estrategia' },
      ],
      es: [
        { pregunta: '¬øQu√© es el punto muerto?', opcions: ['El beneficio m√°ximo', 'El punto donde IT = CT (beneficio = 0)', 'El m√≠nimo de producci√≥n', 'El m√°ximo de ventas'], correcta: 1, cat: 'costos' },
        { pregunta: '¬øCu√°les son los costes fijos?', opcions: ['Los que var√≠an con la producci√≥n', 'Los que NO cambian con el nivel de producci√≥n', 'Los costes de materias primas', 'Los impuestos sobre ventas'], correcta: 1, cat: 'costos' },
        { pregunta: '¬øCu√°l es el capital m√≠nimo de una SL actualmente?', opcions: ['3.000‚Ç¨', '1‚Ç¨', '60.000‚Ç¨', '10.000‚Ç¨'], correcta: 1, cat: 'formes' },
        { pregunta: '¬øC√≥mo tributa un aut√≥nomo?', opcions: ['Impuesto de Sociedades', 'IVA', 'IRPF', 'IAE'], correcta: 2, cat: 'formes' },
        { pregunta: '¬øQu√© es el margen de contribuci√≥n?', opcions: ['Beneficio total', 'Precio - Coste Variable Unitario', 'Coste Medio', 'Ingresos totales'], correcta: 1, cat: 'costos' },
        { pregunta: '¬øQu√© significa DAFO?', opcions: ['Debilidades, Amenazas, Fortalezas, Oportunidades', 'Dinero, Activos, Fondos, Obligaciones', 'Demanda, Aprovisionamiento, Fabricaci√≥n, Oferta', 'Distribuci√≥n, Asociaciones, Finanzas, Operaciones'], correcta: 0, cat: 'estrategia' },
        { pregunta: 'Si el VAN es positivo, el proyecto es...', opcions: ['Rechazable', 'Rentable', 'Indiferente', 'Arriesgado'], correcta: 1, cat: 'inversions' },
        { pregunta: '¬øQu√© tipo de responsabilidad tiene un aut√≥nomo?', opcions: ['Limitada', 'Ilimitada', 'Compartida', 'Ninguna'], correcta: 1, cat: 'formes' },
        { pregunta: '¬øQu√© es el ROE?', opcions: ['Rentabilidad sobre activos', 'Rentabilidad financiera (sobre patrimonio neto)', 'Ratio de endeudamiento', 'Retorno operativo'], correcta: 1, cat: 'ratios' },
        { pregunta: 'Para calcular el punto muerto, ¬øqu√© dividimos?', opcions: ['IT entre CT', 'CF entre Margen de Contribuci√≥n', 'CV entre Precio', 'Beneficio entre Ventas'], correcta: 1, cat: 'costos' },
        { pregunta: '¬øCu√°ntos bloques tiene el Business Model Canvas?', opcions: ['5', '7', '9', '12'], correcta: 2, cat: 'estrategia' },
        { pregunta: '¬øQu√© es el fondo de maniobra?', opcions: ['Activo Total - Pasivo Total', 'Activo Corriente - Pasivo Corriente', 'Patrimonio Neto', 'Beneficio Retenido'], correcta: 1, cat: 'ratios' },
        { pregunta: 'La TIR es la tasa que hace el VAN igual a...', opcions: ['1', '100', '0', 'La inversi√≥n'], correcta: 2, cat: 'inversions' },
        { pregunta: '¬øCu√°ntas P tiene el Marketing Mix tradicional?', opcions: ['2', '3', '4', '5'], correcta: 2, cat: 'marketing' },
        { pregunta: '¬øQu√© es el Lean Startup?', opcions: ['Un tipo de sociedad', 'Una metodolog√≠a para crear empresas minimizando riesgo', 'Un tipo de financiaci√≥n', 'Una forma de contabilidad'], correcta: 1, cat: 'innovacio' },
        { pregunta: '¬øQu√© es el leasing?', opcions: ['Pr√©stamo bancario', 'Arrendamiento financiero con opci√≥n de compra', 'Financiaci√≥n colectiva', 'Venta de acciones'], correcta: 1, cat: 'financament' },
        { pregunta: '¬øQu√© es el EOQ?', opcions: ['Un ratio financiero', 'El lote econ√≥mico de pedido', 'Un tipo de sociedad', 'Un indicador de productividad'], correcta: 1, cat: 'produccio' },
        { pregunta: '¬øQu√© es el crowdfunding?', opcions: ['Financiaci√≥n bancaria', 'Financiaci√≥n colectiva por internet', 'Capital riesgo', 'Subvenci√≥n p√∫blica'], correcta: 1, cat: 'financament' },
        { pregunta: 'En la matriz de Ansoff, vender productos nuevos a mercados nuevos es...', opcions: ['Penetraci√≥n', 'Desarrollo de producto', 'Desarrollo de mercado', 'Diversificaci√≥n'], correcta: 3, cat: 'estrategia' },
        { pregunta: '¬øCu√°ntas fuerzas tiene el modelo de Porter?', opcions: ['3', '4', '5', '6'], correcta: 2, cat: 'estrategia' },
      ],
      en: [
        { pregunta: 'What is the break-even point?', opcions: ['Maximum profit', 'Point where TR = TC (profit = 0)', 'Minimum production', 'Maximum sales'], correcta: 1, cat: 'costos' },
        { pregunta: 'What are fixed costs?', opcions: ['Those that vary with production', 'Those that do NOT change with production level', 'Raw material costs', 'Sales taxes'], correcta: 1, cat: 'costos' },
        { pregunta: 'What is the minimum capital for an LLC currently?', opcions: ['‚Ç¨3,000', '‚Ç¨1', '‚Ç¨60,000', '‚Ç¨10,000'], correcta: 1, cat: 'formes' },
        { pregunta: 'How is a sole proprietor taxed?', opcions: ['Corporate Tax', 'VAT', 'Income Tax', 'Business Tax'], correcta: 2, cat: 'formes' },
        { pregunta: 'What is the contribution margin?', opcions: ['Total profit', 'Price - Variable Cost per Unit', 'Average Cost', 'Total revenue'], correcta: 1, cat: 'costos' },
        { pregunta: 'What does SWOT stand for?', opcions: ['Strengths, Weaknesses, Opportunities, Threats', 'Sales, Workers, Operations, Technology', 'Strategy, Workflow, Organization, Trends', 'Supply, Warehouse, Orders, Transport'], correcta: 0, cat: 'estrategia' },
        { pregunta: 'If NPV is positive, the project is...', opcions: ['Rejectable', 'Profitable', 'Indifferent', 'Risky'], correcta: 1, cat: 'inversions' },
        { pregunta: 'What type of liability does a sole proprietor have?', opcions: ['Limited', 'Unlimited', 'Shared', 'None'], correcta: 1, cat: 'formes' },
        { pregunta: 'What is ROE?', opcions: ['Return on assets', 'Return on equity', 'Debt ratio', 'Operating return'], correcta: 1, cat: 'ratios' },
        { pregunta: 'To calculate break-even, what do we divide?', opcions: ['TR by TC', 'FC by Contribution Margin', 'VC by Price', 'Profit by Sales'], correcta: 1, cat: 'costos' },
        { pregunta: 'How many blocks does the Business Model Canvas have?', opcions: ['5', '7', '9', '12'], correcta: 2, cat: 'estrategia' },
        { pregunta: 'What is working capital?', opcions: ['Total Assets - Total Liabilities', 'Current Assets - Current Liabilities', 'Net Equity', 'Retained Earnings'], correcta: 1, cat: 'ratios' },
        { pregunta: 'IRR is the rate that makes NPV equal to...', opcions: ['1', '100', '0', 'The investment'], correcta: 2, cat: 'inversions' },
        { pregunta: 'How many Ps does the traditional Marketing Mix have?', opcions: ['2', '3', '4', '5'], correcta: 2, cat: 'marketing' },
        { pregunta: 'What is Lean Startup?', opcions: ['A type of company', 'A methodology to create businesses minimizing risk', 'A type of financing', 'An accounting method'], correcta: 1, cat: 'innovacio' },
        { pregunta: 'What is leasing?', opcions: ['Bank loan', 'Financial lease with purchase option', 'Collective financing', 'Share sale'], correcta: 1, cat: 'financament' },
        { pregunta: 'What is EOQ?', opcions: ['A financial ratio', 'Economic Order Quantity', 'A type of company', 'A productivity indicator'], correcta: 1, cat: 'produccio' },
        { pregunta: 'What is crowdfunding?', opcions: ['Bank financing', 'Collective financing through internet', 'Venture capital', 'Public subsidy'], correcta: 1, cat: 'financament' },
        { pregunta: 'In Ansoff matrix, selling new products to new markets is...', opcions: ['Penetration', 'Product development', 'Market development', 'Diversification'], correcta: 3, cat: 'estrategia' },
        { pregunta: 'How many forces does Porter\'s model have?', opcions: ['3', '4', '5', '6'], correcta: 2, cat: 'estrategia' },
      ]
    };
    return preguntes[idioma] || preguntes.val;
  }

  // ============================================================================
  // COMPONENTS
  // ============================================================================
  
  const NavBtn = ({ sec, icono: Icono, label }) => (
    <button
      onClick={() => { setSection(sec); setMenuOpen(false); setSubSection(null); }}
      className={`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm transition-all ${
        section === sec
          ? 'bg-pink-500 text-white shadow-md'
          : 'text-gray-600 hover:text-pink-600 hover:bg-pink-50'
      }`}
    >
      <Icono size={16} />
      <span className="font-medium">{label}</span>
    </button>
  );

  const Card = ({ children, className = '', accent = false, title = null }) => (
    <div className={`bg-white rounded-2xl border ${accent ? 'border-pink-200 bg-gradient-to-br from-white to-pink-50' : 'border-gray-100'} shadow-sm p-6 ${className}`}>
      {title && <h3 className="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">{title}</h3>}
      {children}
    </div>
  );

  const Slider = ({ label, value, setValue, min, max, step = 1, color = 'pink', sublabel = null, unit = '' }) => (
    <div className="mb-4">
      <label className="flex justify-between text-sm mb-1">
        <span className="text-gray-600">{label}</span>
        <span className={`font-bold text-${color}-600`}>{typeof value === 'number' ? value.toLocaleString() : value}{unit}</span>
      </label>
      {sublabel && <p className="text-xs text-gray-400 mb-2">{sublabel}</p>}
      <input 
        type="range" min={min} max={max} step={step} value={value} 
        onChange={(e) => setValue(Number(e.target.value))} 
        className={`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-${color}-500`} 
      />
    </div>
  );

  const InfoBox = ({ children, color = 'pink', className = '' }) => (
    <div className={`p-4 bg-${color}-50 rounded-xl border border-${color}-200 ${className}`}>
      {children}
    </div>
  );

  const StatCard = ({ label, value, unit = '', color = 'pink', icon: Icon = null }) => (
    <div className={`p-4 bg-${color}-50 rounded-xl border border-${color}-200 text-center`}>
      {Icon && <Icon className={`mx-auto mb-2 text-${color}-500`} size={24} />}
      <p className="text-xs text-gray-500">{label}</p>
      <p className={`text-2xl font-black text-${color}-600`}>{value}{unit}</p>
    </div>
  );

  // Selector d'idioma
  const LanguageSelector = () => (
    <div className="flex items-center gap-1 bg-gray-100 rounded-lg p-1">
      {[
        { code: 'val', label: 'VAL' },
        { code: 'es', label: 'ES' },
        { code: 'en', label: 'EN' }
      ].map(lang => (
        <button
          key={lang.code}
          onClick={() => setIdioma(lang.code)}
          className={`px-2 py-1 rounded text-xs font-bold transition-all ${
            idioma === lang.code 
              ? 'bg-pink-500 text-white' 
              : 'text-gray-600 hover:bg-gray-200'
          }`}
        >
          {lang.label}
        </button>
      ))}
    </div>
  );

  const filteredGlosario = glosario.filter(g =>
    g.term.toLowerCase().includes(searchTerm.toLowerCase()) ||
    g.def.toLowerCase().includes(searchTerm.toLowerCase())
  );

  // Continua a la part 2...

  // ============================================================================
  // SECCIONS
  // ============================================================================

  const Inicio = () => (
    <div className="space-y-8">
      <div className="text-center py-8">
        <div className="inline-flex items-center gap-2 px-4 py-2 bg-pink-50 rounded-full text-pink-600 text-sm font-medium mb-6 border border-pink-200">
          <Briefcase size={16} /> {t('inicio', 'subtitol')}
        </div>
        <h1 className="text-4xl md:text-5xl font-black text-gray-800 mb-4">
          {t('inicio', 'titol')}
        </h1>
        <p className="text-lg text-gray-500 max-w-xl mx-auto mb-8">
          {t('inicio', 'desc')}
        </p>
        <div className="flex flex-wrap justify-center gap-3">
          <button onClick={() => setSection('puntmort')} className="px-6 py-3 bg-pink-500 rounded-xl font-bold text-white shadow-md hover:bg-pink-600 transition-all flex items-center gap-2">
            <Target size={18} /> {t('nav', 'puntmort')}
          </button>
          <button onClick={() => setSection('canvas')} className="px-6 py-3 bg-white rounded-xl font-bold text-gray-700 border border-gray-200 hover:border-pink-300 hover:bg-pink-50 transition-all flex items-center gap-2">
            <Layers size={18} /> Canvas
          </button>
          <button onClick={() => setSection('van')} className="px-6 py-3 bg-teal-50 rounded-xl font-bold text-teal-700 border border-teal-200 hover:bg-teal-100 transition-all flex items-center gap-2">
            <TrendingUp size={18} /> VAN/TIR
          </button>
        </div>
      </div>

      <Card accent>
        <div className="flex items-center gap-4">
          <div className="p-3 bg-pink-100 rounded-xl">
            <Lightbulb className="text-pink-500" size={32} />
          </div>
          <div>
            <p className="text-xl font-bold text-gray-800">{t('inicio', 'frase')}</p>
            <p className="text-gray-600">{t('inicio', 'fraseDesc')}</p>
          </div>
        </div>
      </Card>

      <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
        {[
          { icono: Target, titulo: t('nav', 'puntmort'), sec: 'puntmort', color: 'pink' },
          { icono: Calculator, titulo: t('nav', 'costos'), sec: 'costos', color: 'purple' },
          { icono: BarChart3, titulo: t('nav', 'productivitat'), sec: 'productivitat', color: 'blue' },
          { icono: TrendingUp, titulo: t('nav', 'van'), sec: 'van', color: 'teal' },
          { icono: Building, titulo: t('nav', 'formes'), sec: 'formes', color: 'orange' },
          { icono: Wallet, titulo: t('nav', 'financament'), sec: 'financament', color: 'emerald' },
          { icono: PieChart, titulo: t('nav', 'ratios'), sec: 'ratios', color: 'indigo' },
          { icono: Users, titulo: t('nav', 'rrhh'), sec: 'rrhh', color: 'rose' },
          { icono: Factory, titulo: t('nav', 'produccio'), sec: 'produccio', color: 'amber' },
          { icono: Megaphone, titulo: t('nav', 'marketing'), sec: 'marketing', color: 'cyan' },
          { icono: Compass, titulo: t('nav', 'estrategia'), sec: 'estrategia', color: 'violet' },
          { icono: Layers, titulo: 'Canvas', sec: 'canvas', color: 'slate' },
          { icono: Search, titulo: t('nav', 'analisi'), sec: 'analisi', color: 'lime' },
          { icono: Rocket, titulo: t('nav', 'creixement'), sec: 'creixement', color: 'sky' },
          { icono: Sparkles, titulo: t('nav', 'innovacio'), sec: 'innovacio', color: 'fuchsia' },
          { icono: Brain, titulo: 'Quiz', sec: 'quiz', color: 'red' },
        ].map((item, i) => (
          <button key={i} onClick={() => setSection(item.sec)} className={`p-4 rounded-xl border bg-${item.color}-50 border-${item.color}-200 hover:shadow-md transition-all text-left group`}>
            <item.icono className={`text-${item.color}-600 mb-2 group-hover:scale-110 transition-transform`} size={24} />
            <p className="font-bold text-gray-800 text-sm">{item.titulo}</p>
          </button>
        ))}
      </div>
    </div>
  );

  const PuntMort = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Target className="text-pink-500" /> {t('puntmort', 'titol')}
        </h2>
        <p className="text-gray-500">{t('puntmort', 'desc')}</p>
      </div>

      <div className="grid lg:grid-cols-2 gap-6">
        <Card>
          <Slider label={`üíº ${t('costos', 'cf')}`} value={costosFixos} setValue={setCostosFixos} min={1000} max={200000} step={1000} color="pink" unit="‚Ç¨" sublabel={t('costos', 'cfDesc')} />
          <Slider label={`üí∞ ${t('puntmort', 'preuVenda')}`} value={preuVenda} setValue={setPreuVenda} min={1} max={500} color="teal" unit="‚Ç¨" />
          <Slider label={`üì¶ ${t('puntmort', 'costVariable')}`} value={costVariable} setValue={setCostVariable} min={0} max={400} color="amber" unit="‚Ç¨" sublabel={t('costos', 'cvDesc')} />
          
          <InfoBox color="gray" className="mt-4">
            <p className="text-xs text-gray-500 mb-2">üìê {t('ui', 'formula')}:</p>
            <p className="font-mono text-sm">Q* = CF / (PV - CVu) = {costosFixos.toLocaleString()} / ({preuVenda} - {costVariable})</p>
          </InfoBox>

          <div className="grid grid-cols-3 gap-3 mt-4">
            <StatCard label={`${t('nav', 'puntmort')} (Q)`} value={puntMortUnitats.toLocaleString()} unit=" u." color="pink" />
            <StatCard label={`${t('nav', 'puntmort')} (‚Ç¨)`} value={puntMortEuros.toLocaleString()} unit="‚Ç¨" color="teal" />
            <StatCard label={t('puntmort', 'margeContribucio')} value={margeContribucio} unit="‚Ç¨/u" color="amber" />
          </div>
        </Card>

        <Card>
          <h3 className="font-bold text-gray-800 mb-4">üìä {idioma === 'en' ? 'Chart' : 'Gr√†fic'}</h3>
          <div className="h-64 flex items-center justify-center">
            <div className="w-full">
              <div className="flex justify-between text-xs text-gray-500 mb-2">
                <span>0</span>
                <span>{(puntMortUnitats * 2).toLocaleString()} {t('ui', 'unitats')}</span>
              </div>
              <div className="relative h-40 bg-gray-50 rounded-lg overflow-hidden">
                {/* L√≠nia CT (costos) */}
                <div className="absolute bottom-0 left-0 w-full h-full">
                  <svg className="w-full h-full" preserveAspectRatio="none">
                    <line x1="0" y1="80%" x2="100%" y2="20%" stroke="#f59e0b" strokeWidth="3" />
                    <text x="90%" y="25%" fill="#f59e0b" fontSize="12">CT</text>
                  </svg>
                </div>
                {/* L√≠nia IT (ingressos) */}
                <div className="absolute bottom-0 left-0 w-full h-full">
                  <svg className="w-full h-full" preserveAspectRatio="none">
                    <line x1="0" y1="100%" x2="100%" y2="10%" stroke="#14b8a6" strokeWidth="3" />
                    <text x="90%" y="15%" fill="#14b8a6" fontSize="12">IT</text>
                  </svg>
                </div>
                {/* Punt mort */}
                <div className="absolute bottom-0 h-full border-l-2 border-dashed border-pink-500" style={{left: '50%'}}>
                  <span className="absolute -top-5 -left-3 text-xs text-pink-500 font-bold">PM</span>
                </div>
              </div>
              <div className="flex justify-center gap-6 mt-3 text-sm">
                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-teal-500"></span> IT</span>
                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-amber-500"></span> CT</span>
                <span className="flex items-center gap-1"><span className="w-3 h-1 bg-pink-500"></span> PM</span>
              </div>
            </div>
          </div>
          <InfoBox color="pink" className="mt-4">
            <p className="text-sm">
              {idioma === 'val' && `‚úì Per sota de ${puntMortUnitats} unitats: P√àRDUES. Per sobre: BENEFICIS.`}
              {idioma === 'es' && `‚úì Por debajo de ${puntMortUnitats} unidades: P√âRDIDAS. Por encima: BENEFICIOS.`}
              {idioma === 'en' && `‚úì Below ${puntMortUnitats} units: LOSSES. Above: PROFITS.`}
            </p>
          </InfoBox>
        </Card>
      </div>
    </div>
  );

  const Costos = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Calculator className="text-pink-500" /> {t('costos', 'titol')}
        </h2>
      </div>

      <div className="grid lg:grid-cols-2 gap-6">
        <Card>
          <Slider label={t('costos', 'cf')} value={cfSimulador} setValue={setCfSimulador} min={1000} max={50000} step={500} color="pink" unit="‚Ç¨" />
          <Slider label={`${t('costos', 'cv')} (per unitat)`} value={cvUnitari} setValue={setCvUnitari} min={1} max={100} color="amber" unit="‚Ç¨/u" />
          <Slider label={idioma === 'en' ? 'Production (Q)' : 'Producci√≥ (Q)'} value={produccioSimulador} setValue={setProduccioSimulador} min={10} max={1000} step={10} color="blue" unit=" u." />
          <Slider label={idioma === 'en' ? 'Selling Price' : 'Preu de Venda'} value={preuVendaSimulador} setValue={setPreuVendaSimulador} min={10} max={200} color="teal" unit="‚Ç¨/u" />

          <div className="grid grid-cols-2 gap-3 mt-4">
            <StatCard label={t('costos', 'cf')} value={cfSimulador.toLocaleString()} unit="‚Ç¨" color="pink" />
            <StatCard label={t('costos', 'cv')} value={(cvUnitari * produccioSimulador).toLocaleString()} unit="‚Ç¨" color="amber" />
            <StatCard label={t('costos', 'ct')} value={ctSimulador.toLocaleString()} unit="‚Ç¨" color="purple" />
            <StatCard label={t('costos', 'cme')} value={cmeSimulador} unit="‚Ç¨/u" color="blue" />
          </div>

          <InfoBox color={beneficiSimulador >= 0 ? 'emerald' : 'red'} className="mt-4">
            <p className="text-center">
              <span className="text-sm">{idioma === 'en' ? 'Revenue' : 'Ingressos'}: {itSimulador.toLocaleString()}‚Ç¨ | {idioma === 'en' ? 'Costs' : 'Costos'}: {ctSimulador.toLocaleString()}‚Ç¨</span><br/>
              <span className="text-2xl font-black">{beneficiSimulador >= 0 ? '‚úì' : '‚úó'} {idioma === 'en' ? 'Profit' : 'Benefici'}: {beneficiSimulador.toLocaleString()}‚Ç¨</span>
            </p>
          </InfoBox>
        </Card>

        <Card>
          <h3 className="font-bold text-gray-800 mb-4">{idioma === 'en' ? 'Cost Curves' : 'Corbes de Costos'}</h3>
          <div className="h-64 flex items-center justify-center">
            <div className="w-full">
              <div className="relative h-40 bg-gray-50 rounded-lg overflow-hidden p-4">
                {/* Corba CMe (forma de U) */}
                <svg className="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                  <path d="M 5 20 Q 30 90, 50 50 T 95 30" fill="none" stroke="#ec4899" strokeWidth="2" />
                  <text x="85" y="25" fill="#ec4899" fontSize="8">CMe</text>
                  {/* Corba CMg */}
                  <path d="M 5 80 Q 25 95, 40 50 T 95 10" fill="none" stroke="#14b8a6" strokeWidth="2" />
                  <text x="85" y="8" fill="#14b8a6" fontSize="8">CMg</text>
                  {/* Punt m√≠nim */}
                  <circle cx="50" cy="50" r="3" fill="#f59e0b" />
                </svg>
              </div>
              <div className="flex justify-center gap-6 mt-3 text-sm">
                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-pink-500"></span> CMe</span>
                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-teal-500"></span> CMg</span>
              </div>
            </div>
          </div>
          <InfoBox color="gray" className="mt-4">
            <p className="text-sm">
              {idioma === 'val' && 'üí° El CMg talla el CMe pel seu punt M√çNIM. L\'empresa maximitza benefici on P = CMg.'}
              {idioma === 'es' && 'üí° El CMg corta el CMe por su punto M√çNIMO. La empresa maximiza beneficio donde P = CMg.'}
              {idioma === 'en' && 'üí° MC crosses AC at its MINIMUM point. The firm maximizes profit where P = MC.'}
            </p>
          </InfoBox>
        </Card>
      </div>
    </div>
  );

  const Productivitat = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <BarChart3 className="text-pink-500" /> {t('nav', 'productivitat')}
        </h2>
      </div>

      <Card>
        <div className="grid md:grid-cols-2 gap-6">
          <div>
            <Slider label={idioma === 'en' ? 'Total Production' : 'Producci√≥ Total'} value={produccioTotal} setValue={setProduccioTotal} min={100} max={10000} step={100} color="pink" unit=" u." />
            <Slider label={idioma === 'en' ? 'Workers' : 'Treballadors'} value={treballadors} setValue={setTreballadors} min={1} max={100} color="blue" />
            <Slider label={idioma === 'en' ? 'Hours Worked' : 'Hores Treballades'} value={horesTreballades} setValue={setHoresTreballades} min={100} max={10000} step={100} color="amber" unit=" h" />
            <Slider label={idioma === 'en' ? 'Capital Invested' : 'Capital Invertit'} value={capitalInvertit} setValue={setCapitalInvertit} min={10000} max={500000} step={10000} color="emerald" unit="‚Ç¨" />
          </div>
          <div className="space-y-3">
            <StatCard label={idioma === 'en' ? 'Labor Productivity' : 'Productivitat Treball'} value={productTreball} unit=" u/treb." color="blue" icon={Users} />
            <StatCard label={idioma === 'en' ? 'Hourly Productivity' : 'Productivitat Hora'} value={productHora} unit=" u/h" color="amber" icon={Clock} />
            <StatCard label={idioma === 'en' ? 'Capital Productivity' : 'Productivitat Capital'} value={productCapital} unit=" u/1000‚Ç¨" color="emerald" icon={Coins} />
          </div>
        </div>
      </Card>

      <div className="grid md:grid-cols-2 gap-4">
        <InfoBox color="blue">
          <p className="font-bold text-blue-700">{t('produccio', 'eficiencia')}</p>
          <p className="text-sm text-gray-600 mt-1">
            {idioma === 'val' && 'Aconseguir els OBJECTIUS amb el M√çNIM de RECURSOS possible.'}
            {idioma === 'es' && 'Conseguir los OBJETIVOS con el M√çNIMO de RECURSOS posible.'}
            {idioma === 'en' && 'Achieving OBJECTIVES with MINIMUM RESOURCES possible.'}
          </p>
        </InfoBox>
        <InfoBox color="emerald">
          <p className="font-bold text-emerald-700">{t('produccio', 'eficacia')}</p>
          <p className="text-sm text-gray-600 mt-1">
            {idioma === 'val' && 'Aconseguir els OBJECTIUS proposats (independentment dels recursos).'}
            {idioma === 'es' && 'Conseguir los OBJETIVOS propuestos (independientemente de los recursos).'}
            {idioma === 'en' && 'Achieving the proposed OBJECTIVES (regardless of resources).'}
          </p>
        </InfoBox>
      </div>
    </div>
  );

  const VanTir = () => {
    const updateFlux = (index, value) => {
      const newFluxos = [...fluxos];
      newFluxos[index] = Number(value);
      setFluxos(newFluxos);
    };

    return (
      <div className="space-y-6">
        <div>
          <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
            <TrendingUp className="text-pink-500" /> {t('van', 'titol')}
          </h2>
        </div>

        <div className="grid lg:grid-cols-2 gap-6">
          <Card>
            <Slider label={t('van', 'inversioInicial')} value={inversioInicial} setValue={setInversioInicial} min={10000} max={500000} step={5000} color="red" unit="‚Ç¨" />
            <Slider label={t('van', 'taxaDescompte')} value={taxaDescompte} setValue={setTaxaDescompte} min={1} max={30} color="amber" unit="%" />
            
            <div className="mt-4">
              <p className="text-sm text-gray-600 mb-2">{t('van', 'fluxos')} ({t('ui', 'anys')}):</p>
              <div className="grid grid-cols-5 gap-2">
                {fluxos.map((f, i) => (
                  <div key={i}>
                    <label className="text-xs text-gray-400">{idioma === 'en' ? 'Year' : 'Any'} {i + 1}</label>
                    <input
                      type="number"
                      value={f}
                      onChange={(e) => updateFlux(i, e.target.value)}
                      className="w-full p-2 border rounded text-center text-sm"
                    />
                  </div>
                ))}
              </div>
            </div>
          </Card>

          <Card>
            <div className="space-y-4">
              <InfoBox color={parseFloat(van) >= 0 ? 'emerald' : 'red'}>
                <p className="text-sm text-gray-500">{t('van', 'vanNom')}</p>
                <p className="text-3xl font-black">{parseFloat(van).toLocaleString()}‚Ç¨</p>
                <p className="text-sm mt-1">
                  {parseFloat(van) >= 0 ? t('van', 'vanPositiu') : t('van', 'vanNegatiu')}
                </p>
              </InfoBox>

              <div className="grid grid-cols-2 gap-3">
                <InfoBox color="amber">
                  <p className="text-sm text-gray-500">{t('van', 'tirNom')}</p>
                  <p className="text-2xl font-black text-amber-600">{tir}%</p>
                  <p className="text-xs text-gray-500">
                    {parseFloat(tir) > taxaDescompte ? '‚úì TIR > k' : '‚úó TIR < k'}
                  </p>
                </InfoBox>
                <InfoBox color="blue">
                  <p className="text-sm text-gray-500">{t('van', 'payback')}</p>
                  <p className="text-2xl font-black text-blue-600">{payback}</p>
                  <p className="text-xs text-gray-500">{t('ui', 'anys')}</p>
                </InfoBox>
              </div>
            </div>
          </Card>
        </div>

        <Card>
          <h3 className="font-bold text-gray-800 mb-4">{idioma === 'en' ? 'Formulas' : 'F√≥rmules'}</h3>
          <div className="grid md:grid-cols-2 gap-4">
            <InfoBox color="gray">
              <p className="font-bold text-gray-700 mb-2">VAN</p>
              <p className="text-sm font-mono">VAN = Œ£(Ft / (1+k)^t) - I‚ÇÄ</p>
              <p className="text-xs text-gray-500 mt-2">{t('van', 'vanDesc')}</p>
            </InfoBox>
            <InfoBox color="gray">
              <p className="font-bold text-gray-700 mb-2">TIR</p>
              <p className="text-sm font-mono">0 = Œ£(Ft / (1+TIR)^t) - I‚ÇÄ</p>
              <p className="text-xs text-gray-500 mt-2">{t('van', 'tirDesc')}</p>
            </InfoBox>
          </div>
        </Card>
      </div>
    );
  };

  const FormesJuridiques = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Building className="text-pink-500" /> {t('formes', 'titol')}
        </h2>
      </div>

      <div className="flex flex-wrap gap-2 mb-4">
        {formesJuridiques.map(f => (
          <button
            key={f.id}
            onClick={() => setFormaSeleccionada(f.id)}
            className={`px-4 py-2 rounded-lg font-medium transition-all ${
              formaSeleccionada === f.id
                ? 'bg-pink-500 text-white'
                : 'bg-pink-50 text-pink-700 border border-pink-200'
            }`}
          >
            {f.nom.split(' ')[0]}
          </button>
        ))}
      </div>

      {formesJuridiques.filter(f => f.id === formaSeleccionada).map(forma => (
        <Card key={forma.id}>
          <h3 className="text-xl font-bold text-gray-800 mb-4">{forma.nom}</h3>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <table className="w-full text-sm">
                <tbody>
                  <tr className="border-b"><td className="py-2 text-gray-500 w-1/3">{t('formes', 'capitalMinim')}</td><td className="py-2 font-medium">{forma.capitalMinim}</td></tr>
                  <tr className="border-b"><td className="py-2 text-gray-500">{t('formes', 'socis')}</td><td className="py-2 font-medium">{forma.socis}</td></tr>
                  <tr className="border-b"><td className="py-2 text-gray-500">{t('formes', 'responsabilitat')}</td><td className="py-2 font-medium">{forma.responsabilitat}</td></tr>
                  <tr className="border-b"><td className="py-2 text-gray-500">{t('formes', 'tributacio')}</td><td className="py-2 font-medium">{forma.tributacio}</td></tr>
                  <tr><td className="py-2 text-gray-500">Seg. Social</td><td className="py-2 font-medium">{forma.seguretatSocial}</td></tr>
                </tbody>
              </table>
            </div>
            <div>
              <p className="font-medium text-emerald-700 mb-2">‚úì {t('ui', 'avantatges')}</p>
              <ul className="text-sm space-y-1 mb-4">
                {forma.avantatges.map((a, i) => <li key={i} className="flex items-start gap-2"><Check size={14} className="text-emerald-500 mt-0.5 flex-shrink-0" />{a}</li>)}
              </ul>
              <p className="font-medium text-red-700 mb-2">‚úó {t('ui', 'desavantatges')}</p>
              <ul className="text-sm space-y-1">
                {forma.desavantatges.map((d, i) => <li key={i} className="flex items-start gap-2"><X size={14} className="text-red-500 mt-0.5 flex-shrink-0" />{d}</li>)}
              </ul>
            </div>
          </div>
          <InfoBox color="blue" className="mt-4">
            <p className="text-sm"><strong>{t('ui', 'ideal')}:</strong> {forma.ideal}</p>
          </InfoBox>
        </Card>
      ))}
    </div>
  );

  const Financament = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Wallet className="text-pink-500" /> {t('financament', 'titol')}
        </h2>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        <Card title={<><PiggyBank className="text-emerald-500" /> {t('financament', 'propi')}</>}>
          {[
            { nom: t('financament', 'aportacions'), desc: idioma === 'val' ? 'Diners dels socis' : idioma === 'es' ? 'Dinero de los socios' : 'Partner money' },
            { nom: t('financament', 'reserves'), desc: idioma === 'val' ? 'Beneficis no repartits' : idioma === 'es' ? 'Beneficios no repartidos' : 'Undistributed profits' },
            { nom: 'Autofinan√ßament', desc: idioma === 'val' ? 'Amortitzacions + Reserves' : idioma === 'es' ? 'Amortizaciones + Reservas' : 'Depreciation + Reserves' },
          ].map((f, i) => (
            <div key={i} className="p-3 bg-emerald-50 rounded-lg mb-2 border border-emerald-200">
              <p className="font-medium text-emerald-700">{f.nom}</p>
              <p className="text-xs text-gray-500">{f.desc}</p>
            </div>
          ))}
          <p className="text-xs text-gray-500 mt-2">
            {idioma === 'val' && '‚úì No cal tornar-lo, per√≤ dilueix el control'}
            {idioma === 'es' && '‚úì No hay que devolverlo, pero diluye el control'}
            {idioma === 'en' && '‚úì No need to repay, but dilutes control'}
          </p>
        </Card>

        <Card title={<><CreditCard className="text-blue-500" /> {t('financament', 'alie')}</>}>
          <p className="text-sm font-medium text-blue-700 mb-2">{t('financament', 'llargTermini')}</p>
          {[t('financament', 'prestec'), t('financament', 'hipoteca'), t('financament', 'leasing')].map((f, i) => (
            <span key={i} className="inline-block px-3 py-1 bg-blue-50 rounded-full text-sm text-blue-700 mr-2 mb-2 border border-blue-200">{f}</span>
          ))}
          <p className="text-sm font-medium text-purple-700 mb-2 mt-3">{t('financament', 'curtTermini')}</p>
          {[t('financament', 'factoring'), t('financament', 'confirming'), 'P√≤lissa cr√®dit', 'Descompte efectes'].map((f, i) => (
            <span key={i} className="inline-block px-3 py-1 bg-purple-50 rounded-full text-sm text-purple-700 mr-2 mb-2 border border-purple-200">{f}</span>
          ))}
        </Card>
      </div>

      <Card title={<><Rocket className="text-pink-500" /> {idioma === 'en' ? 'Alternative Financing' : 'Finan√ßament Alternatiu'}</>}>
        <div className="grid md:grid-cols-4 gap-3">
          {[
            { nom: t('financament', 'crowdfunding'), desc: idioma === 'val' ? 'Finan√ßament col¬∑lectiu online' : 'Collective financing online', color: 'pink' },
            { nom: t('financament', 'businessAngels'), desc: idioma === 'val' ? 'Inversors privats en startups' : 'Private investors in startups', color: 'amber' },
            { nom: t('financament', 'capitalRisc'), desc: 'Venture Capital', color: 'purple' },
            { nom: t('financament', 'subvencions'), desc: idioma === 'val' ? 'Ajudes p√∫bliques' : 'Public grants', color: 'emerald' },
          ].map((f, i) => (
            <div key={i} className={`p-4 bg-${f.color}-50 rounded-xl border border-${f.color}-200 text-center`}>
              <p className={`font-bold text-${f.color}-700`}>{f.nom}</p>
              <p className="text-xs text-gray-500 mt-1">{f.desc}</p>
            </div>
          ))}
        </div>
      </Card>

      <Card title={<><Calculator className="text-pink-500" /> {idioma === 'en' ? 'Loan Simulator' : 'Simulador de Pr√©stec'}</>}>
        <div className="grid md:grid-cols-2 gap-6">
          <div>
            <Slider label={idioma === 'en' ? 'Loan Amount' : 'Import del pr√©stec'} value={capitalPrestec} setValue={setCapitalPrestec} min={5000} max={200000} step={5000} color="blue" unit="‚Ç¨" />
            <Slider label={idioma === 'en' ? 'Interest Rate' : 'Tipus d\'inter√®s'} value={tipusInteres} setValue={setTipusInteres} min={1} max={15} step={0.5} color="amber" unit="%" />
            <Slider label={idioma === 'en' ? 'Term (years)' : 'Termini (anys)'} value={anysPrestec} setValue={setAnysPrestec} min={1} max={20} color="pink" unit={` ${t('ui', 'anys')}`} />
          </div>
          <div className="space-y-3">
            <StatCard label={idioma === 'en' ? 'Monthly Payment' : 'Quota Mensual'} value={quotaMensual.toFixed(2)} unit="‚Ç¨" color="blue" />
            <StatCard label={idioma === 'en' ? 'Total Interest' : 'Interessos Totals'} value={interessosTotals.toFixed(2)} unit="‚Ç¨" color="amber" />
            <StatCard label={idioma === 'en' ? 'Total to Pay' : 'Total a Pagar'} value={totalPagar.toFixed(2)} unit="‚Ç¨" color="pink" />
          </div>
        </div>
      </Card>
    </div>
  );

  const Ratios = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <PieChart className="text-pink-500" /> {t('ratios', 'titol')}
        </h2>
      </div>

      <div className="flex flex-wrap gap-2 mb-4">
        {['liquiditat', 'endeutament', 'rendibilitat'].map(s => (
          <button key={s} onClick={() => setSubSection(subSection === s ? null : s)} className={`px-4 py-2 rounded-lg font-medium transition-all ${subSection === s ? 'bg-pink-500 text-white' : 'bg-pink-50 text-pink-700 border border-pink-200'}`}>
            {t('ratios', s)}
          </button>
        ))}
      </div>

      {(!subSection || subSection === 'liquiditat') && (
        <Card title={t('ratios', 'liquiditat')}>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <Slider label={idioma === 'en' ? 'Current Assets' : 'Actiu Corrent'} value={actiuCorrent} setValue={setActiuCorrent} min={10000} max={500000} step={5000} color="blue" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Current Liabilities' : 'Passiu Corrent'} value={passiuCorrent} setValue={setPassiuCorrent} min={10000} max={300000} step={5000} color="red" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Inventory' : 'Exist√®ncies'} value={existencies} setValue={setExistencies} min={0} max={100000} step={5000} color="amber" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Cash' : 'Tresoreria'} value={tresoreria} setValue={setTresoreria} min={0} max={100000} step={5000} color="emerald" unit="‚Ç¨" />
            </div>
            <div className="space-y-3">
              <InfoBox color={fonsManiobra >= 0 ? 'emerald' : 'red'}>
                <p className="text-sm text-gray-500">{t('ratios', 'fonsManiobra')} (AC - PC)</p>
                <p className="text-2xl font-black">{fonsManiobra.toLocaleString()}‚Ç¨</p>
                <p className="text-xs">{fonsManiobra >= 0 ? '‚úì Positiu' : '‚ö†Ô∏è Negatiu - Risc!'}</p>
              </InfoBox>
              <StatCard label={t('ratios', 'ratioLiquiditat')} value={ratioLiquiditat} color={parseFloat(ratioLiquiditat) >= 1.5 ? 'emerald' : parseFloat(ratioLiquiditat) >= 1 ? 'amber' : 'red'} />
              <StatCard label={t('ratios', 'acidTest')} value={acidTest} color={parseFloat(acidTest) >= 0.8 ? 'emerald' : 'amber'} />
              <StatCard label={t('ratios', 'tresoreria')} value={ratioTresoreria} color="blue" />
            </div>
          </div>
        </Card>
      )}

      {subSection === 'endeutament' && (
        <Card title={t('ratios', 'endeutament')}>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <Slider label={idioma === 'en' ? 'Total Assets' : 'Actiu Total'} value={actiuTotal} setValue={setActiuTotal} min={100000} max={2000000} step={50000} color="blue" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Total Liabilities' : 'Passiu Total'} value={passiuTotal} setValue={setPassiuTotal} min={50000} max={1500000} step={50000} color="red" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Net Equity' : 'Patrimoni Net'} value={patrimoniNet} setValue={setPatrimoniNet} min={10000} max={1000000} step={10000} color="emerald" unit="‚Ç¨" />
            </div>
            <div className="space-y-3">
              <StatCard label={t('ratios', 'endeutamentTotal')} value={endeutament} unit="%" color={parseFloat(endeutament) <= 60 ? 'emerald' : parseFloat(endeutament) <= 80 ? 'amber' : 'red'} />
              <StatCard label={t('ratios', 'autonomia')} value={autonomia} unit="%" color={parseFloat(autonomia) >= 40 ? 'emerald' : 'amber'} />
              <InfoBox color="gray">
                <p className="text-xs">
                  {idioma === 'val' && 'Endeutament ideal: 40-60%. M√©s del 80% √©s risc elevat.'}
                  {idioma === 'es' && 'Endeudamiento ideal: 40-60%. M√°s del 80% es riesgo elevado.'}
                  {idioma === 'en' && 'Ideal debt: 40-60%. Over 80% is high risk.'}
                </p>
              </InfoBox>
            </div>
          </div>
        </Card>
      )}

      {subSection === 'rendibilitat' && (
        <Card title={t('ratios', 'rendibilitat')}>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <Slider label={idioma === 'en' ? 'Net Profit' : 'Benefici Net'} value={beneficiNet} setValue={setBeneficiNet} min={0} max={200000} step={5000} color="emerald" unit="‚Ç¨" />
              <Slider label="BAII (EBIT)" value={baii} setValue={setBaii} min={0} max={300000} step={5000} color="blue" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Sales' : 'Vendes'} value={vendes} setValue={setVendes} min={100000} max={2000000} step={50000} color="purple" unit="‚Ç¨" />
            </div>
            <div className="space-y-3">
              <InfoBox color="emerald">
                <p className="text-sm text-gray-500">{t('ratios', 'roe')}</p>
                <p className="text-2xl font-black text-emerald-600">{roe}%</p>
                <p className="text-xs">BN / PN √ó 100</p>
              </InfoBox>
              <InfoBox color="blue">
                <p className="text-sm text-gray-500">{t('ratios', 'roa')}</p>
                <p className="text-2xl font-black text-blue-600">{roa}%</p>
                <p className="text-xs">BAII / AT √ó 100</p>
              </InfoBox>
              <InfoBox color="purple">
                <p className="text-sm text-gray-500">{t('ratios', 'ros')}</p>
                <p className="text-2xl font-black text-purple-600">{ros}%</p>
                <p className="text-xs">BN / Vendes √ó 100</p>
              </InfoBox>
            </div>
          </div>
        </Card>
      )}
    </div>
  );


  const RRHH = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Users className="text-pink-500" /> {t('rrhh', 'titol')}
        </h2>
      </div>

      <div className="flex flex-wrap gap-2 mb-4">
        {['contractes', 'motivacio', 'nomina'].map(s => (
          <button key={s} onClick={() => setSubSection(subSection === s ? null : s)} className={`px-4 py-2 rounded-lg font-medium transition-all ${subSection === s ? 'bg-pink-500 text-white' : 'bg-pink-50 text-pink-700 border border-pink-200'}`}>
            {s === 'contractes' ? t('rrhh', 'contractes') : s === 'motivacio' ? t('rrhh', 'motivacio') : idioma === 'en' ? 'Payroll' : 'N√≤mina'}
          </button>
        ))}
      </div>

      {(!subSection || subSection === 'contractes') && (
        <Card title={t('rrhh', 'contractes')}>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { nom: t('rrhh', 'indefinit'), desc: idioma === 'val' ? 'Sense data de fi. El m√©s estable.' : 'No end date. Most stable.', color: 'emerald' },
              { nom: t('rrhh', 'temporal'), desc: idioma === 'val' ? 'Per obra, circumst√†ncies, substituci√≥...' : 'For work, circumstances, replacement...', color: 'amber' },
              { nom: t('rrhh', 'formacioAprenentatge'), desc: idioma === 'val' ? 'Per a joves 16-30 anys. Combina treball i formaci√≥.' : 'For youth 16-30. Combines work and training.', color: 'blue' },
              { nom: t('rrhh', 'practiques'), desc: idioma === 'val' ? 'Per a titulats recents. M√†x 2 anys.' : 'For recent graduates. Max 2 years.', color: 'purple' },
              { nom: t('rrhh', 'fixDiscontinuu'), desc: idioma === 'val' ? 'Treball de temporada recurrent.' : 'Recurring seasonal work.', color: 'orange' },
              { nom: 'Temps Parcial', desc: idioma === 'val' ? 'Menys hores que la jornada completa.' : 'Less hours than full time.', color: 'cyan' },
            ].map((c, i) => (
              <div key={i} className={`p-4 bg-${c.color}-50 rounded-xl border border-${c.color}-200`}>
                <p className={`font-bold text-${c.color}-700`}>{c.nom}</p>
                <p className="text-sm text-gray-600 mt-1">{c.desc}</p>
              </div>
            ))}
          </div>
        </Card>
      )}

      {subSection === 'motivacio' && (
        <div className="space-y-4">
          <Card title={t('rrhh', 'maslow')}>
            <div className="flex justify-center">
              <div className="w-full max-w-md">
                {[
                  { nivell: idioma === 'en' ? 'Self-actualization' : 'Autorealitzaci√≥', color: 'purple', width: '40%' },
                  { nivell: idioma === 'en' ? 'Esteem' : 'Estima', color: 'blue', width: '55%' },
                  { nivell: idioma === 'en' ? 'Social/Belonging' : 'Socials/Pertinen√ßa', color: 'teal', width: '70%' },
                  { nivell: idioma === 'en' ? 'Safety' : 'Seguretat', color: 'amber', width: '85%' },
                  { nivell: idioma === 'en' ? 'Physiological' : 'Fisiol√≤giques', color: 'red', width: '100%' },
                ].map((n, i) => (
                  <div key={i} className={`bg-${n.color}-100 p-2 text-center text-sm font-medium text-${n.color}-800 mb-1 rounded`} style={{ width: n.width, marginLeft: 'auto', marginRight: 'auto' }}>
                    {n.nivell}
                  </div>
                ))}
              </div>
            </div>
            <p className="text-sm text-gray-500 text-center mt-4">
              {idioma === 'val' && 'S\'han de satisfer les necessitats de baix abans de les de dalt.'}
              {idioma === 'es' && 'Se deben satisfacer las necesidades de abajo antes que las de arriba.'}
              {idioma === 'en' && 'Lower needs must be satisfied before upper ones.'}
            </p>
          </Card>

          <Card title={t('rrhh', 'herzberg')}>
            <div className="grid md:grid-cols-2 gap-4">
              <InfoBox color="red">
                <p className="font-bold text-red-700">{idioma === 'en' ? 'Hygiene Factors' : 'Factors Higi√®nics'}</p>
                <p className="text-sm text-gray-600 mt-1">
                  {idioma === 'val' && 'Si falten ‚Üí Insatisfacci√≥. Si hi s√≥n ‚Üí NO insatisfacci√≥ (per√≤ no motivaci√≥)'}
                  {idioma === 'es' && 'Si faltan ‚Üí Insatisfacci√≥n. Si est√°n ‚Üí NO insatisfacci√≥n (pero no motivaci√≥n)'}
                  {idioma === 'en' && 'If missing ‚Üí Dissatisfaction. If present ‚Üí NO dissatisfaction (but not motivation)'}
                </p>
                <p className="text-xs text-gray-500 mt-2">{idioma === 'val' ? 'Salari, condicions, seguretat, supervisi√≥' : 'Salary, conditions, security, supervision'}</p>
              </InfoBox>
              <InfoBox color="emerald">
                <p className="font-bold text-emerald-700">{idioma === 'en' ? 'Motivating Factors' : 'Factors Motivadors'}</p>
                <p className="text-sm text-gray-600 mt-1">
                  {idioma === 'val' && 'Si hi s√≥n ‚Üí MOTIVACI√ì i satisfacci√≥.'}
                  {idioma === 'es' && 'Si est√°n ‚Üí MOTIVACI√ìN y satisfacci√≥n.'}
                  {idioma === 'en' && 'If present ‚Üí MOTIVATION and satisfaction.'}
                </p>
                <p className="text-xs text-gray-500 mt-2">{idioma === 'val' ? 'Reconeixement, creixement, responsabilitat, √®xit' : 'Recognition, growth, responsibility, achievement'}</p>
              </InfoBox>
            </div>
          </Card>
        </div>
      )}

      {subSection === 'nomina' && (
        <Card title={idioma === 'en' ? 'Payroll Simulator' : 'Simulador de N√≤mina'}>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <Slider label={idioma === 'en' ? 'Base Salary' : 'Salari Base'} value={salariBase} setValue={setSalariBase} min={500} max={5000} step={50} color="blue" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Extras/Bonuses' : 'Complements/Extres'} value={extres} setValue={setExtres} min={0} max={1000} step={50} color="emerald" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'IRPF Withholding' : 'Retenci√≥ IRPF'} value={irpfPercent} setValue={setIrpfPercent} min={0} max={45} color="red" unit="%" />
            </div>
            <div className="space-y-3">
              <InfoBox color="blue">
                <p className="text-sm text-gray-500">{idioma === 'en' ? 'Gross Salary' : 'Salari Brut'}</p>
                <p className="text-2xl font-black text-blue-600">{salariTotal.toFixed(2)}‚Ç¨</p>
              </InfoBox>
              <div className="grid grid-cols-2 gap-2">
                <InfoBox color="amber">
                  <p className="text-xs text-gray-500">SS Treballador (6.35%)</p>
                  <p className="font-bold text-amber-600">-{seguretaSocialTreballador.toFixed(2)}‚Ç¨</p>
                </InfoBox>
                <InfoBox color="red">
                  <p className="text-xs text-gray-500">IRPF ({irpfPercent}%)</p>
                  <p className="font-bold text-red-600">-{retencioIrpf.toFixed(2)}‚Ç¨</p>
                </InfoBox>
              </div>
              <InfoBox color="emerald">
                <p className="text-sm text-gray-500">{idioma === 'en' ? 'Net Salary' : 'Salari Net'}</p>
                <p className="text-3xl font-black text-emerald-600">{salariNet.toFixed(2)}‚Ç¨</p>
              </InfoBox>
              <InfoBox color="purple">
                <p className="text-xs text-gray-500">{idioma === 'en' ? 'Company Cost' : 'Cost Empresa'} (~32% SS)</p>
                <p className="font-bold text-purple-600">{costEmpresa.toFixed(2)}‚Ç¨</p>
              </InfoBox>
            </div>
          </div>
        </Card>
      )}
    </div>
  );

  const Produccio = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Factory className="text-pink-500" /> {t('produccio', 'titol')}
        </h2>
      </div>

      <div className="flex flex-wrap gap-2 mb-4">
        {['eoq', 'cadena', 'qualitat'].map(s => (
          <button key={s} onClick={() => setSubSection(subSection === s ? null : s)} className={`px-4 py-2 rounded-lg font-medium transition-all ${subSection === s ? 'bg-pink-500 text-white' : 'bg-pink-50 text-pink-700 border border-pink-200'}`}>
            {s === 'eoq' ? 'EOQ' : s === 'cadena' ? t('produccio', 'cadenaValor') : t('produccio', 'qualitat')}
          </button>
        ))}
      </div>

      {(!subSection || subSection === 'eoq') && (
        <Card title={<><Package className="text-pink-500" /> {t('produccio', 'eoq')} - {idioma === 'en' ? 'Inventory Management' : 'Gesti√≥ d\'Estocs'}</>}>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <Slider label={idioma === 'en' ? 'Annual Demand' : 'Demanda Anual'} value={demandaAnual} setValue={setDemandaAnual} min={1000} max={100000} step={1000} color="blue" unit=" u." />
              <Slider label={idioma === 'en' ? 'Order Cost' : 'Cost per Comanda'} value={costComanda} setValue={setCostComanda} min={10} max={500} step={10} color="amber" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Storage Cost (per unit/year)' : 'Cost Emmagatzematge (u/any)'} value={costEmmagatzematge} setValue={setCostEmmagatzematge} min={0.5} max={20} step={0.5} color="red" unit="‚Ç¨" />
              <Slider label={idioma === 'en' ? 'Delivery Days' : 'Dies de Lliurament'} value={diesLliurament} setValue={setDiesLliurament} min={1} max={30} color="purple" unit=" dies" />
            </div>
            <div className="space-y-3">
              <InfoBox color="emerald">
                <p className="text-sm text-gray-500">EOQ (Q*) = ‚àö(2DS/H)</p>
                <p className="text-3xl font-black text-emerald-600">{eoq} {t('ui', 'unitats')}</p>
                <p className="text-xs text-gray-500">{idioma === 'en' ? 'Optimal order quantity' : 'Quantitat √≤ptima de comanda'}</p>
              </InfoBox>
              <div className="grid grid-cols-2 gap-2">
                <StatCard label={idioma === 'en' ? 'Orders/Year' : 'Comandes/Any'} value={numComandes} color="blue" />
                <StatCard label={t('produccio', 'puntComanda')} value={puntRecomanda} unit=" u." color="purple" />
              </div>
              <StatCard label={idioma === 'en' ? 'Total Inventory Cost' : 'Cost Total Estoc'} value={costTotalEstoc} unit="‚Ç¨/any" color="amber" />
            </div>
          </div>
        </Card>
      )}

      {subSection === 'cadena' && (
        <Card title={t('produccio', 'cadenaValor')}>
          <p className="text-sm text-gray-600 mb-4">
            {idioma === 'val' && 'Model de Porter que descompon l\'empresa en activitats que afegeixen valor.'}
            {idioma === 'es' && 'Modelo de Porter que descompone la empresa en actividades que a√±aden valor.'}
            {idioma === 'en' && 'Porter\'s model that breaks down the company into value-adding activities.'}
          </p>
          <div className="space-y-3">
            <InfoBox color="pink">
              <p className="font-bold text-pink-700">{idioma === 'en' ? 'Primary Activities' : 'Activitats Prim√†ries'}</p>
              <div className="flex flex-wrap gap-2 mt-2">
                {(idioma === 'en' ? ['Inbound Logistics', 'Operations', 'Outbound Logistics', 'Marketing & Sales', 'Service'] : 
                  ['Log√≠stica Interna', 'Operacions', 'Log√≠stica Externa', 'Marketing i Vendes', 'Servei']).map((a, i) => (
                  <span key={i} className="px-3 py-1 bg-white rounded-full text-sm text-pink-700 border border-pink-300">{a}</span>
                ))}
              </div>
            </InfoBox>
            <InfoBox color="blue">
              <p className="font-bold text-blue-700">{idioma === 'en' ? 'Support Activities' : 'Activitats de Suport'}</p>
              <div className="flex flex-wrap gap-2 mt-2">
                {(idioma === 'en' ? ['Infrastructure', 'HR Management', 'Technology Dev.', 'Procurement'] : 
                  ['Infraestructura', 'Gesti√≥ RH', 'Desenvolupament Tecnol√≤gic', 'Aprovisionament']).map((a, i) => (
                  <span key={i} className="px-3 py-1 bg-white rounded-full text-sm text-blue-700 border border-blue-300">{a}</span>
                ))}
              </div>
            </InfoBox>
          </div>
        </Card>
      )}

      {subSection === 'qualitat' && (
        <Card title={t('produccio', 'qualitat')}>
          <div className="grid md:grid-cols-2 gap-4">
            {[
              { nom: 'ISO 9001', desc: idioma === 'val' ? 'Sistemes de gesti√≥ de qualitat' : 'Quality management systems', color: 'blue' },
              { nom: 'ISO 14001', desc: idioma === 'val' ? 'Gesti√≥ ambiental' : 'Environmental management', color: 'emerald' },
              { nom: t('produccio', 'jit'), desc: idioma === 'val' ? 'Produir just el que es necessita, quan es necessita' : 'Produce just what is needed, when needed', color: 'purple' },
              { nom: t('produccio', 'kanban'), desc: idioma === 'val' ? 'Sistema visual de gesti√≥ del flux de treball' : 'Visual workflow management system', color: 'amber' },
              { nom: 'TQM', desc: idioma === 'val' ? 'Gesti√≥ de la Qualitat Total' : 'Total Quality Management', color: 'pink' },
              { nom: 'Six Sigma', desc: idioma === 'val' ? 'Reducci√≥ de defectes a 3.4 per mili√≥' : 'Reduce defects to 3.4 per million', color: 'indigo' },
            ].map((q, i) => (
              <div key={i} className={`p-4 bg-${q.color}-50 rounded-xl border border-${q.color}-200`}>
                <p className={`font-bold text-${q.color}-700`}>{q.nom}</p>
                <p className="text-sm text-gray-600 mt-1">{q.desc}</p>
              </div>
            ))}
          </div>
        </Card>
      )}
    </div>
  );

  const Marketing = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Megaphone className="text-pink-500" /> {t('marketing', 'titol')}
        </h2>
      </div>

      <Card title={t('marketing', 'les4p')}>
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            { nom: t('marketing', 'producte'), color: 'pink', items: idioma === 'val' ? ['Qualitat', 'Disseny', 'Marca', 'Packaging', 'Garantia'] : ['Quality', 'Design', 'Brand', 'Packaging', 'Warranty'] },
            { nom: t('marketing', 'preu'), color: 'emerald', items: idioma === 'val' ? ['Preu de llista', 'Descomptes', 'Finan√ßament', 'Condicions pagament'] : ['List price', 'Discounts', 'Financing', 'Payment terms'] },
            { nom: t('marketing', 'distribucio'), color: 'blue', items: idioma === 'val' ? ['Canals', 'Cobertura', 'Localitzaci√≥', 'Inventari', 'Transport'] : ['Channels', 'Coverage', 'Location', 'Inventory', 'Transport'] },
            { nom: t('marketing', 'comunicacio'), color: 'purple', items: idioma === 'val' ? ['Publicitat', 'Promoci√≥', 'RRPP', 'Venda personal', 'Marketing directe'] : ['Advertising', 'Promotion', 'PR', 'Personal selling', 'Direct marketing'] },
          ].map((p, i) => (
            <div key={i} className={`p-4 bg-${p.color}-50 rounded-xl border border-${p.color}-200`}>
              <p className={`font-bold text-${p.color}-700 mb-2`}>{p.nom}</p>
              <ul className="space-y-1">
                {p.items.map((item, j) => <li key={j} className="text-sm text-gray-600 flex items-center gap-1"><ChevronRight size={12} className={`text-${p.color}-500`} />{item}</li>)}
              </ul>
            </div>
          ))}
        </div>
      </Card>

      <Card title={t('marketing', 'cicleVidaProducte')}>
        <div className="grid grid-cols-4 gap-2 mb-4">
          {[
            { fase: t('marketing', 'introduccio'), color: 'blue', desc: idioma === 'val' ? 'Baixes vendes, alts costos' : 'Low sales, high costs' },
            { fase: t('marketing', 'creixement'), color: 'emerald', desc: idioma === 'val' ? 'Vendes creixen, beneficis' : 'Sales grow, profits' },
            { fase: t('marketing', 'maduresa'), color: 'amber', desc: idioma === 'val' ? 'M√†xim vendes, compet√®ncia' : 'Peak sales, competition' },
            { fase: t('marketing', 'declivi'), color: 'red', desc: idioma === 'val' ? 'Vendes baixen' : 'Sales decline' },
          ].map((f, i) => (
            <div key={i} className={`p-3 bg-${f.color}-50 rounded-lg border border-${f.color}-200 text-center`}>
              <p className={`font-bold text-${f.color}-700 text-sm`}>{f.fase}</p>
              <p className="text-xs text-gray-500">{f.desc}</p>
            </div>
          ))}
        </div>
        <div className="h-32 bg-gradient-to-r from-blue-50 via-emerald-50 via-amber-50 to-red-50 rounded-lg overflow-hidden">
          <svg className="w-full h-full" viewBox="0 0 100 50" preserveAspectRatio="none">
            <defs>
              <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stopColor="#ec4899" stopOpacity="0.3"/>
                <stop offset="100%" stopColor="#ec4899" stopOpacity="0.05"/>
              </linearGradient>
            </defs>
            <path d="M 0 45 Q 10 40, 20 30 T 40 15 T 60 10 T 70 15 T 85 30 T 100 45" fill="url(#areaGradient)" stroke="none" />
            <path d="M 0 45 Q 10 40, 20 30 T 40 15 T 60 10 T 70 15 T 85 30 T 100 45" fill="none" stroke="#ec4899" strokeWidth="1.5" />
          </svg>
        </div>
      </Card>

      <Card title={t('marketing', 'marketingDigital')}>
        <div className="grid md:grid-cols-3 gap-4">
          {[
            { nom: t('marketing', 'seo'), icon: Search, color: 'emerald' },
            { nom: t('marketing', 'sem'), icon: MousePointer, color: 'blue' },
            { nom: t('marketing', 'xarxesSocials'), icon: Share, color: 'pink' },
            { nom: t('marketing', 'emailMarketing'), icon: Mail, color: 'amber' },
            { nom: t('marketing', 'contentMarketing'), icon: FileText, color: 'purple' },
            { nom: 'Influencer Marketing', icon: ThumbsUp, color: 'rose' },
          ].map((m, i) => (
            <div key={i} className={`p-4 bg-${m.color}-50 rounded-xl border border-${m.color}-200 flex items-center gap-3`}>
              <m.icon className={`text-${m.color}-500`} size={24} />
              <p className={`font-medium text-${m.color}-700`}>{m.nom}</p>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );

  const Estrategia = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Compass className="text-pink-500" /> {t('estrategia', 'titol')}
        </h2>
      </div>

      <Card title={<><Target className="text-pink-500" /> {t('estrategia', 'missio')}, {t('estrategia', 'visio')}, {t('estrategia', 'valors')}</>}>
        <div className="grid md:grid-cols-3 gap-4">
          <InfoBox color="pink">
            <p className="font-bold text-pink-700">{t('estrategia', 'missio')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Per qu√® existim? Qu√® fem i per a qui?'}
              {idioma === 'es' && '¬øPor qu√© existimos? ¬øQu√© hacemos y para qui√©n?'}
              {idioma === 'en' && 'Why do we exist? What do we do and for whom?'}
            </p>
          </InfoBox>
          <InfoBox color="blue">
            <p className="font-bold text-blue-700">{t('estrategia', 'visio')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'On volem arribar? Futur desitjat.'}
              {idioma === 'es' && '¬øD√≥nde queremos llegar? Futuro deseado.'}
              {idioma === 'en' && 'Where do we want to go? Desired future.'}
            </p>
          </InfoBox>
          <InfoBox color="emerald">
            <p className="font-bold text-emerald-700">{t('estrategia', 'valors')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Principis que guien les nostres accions.'}
              {idioma === 'es' && 'Principios que gu√≠an nuestras acciones.'}
              {idioma === 'en' && 'Principles that guide our actions.'}
            </p>
          </InfoBox>
        </div>
      </Card>

      <Card title={t('estrategia', 'porter')}>
        <div className="grid md:grid-cols-3 gap-4">
          {[
            { nom: t('estrategia', 'lideratge'), desc: idioma === 'val' ? 'Ser el m√©s barat del mercat' : 'Be the cheapest in the market', color: 'emerald', ex: 'Ryanair, Mercadona' },
            { nom: t('estrategia', 'diferenciacio'), desc: idioma === 'val' ? 'Oferir alguna cosa √∫nica' : 'Offer something unique', color: 'blue', ex: 'Apple, BMW' },
            { nom: t('estrategia', 'focus'), desc: idioma === 'val' ? 'Especialitzar-se en un segment' : 'Specialize in a segment', color: 'purple', ex: 'Ferrari, Rolex' },
          ].map((e, i) => (
            <div key={i} className={`p-4 bg-${e.color}-50 rounded-xl border border-${e.color}-200`}>
              <p className={`font-bold text-${e.color}-700`}>{e.nom}</p>
              <p className="text-sm text-gray-600 mt-1">{e.desc}</p>
              <p className="text-xs text-gray-400 mt-2">Ex: {e.ex}</p>
            </div>
          ))}
        </div>
      </Card>

      <Card title={t('estrategia', 'ansoff')}>
        <div className="grid grid-cols-3 gap-2">
          <div></div>
          <div className="text-center p-2 bg-gray-100 rounded font-medium text-sm">{idioma === 'en' ? 'Current Product' : 'Producte Actual'}</div>
          <div className="text-center p-2 bg-gray-100 rounded font-medium text-sm">{idioma === 'en' ? 'New Product' : 'Producte Nou'}</div>
          
          <div className="text-center p-2 bg-gray-100 rounded font-medium text-sm">{idioma === 'en' ? 'Current Market' : 'Mercat Actual'}</div>
          <button onClick={() => setAnsoffSeleccionat('penetracio')} className={`p-4 rounded-xl border-2 text-center transition-all ${ansoffSeleccionat === 'penetracio' ? 'bg-emerald-100 border-emerald-400' : 'bg-emerald-50 border-emerald-200 hover:border-emerald-400'}`}>
            <p className="font-bold text-emerald-700">{t('estrategia', 'penetracio')}</p>
            <p className="text-xs text-gray-500">{idioma === 'val' ? 'Baix risc' : 'Low risk'}</p>
          </button>
          <button onClick={() => setAnsoffSeleccionat('producte')} className={`p-4 rounded-xl border-2 text-center transition-all ${ansoffSeleccionat === 'producte' ? 'bg-blue-100 border-blue-400' : 'bg-blue-50 border-blue-200 hover:border-blue-400'}`}>
            <p className="font-bold text-blue-700">{t('estrategia', 'desenvolupamentProducte')}</p>
            <p className="text-xs text-gray-500">{idioma === 'val' ? 'Risc moderat' : 'Moderate risk'}</p>
          </button>
          
          <div className="text-center p-2 bg-gray-100 rounded font-medium text-sm">{idioma === 'en' ? 'New Market' : 'Mercat Nou'}</div>
          <button onClick={() => setAnsoffSeleccionat('mercat')} className={`p-4 rounded-xl border-2 text-center transition-all ${ansoffSeleccionat === 'mercat' ? 'bg-amber-100 border-amber-400' : 'bg-amber-50 border-amber-200 hover:border-amber-400'}`}>
            <p className="font-bold text-amber-700">{t('estrategia', 'desenvolupamentMercat')}</p>
            <p className="text-xs text-gray-500">{idioma === 'val' ? 'Risc moderat' : 'Moderate risk'}</p>
          </button>
          <button onClick={() => setAnsoffSeleccionat('diversificacio')} className={`p-4 rounded-xl border-2 text-center transition-all ${ansoffSeleccionat === 'diversificacio' ? 'bg-red-100 border-red-400' : 'bg-red-50 border-red-200 hover:border-red-400'}`}>
            <p className="font-bold text-red-700">{t('estrategia', 'diversificacio')}</p>
            <p className="text-xs text-gray-500">{idioma === 'val' ? 'Alt risc' : 'High risk'}</p>
          </button>
        </div>
        {ansoffSeleccionat && (
          <InfoBox color="gray" className="mt-4">
            {ansoffSeleccionat === 'penetracio' && (idioma === 'val' ? 'Vendre M√âS del mateix producte al mateix mercat. Ex: Promocions, fidelitzaci√≥.' : 'Sell MORE of the same product to the same market. Ex: Promotions, loyalty.')}
            {ansoffSeleccionat === 'producte' && (idioma === 'val' ? 'Nous productes per als clients actuals. Ex: Apple llan√ßant l\'iPad.' : 'New products for current customers. Ex: Apple launching iPad.')}
            {ansoffSeleccionat === 'mercat' && (idioma === 'val' ? 'Producte actual a nous mercats. Ex: Internacionalitzaci√≥.' : 'Current product to new markets. Ex: Internationalization.')}
            {ansoffSeleccionat === 'diversificacio' && (idioma === 'val' ? 'Nous productes a nous mercats. Molt arriscat. Ex: Amazon entrant en streaming.' : 'New products to new markets. Very risky. Ex: Amazon entering streaming.')}
          </InfoBox>
        )}
      </Card>
    </div>
  );


  const Canvas = () => {
    const canvasBlocs = [
      { id: 'segments', nom: t('canvas', 'segments'), icon: Users, color: 'blue', pregunta: idioma === 'val' ? 'Per a qui creem valor?' : 'For whom do we create value?' },
      { id: 'proposta', nom: t('canvas', 'proposta'), icon: Heart, color: 'pink', pregunta: idioma === 'val' ? 'Quin problema solucionem?' : 'What problem do we solve?' },
      { id: 'canals', nom: t('canvas', 'canals'), icon: Truck, color: 'emerald', pregunta: idioma === 'val' ? 'Com arribem als clients?' : 'How do we reach customers?' },
      { id: 'relacions', nom: t('canvas', 'relacions'), icon: MessageSquare, color: 'purple', pregunta: idioma === 'val' ? 'Quin tipus de relaci√≥?' : 'What type of relationship?' },
      { id: 'ingressos', nom: t('canvas', 'ingressos'), icon: CircleDollarSign, color: 'amber', pregunta: idioma === 'val' ? 'Per qu√® paguen?' : 'What do they pay for?' },
      { id: 'recursos', nom: t('canvas', 'recursos'), icon: Wrench, color: 'orange', pregunta: idioma === 'val' ? 'Qu√® necessitem?' : 'What do we need?' },
      { id: 'activitats', nom: t('canvas', 'activitats'), icon: Settings, color: 'cyan', pregunta: idioma === 'val' ? 'Qu√® hem de fer?' : 'What must we do?' },
      { id: 'socis', nom: t('canvas', 'socis'), icon: HandCoins, color: 'indigo', pregunta: idioma === 'val' ? 'Qui ens ajuda?' : 'Who helps us?' },
      { id: 'costos', nom: t('canvas', 'costos'), icon: Receipt, color: 'red', pregunta: idioma === 'val' ? 'Quins costos tenim?' : 'What are our costs?' },
    ];

    return (
      <div className="space-y-6">
        <div>
          <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
            <Layers className="text-pink-500" /> Business Model Canvas
          </h2>
          <p className="text-gray-500">
            {idioma === 'val' && '9 blocs per descriure visualment el teu model de negoci.'}
            {idioma === 'es' && '9 bloques para describir visualmente tu modelo de negocio.'}
            {idioma === 'en' && '9 blocks to visually describe your business model.'}
          </p>
        </div>

        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
          {/* Layout del Canvas */}
          <div className="col-span-2 md:col-span-1 row-span-2">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'socis')} />
          </div>
          <div className="col-span-1 row-span-1">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'activitats')} />
          </div>
          <div className="col-span-1 row-span-2">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'proposta')} />
          </div>
          <div className="col-span-1 row-span-1">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'relacions')} />
          </div>
          <div className="col-span-2 md:col-span-1 row-span-2">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'segments')} />
          </div>
          <div className="col-span-1 row-span-1">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'recursos')} />
          </div>
          <div className="col-span-1 row-span-1">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'canals')} />
          </div>
          <div className="col-span-2 md:col-span-2 lg:col-span-2">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'costos')} />
          </div>
          <div className="col-span-2 md:col-span-3 lg:col-span-3">
            <CanvasBloc bloc={canvasBlocs.find(b => b.id === 'ingressos')} />
          </div>
        </div>

        {canvasActiu && (
          <Card accent>
            <div className="flex justify-between items-start mb-4">
              <h3 className="text-lg font-bold text-gray-800">{canvasBlocs.find(b => b.id === canvasActiu)?.nom}</h3>
              <button onClick={() => setCanvasActiu(null)} className="text-gray-400 hover:text-gray-600"><X size={20} /></button>
            </div>
            <textarea
              value={canvasData[canvasActiu] || ''}
              onChange={(e) => setCanvasData(prev => ({ ...prev, [canvasActiu]: e.target.value }))}
              placeholder={canvasBlocs.find(b => b.id === canvasActiu)?.pregunta}
              className="w-full p-3 border rounded-xl min-h-[100px] focus:ring-2 focus:ring-pink-300 focus:border-pink-300"
            />
          </Card>
        )}
      </div>
    );
  };

  const CanvasBloc = ({ bloc }) => (
    <button
      onClick={() => setCanvasActiu(bloc.id)}
      className={`w-full h-full min-h-[100px] p-3 rounded-xl border-2 transition-all text-left ${
        canvasActiu === bloc.id 
          ? `bg-${bloc.color}-100 border-${bloc.color}-400` 
          : `bg-${bloc.color}-50 border-${bloc.color}-200 hover:border-${bloc.color}-400`
      }`}
    >
      <bloc.icon className={`text-${bloc.color}-500 mb-1`} size={20} />
      <p className={`font-bold text-${bloc.color}-700 text-sm`}>{bloc.nom}</p>
      <p className="text-xs text-gray-500 mt-1">{bloc.pregunta}</p>
      {canvasData[bloc.id] && (
        <p className="text-xs text-gray-600 mt-2 line-clamp-2">{canvasData[bloc.id]}</p>
      )}
    </button>
  );

  const Analisi = () => {
    const addDafoItem = (cat) => setDafoItems(prev => ({ ...prev, [cat]: [...prev[cat], ''] }));
    const updateDafoItem = (cat, idx, val) => setDafoItems(prev => ({ ...prev, [cat]: prev[cat].map((item, i) => i === idx ? val : item) }));
    const removeDafoItem = (cat, idx) => setDafoItems(prev => ({ ...prev, [cat]: prev[cat].filter((_, i) => i !== idx) }));

    const porter5Forces = [
      { nom: idioma === 'val' ? 'Rivalitat competidors' : 'Competitor rivalry', desc: idioma === 'val' ? 'Intensitat de la compet√®ncia' : 'Competition intensity', color: 'pink' },
      { nom: idioma === 'val' ? 'Amena√ßa nous entrants' : 'Threat of new entrants', desc: idioma === 'val' ? 'Barreres d\'entrada' : 'Entry barriers', color: 'blue' },
      { nom: idioma === 'val' ? 'Poder negociador clients' : 'Buyer power', desc: idioma === 'val' ? 'Capacitat de pressionar preus' : 'Ability to pressure prices', color: 'emerald' },
      { nom: idioma === 'val' ? 'Poder negociador prove√Ødors' : 'Supplier power', desc: idioma === 'val' ? 'Capacitat de pujar preus' : 'Ability to raise prices', color: 'amber' },
      { nom: idioma === 'val' ? 'Amena√ßa substitutius' : 'Threat of substitutes', desc: idioma === 'val' ? 'Productes alternatius' : 'Alternative products', color: 'purple' },
    ];

    const pestel = [
      { cat: t('analisi', 'politic'), color: 'red', items: idioma === 'val' ? ['Estabilitat pol√≠tica', 'Pol√≠tica fiscal', 'Regulaci√≥ comer√ß'] : ['Political stability', 'Tax policy', 'Trade regulation'] },
      { cat: t('analisi', 'economic'), color: 'emerald', items: idioma === 'val' ? ['PIB', 'Inflaci√≥', 'Tipus inter√®s', 'Atur'] : ['GDP', 'Inflation', 'Interest rates', 'Unemployment'] },
      { cat: t('analisi', 'social'), color: 'blue', items: idioma === 'val' ? ['Demografia', 'Estil de vida', 'Educaci√≥'] : ['Demographics', 'Lifestyle', 'Education'] },
      { cat: t('analisi', 'tecnologic'), color: 'purple', items: idioma === 'val' ? ['I+D', 'Automatitzaci√≥', 'Digitalitzaci√≥'] : ['R&D', 'Automation', 'Digitalization'] },
      { cat: t('analisi', 'ecologic'), color: 'lime', items: idioma === 'val' ? ['Canvi clim√†tic', 'Reciclatge', 'Energies renovables'] : ['Climate change', 'Recycling', 'Renewable energy'] },
      { cat: t('analisi', 'legal'), color: 'amber', items: idioma === 'val' ? ['Lleis laborals', 'Protecci√≥ consumidor', 'Propietat intel¬∑lectual'] : ['Labor laws', 'Consumer protection', 'Intellectual property'] },
    ];

    return (
      <div className="space-y-6">
        <div>
          <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
            <Search className="text-pink-500" /> {t('analisi', 'titol')}
          </h2>
        </div>

        <div className="flex flex-wrap gap-2 mb-4">
          {['dafo', 'porter', 'pestel'].map(s => (
            <button key={s} onClick={() => setSubSection(subSection === s ? null : s)} className={`px-4 py-2 rounded-lg font-medium transition-all ${subSection === s ? 'bg-pink-500 text-white' : 'bg-pink-50 text-pink-700 border border-pink-200'}`}>
              {s === 'dafo' ? 'DAFO/SWOT' : s === 'porter' ? '5 Forces Porter' : 'PESTEL'}
            </button>
          ))}
        </div>

        {(!subSection || subSection === 'dafo') && (
          <Card title={t('analisi', 'dafo')}>
            <div className="grid md:grid-cols-2 gap-4">
              {[
                { id: 'fortaleses', nom: t('analisi', 'fortaleses'), color: 'emerald', icon: 'üí™' },
                { id: 'debilitats', nom: t('analisi', 'debilitats'), color: 'red', icon: '‚ö†Ô∏è' },
                { id: 'oportunitats', nom: t('analisi', 'oportunitats'), color: 'blue', icon: 'üéØ' },
                { id: 'amenaces', nom: t('analisi', 'amenaces'), color: 'amber', icon: '‚õàÔ∏è' },
              ].map(cat => (
                <div key={cat.id} className={`p-4 bg-${cat.color}-50 rounded-xl border border-${cat.color}-200`}>
                  <p className={`font-bold text-${cat.color}-700 mb-3`}>{cat.icon} {cat.nom}</p>
                  {dafoItems[cat.id].map((item, idx) => (
                    <div key={idx} className="flex gap-2 mb-2">
                      <input
                        type="text"
                        value={item}
                        onChange={(e) => updateDafoItem(cat.id, idx, e.target.value)}
                        className="flex-1 p-2 text-sm border rounded"
                        placeholder={`${cat.nom} ${idx + 1}...`}
                      />
                      <button onClick={() => removeDafoItem(cat.id, idx)} className="text-gray-400 hover:text-red-500"><X size={16} /></button>
                    </div>
                  ))}
                  <button onClick={() => addDafoItem(cat.id)} className={`text-sm text-${cat.color}-600 hover:underline`}>+ {idioma === 'en' ? 'Add' : 'Afegir'}</button>
                </div>
              ))}
            </div>
            <InfoBox color="gray" className="mt-4">
              <p className="text-sm">
                {idioma === 'val' && 'üí° Fortaleses i Debilitats s√≥n INTERNES (controlem). Oportunitats i Amenaces s√≥n EXTERNES (no controlem).'}
                {idioma === 'es' && 'üí° Fortalezas y Debilidades son INTERNAS (controlamos). Oportunidades y Amenazas son EXTERNAS (no controlamos).'}
                {idioma === 'en' && 'üí° Strengths and Weaknesses are INTERNAL (we control). Opportunities and Threats are EXTERNAL (we don\'t control).'}
              </p>
            </InfoBox>
          </Card>
        )}

        {subSection === 'porter' && (
          <Card title={t('analisi', 'porter5')}>
            <div className="grid md:grid-cols-3 lg:grid-cols-5 gap-4">
              {porter5Forces.map((f, i) => (
                <div key={i} className={`p-4 bg-${f.color}-50 rounded-xl border border-${f.color}-200 text-center`}>
                  <p className={`font-bold text-${f.color}-700 text-sm`}>{f.nom}</p>
                  <p className="text-xs text-gray-500 mt-1">{f.desc}</p>
                </div>
              ))}
            </div>
            <InfoBox color="pink" className="mt-4">
              <p className="text-sm">
                {idioma === 'val' && 'üí° Com m√©s intenses les forces, menys atractiu √©s el sector. Busca sectors amb barreres altes i poca rivalitat.'}
                {idioma === 'es' && 'üí° Cuanto m√°s intensas las fuerzas, menos atractivo es el sector. Busca sectores con barreras altas y poca rivalidad.'}
                {idioma === 'en' && 'üí° The more intense the forces, the less attractive the sector. Look for sectors with high barriers and low rivalry.'}
              </p>
            </InfoBox>
          </Card>
        )}

        {subSection === 'pestel' && (
          <Card title={t('analisi', 'pestel')}>
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
              {pestel.map((p, i) => (
                <div key={i} className={`p-4 bg-${p.color}-50 rounded-xl border border-${p.color}-200`}>
                  <p className={`font-bold text-${p.color}-700`}>{p.cat}</p>
                  <ul className="mt-2 space-y-1">
                    {p.items.map((item, j) => (
                      <li key={j} className="text-sm text-gray-600 flex items-center gap-1">
                        <ChevronRight size={12} className={`text-${p.color}-500`} />{item}
                      </li>
                    ))}
                  </ul>
                </div>
              ))}
            </div>
          </Card>
        )}
      </div>
    );
  };

  const Creixement = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Rocket className="text-pink-500" /> {t('creixement', 'titol')}
        </h2>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        <Card title={<><ArrowUpRight className="text-emerald-500" /> {t('creixement', 'intern')}</>}>
          <p className="text-sm text-gray-600 mb-3">
            {idioma === 'val' && 'Cr√©ixer amb els propis recursos, sense fusi√≥ ni adquisici√≥.'}
            {idioma === 'es' && 'Crecer con los propios recursos, sin fusi√≥n ni adquisici√≥n.'}
            {idioma === 'en' && 'Grow with own resources, without merger or acquisition.'}
          </p>
          <div className="space-y-2">
            {(idioma === 'val' ? ['Ampliar capacitat productiva', 'Nous productes', 'Nous mercats geogr√†fics', 'Obertura noves botigues'] : 
              ['Expand production capacity', 'New products', 'New geographic markets', 'Open new stores']).map((e, i) => (
              <div key={i} className="p-2 bg-emerald-50 rounded-lg text-sm text-emerald-700 border border-emerald-200">{e}</div>
            ))}
          </div>
          <p className="text-xs text-gray-500 mt-3">‚úì {idioma === 'val' ? 'M√©s control, m√©s lent' : 'More control, slower'}</p>
        </Card>

        <Card title={<><GitBranch className="text-blue-500" /> {t('creixement', 'extern')}</>}>
          <p className="text-sm text-gray-600 mb-3">
            {idioma === 'val' && 'Cr√©ixer mitjan√ßant acords amb altres empreses.'}
            {idioma === 'es' && 'Crecer mediante acuerdos con otras empresas.'}
            {idioma === 'en' && 'Grow through agreements with other companies.'}
          </p>
          <div className="space-y-2">
            {[
              { nom: t('creixement', 'fusio'), desc: idioma === 'val' ? 'Dues empreses s\'uneixen en una' : 'Two companies merge into one' },
              { nom: t('creixement', 'adquisicio'), desc: idioma === 'val' ? 'Una empresa en compra una altra' : 'One company buys another' },
              { nom: t('creixement', 'jointVenture'), desc: idioma === 'val' ? 'Associaci√≥ temporal per un projecte' : 'Temporary association for a project' },
              { nom: t('creixement', 'franquicia'), desc: idioma === 'val' ? 'Cedir marca i know-how' : 'Grant brand and know-how' },
            ].map((e, i) => (
              <div key={i} className="p-2 bg-blue-50 rounded-lg border border-blue-200">
                <p className="font-medium text-blue-700 text-sm">{e.nom}</p>
                <p className="text-xs text-gray-500">{e.desc}</p>
              </div>
            ))}
          </div>
          <p className="text-xs text-gray-500 mt-3">‚úì {idioma === 'val' ? 'M√©s r√†pid, menys control' : 'Faster, less control'}</p>
        </Card>
      </div>

      <Card title={<><Network className="text-pink-500" /> {t('creixement', 'integracio')}</>}>
        <div className="grid md:grid-cols-2 gap-4">
          <InfoBox color="purple">
            <p className="font-bold text-purple-700">{t('creixement', 'vertical')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Cap enrere (prove√Ødors) o cap endavant (distribuci√≥). Ex: Inditex fabrica i ven.'}
              {idioma === 'es' && 'Hacia atr√°s (proveedores) o hacia adelante (distribuci√≥n). Ej: Inditex fabrica y vende.'}
              {idioma === 'en' && 'Backward (suppliers) or forward (distribution). Ex: Inditex manufactures and sells.'}
            </p>
          </InfoBox>
          <InfoBox color="cyan">
            <p className="font-bold text-cyan-700">{t('creixement', 'horitzontal')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Fusi√≥ o adquisici√≥ de competidors del mateix sector. Ex: Facebook comprant Instagram.'}
              {idioma === 'es' && 'Fusi√≥n o adquisici√≥n de competidores del mismo sector. Ej: Facebook comprando Instagram.'}
              {idioma === 'en' && 'Merger or acquisition of competitors in the same sector. Ex: Facebook buying Instagram.'}
            </p>
          </InfoBox>
        </div>
      </Card>

      <Card title={<><Globe className="text-pink-500" /> {t('creixement', 'internacionalitzacio')}</>}>
        <div className="grid md:grid-cols-4 gap-3">
          {[
            { nom: t('creixement', 'exportacio'), desc: idioma === 'val' ? 'Vendre a l\'exterior' : 'Sell abroad', risc: idioma === 'val' ? 'Baix' : 'Low', color: 'emerald' },
            { nom: idioma === 'val' ? 'Llic√®ncia' : 'License', desc: idioma === 'val' ? 'Cedir drets a empresa estrangera' : 'Grant rights to foreign company', risc: idioma === 'val' ? 'Baix-Mitj√†' : 'Low-Medium', color: 'blue' },
            { nom: t('creixement', 'jointVenture'), desc: idioma === 'val' ? 'Soci local' : 'Local partner', risc: idioma === 'val' ? 'Mitj√†' : 'Medium', color: 'amber' },
            { nom: t('creixement', 'filial'), desc: idioma === 'val' ? 'Empresa pr√≤pia a l\'estranger' : 'Own company abroad', risc: idioma === 'val' ? 'Alt' : 'High', color: 'red' },
          ].map((m, i) => (
            <div key={i} className={`p-3 bg-${m.color}-50 rounded-xl border border-${m.color}-200 text-center`}>
              <p className={`font-bold text-${m.color}-700 text-sm`}>{m.nom}</p>
              <p className="text-xs text-gray-500 mt-1">{m.desc}</p>
              <p className={`text-xs text-${m.color}-600 mt-2 font-medium`}>{idioma === 'val' ? 'Risc' : 'Risk'}: {m.risc}</p>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );

  const Innovacio = () => (
    <div className="space-y-6">
      <div>
        <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
          <Sparkles className="text-pink-500" /> {t('innovacio', 'titol')}
        </h2>
      </div>

      <Card title={t('innovacio', 'tipusInnovacio')}>
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[
            { nom: t('innovacio', 'producte'), desc: idioma === 'val' ? 'Nous productes o millores' : 'New products or improvements', ex: 'iPhone', color: 'pink' },
            { nom: t('innovacio', 'proces'), desc: idioma === 'val' ? 'Noves formes de produir' : 'New ways to produce', ex: 'Just in Time', color: 'blue' },
            { nom: t('innovacio', 'organitzativa'), desc: idioma === 'val' ? 'Noves formes d\'organitzar' : 'New ways to organize', ex: idioma === 'val' ? 'Teletreball' : 'Remote work', color: 'emerald' },
            { nom: t('innovacio', 'marketing'), desc: idioma === 'val' ? 'Noves formes de vendre' : 'New ways to sell', ex: idioma === 'val' ? 'Subscripcions' : 'Subscriptions', color: 'purple' },
          ].map((t, i) => (
            <div key={i} className={`p-4 bg-${t.color}-50 rounded-xl border border-${t.color}-200`}>
              <p className={`font-bold text-${t.color}-700`}>{t.nom}</p>
              <p className="text-sm text-gray-600 mt-1">{t.desc}</p>
              <p className="text-xs text-gray-400 mt-2">Ex: {t.ex}</p>
            </div>
          ))}
        </div>
      </Card>

      <div className="grid md:grid-cols-2 gap-4">
        <InfoBox color="blue">
          <p className="font-bold text-blue-700">{t('innovacio', 'incremental')}</p>
          <p className="text-sm text-gray-600 mt-1">
            {idioma === 'val' && 'Millores graduals sobre productes existents. Menys risc.'}
            {idioma === 'es' && 'Mejoras graduales sobre productos existentes. Menos riesgo.'}
            {idioma === 'en' && 'Gradual improvements on existing products. Less risk.'}
          </p>
          <p className="text-xs text-gray-400 mt-2">Ex: iPhone 14 ‚Üí iPhone 15</p>
        </InfoBox>
        <InfoBox color="purple">
          <p className="font-bold text-purple-700">{t('innovacio', 'radical')}</p>
          <p className="text-sm text-gray-600 mt-1">
            {idioma === 'val' && 'Canvis revolucionaris que creen nous mercats. Alt risc, alta recompensa.'}
            {idioma === 'es' && 'Cambios revolucionarios que crean nuevos mercados. Alto riesgo, alta recompensa.'}
            {idioma === 'en' && 'Revolutionary changes that create new markets. High risk, high reward.'}
          </p>
          <p className="text-xs text-gray-400 mt-2">Ex: Primer iPhone, Netflix streaming</p>
        </InfoBox>
      </div>

      <Card title={<><Rocket className="text-pink-500" /> {t('innovacio', 'leanStartup')}</>}>
        <div className="text-center mb-6">
          <div className="inline-flex items-center gap-4">
            <div className="p-4 bg-blue-100 rounded-full">
              <Wrench className="text-blue-600" size={24} />
              <p className="text-xs font-bold text-blue-700 mt-1">{idioma === 'val' ? 'CONSTRUIR' : 'BUILD'}</p>
            </div>
            <ArrowRight className="text-gray-400" />
            <div className="p-4 bg-emerald-100 rounded-full">
              <Gauge className="text-emerald-600" size={24} />
              <p className="text-xs font-bold text-emerald-700 mt-1">{idioma === 'val' ? 'MESURAR' : 'MEASURE'}</p>
            </div>
            <ArrowRight className="text-gray-400" />
            <div className="p-4 bg-purple-100 rounded-full">
              <GraduationCap className="text-purple-600" size={24} />
              <p className="text-xs font-bold text-purple-700 mt-1">{idioma === 'val' ? 'APRENDRE' : 'LEARN'}</p>
            </div>
          </div>
        </div>

        <div className="grid md:grid-cols-3 gap-4">
          <InfoBox color="pink">
            <p className="font-bold text-pink-700">{t('innovacio', 'mvp')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Versi√≥ m√≠nima del producte per validar hip√≤tesis amb clients reals.'}
              {idioma === 'es' && 'Versi√≥n m√≠nima del producto para validar hip√≥tesis con clientes reales.'}
              {idioma === 'en' && 'Minimum product version to validate hypotheses with real customers.'}
            </p>
          </InfoBox>
          <InfoBox color="amber">
            <p className="font-bold text-amber-700">{t('innovacio', 'pivotar')}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Canviar de direcci√≥ basant-se en l\'aprenentatge validat.'}
              {idioma === 'es' && 'Cambiar de direcci√≥n bas√°ndose en el aprendizaje validado.'}
              {idioma === 'en' && 'Change direction based on validated learning.'}
            </p>
          </InfoBox>
          <InfoBox color="emerald">
            <p className="font-bold text-emerald-700">{idioma === 'val' ? 'Perseverar' : 'Persevere'}</p>
            <p className="text-sm text-gray-600 mt-1">
              {idioma === 'val' && 'Continuar si les hip√≤tesis es confirmen.'}
              {idioma === 'es' && 'Continuar si las hip√≥tesis se confirman.'}
              {idioma === 'en' && 'Continue if hypotheses are confirmed.'}
            </p>
          </InfoBox>
        </div>
      </Card>
    </div>
  );

  const Quiz = () => {
    const preguntes = getQuizPreguntes();
    const preguntesFiltrades = quizCategoria === 'tots' ? preguntes : preguntes.filter(p => p.cat === quizCategoria);

    return (
      <div className="space-y-6">
        <div>
          <h2 className="text-2xl font-black text-gray-800 flex items-center gap-3 mb-2">
            <Brain className="text-pink-500" /> Quiz
          </h2>
        </div>

        {!quizIniciado ? (
          <Card accent className="text-center py-8">
            <Brain className="mx-auto text-pink-500 mb-4" size={48} />
            <h3 className="text-xl font-bold text-gray-800 mb-4">
              {idioma === 'val' && 'Posa a prova els teus coneixements!'}
              {idioma === 'es' && '¬°Pon a prueba tus conocimientos!'}
              {idioma === 'en' && 'Test your knowledge!'}
            </h3>
            <p className="text-gray-500 mb-6">{preguntesFiltrades.length} {idioma === 'val' ? 'preguntes' : idioma === 'es' ? 'preguntas' : 'questions'}</p>
            
            <div className="flex flex-wrap justify-center gap-2 mb-6">
              {['tots', 'costos', 'formes', 'inversions', 'ratios', 'estrategia', 'marketing', 'financament', 'produccio', 'innovacio'].map(cat => (
                <button key={cat} onClick={() => setQuizCategoria(cat)} className={`px-3 py-1 rounded-full text-sm ${quizCategoria === cat ? 'bg-pink-500 text-white' : 'bg-pink-50 text-pink-700 border border-pink-200'}`}>
                  {cat === 'tots' ? (idioma === 'val' ? 'Tots' : 'All') : cat}
                </button>
              ))}
            </div>
            
            <button onClick={() => { setQuizIniciado(true); setQuizPregunta(0); setQuizRespuestas({}); setQuizTerminado(false); }} className="px-8 py-3 bg-pink-500 text-white rounded-xl font-bold hover:bg-pink-600 transition-all">
              {t('ui', 'comen√ßar')} ‚Üí
            </button>
          </Card>
        ) : quizTerminado ? (
          <Card accent className="text-center py-8">
            <Award className="mx-auto text-amber-500 mb-4" size={48} />
            <h3 className="text-2xl font-black text-gray-800 mb-2">{t('ui', 'resultat')}</h3>
            <p className="text-5xl font-black text-pink-500 mb-4">{quizPuntuacion}/{preguntesFiltrades.length}</p>
            <p className="text-gray-500 mb-6">
              {quizPuntuacion === preguntesFiltrades.length ? 'üèÜ ' + (idioma === 'val' ? 'Perfecte!' : 'Perfect!') :
               quizPuntuacion >= preguntesFiltrades.length * 0.7 ? 'üëè ' + (idioma === 'val' ? 'Molt b√©!' : 'Very good!') :
               quizPuntuacion >= preguntesFiltrades.length * 0.5 ? 'üìö ' + (idioma === 'val' ? 'Pots millorar' : 'Room to improve') :
               'üí™ ' + (idioma === 'val' ? 'Continua estudiant!' : 'Keep studying!')}
            </p>
            <button onClick={() => { setQuizIniciado(false); setQuizTerminado(false); }} className="px-8 py-3 bg-pink-500 text-white rounded-xl font-bold hover:bg-pink-600">
              {t('ui', 'repetir')}
            </button>
          </Card>
        ) : (
          <Card>
            <div className="flex gap-1 mb-4">
              {preguntesFiltrades.map((_, i) => (
                <div key={i} className={`h-2 flex-1 rounded-full ${
                  i < quizPregunta ? (quizRespuestas[i] === preguntesFiltrades[i].correcta ? 'bg-emerald-500' : 'bg-red-500') :
                  i === quizPregunta ? 'bg-pink-500' : 'bg-gray-200'
                }`} />
              ))}
            </div>

            <p className="text-sm text-gray-500 mb-2">{idioma === 'val' ? 'Pregunta' : 'Question'} {quizPregunta + 1}/{preguntesFiltrades.length}</p>
            <h3 className="text-xl font-bold text-gray-800 mb-6">{preguntesFiltrades[quizPregunta]?.pregunta}</h3>

            <div className="space-y-3">
              {preguntesFiltrades[quizPregunta]?.opcions.map((op, i) => {
                const respost = quizRespuestas[quizPregunta] !== undefined;
                const correcta = preguntesFiltrades[quizPregunta].correcta === i;
                const seleccionada = quizRespuestas[quizPregunta] === i;
                
                return (
                  <button
                    key={i}
                    onClick={() => !respost && setQuizRespuestas(prev => ({ ...prev, [quizPregunta]: i }))}
                    disabled={respost}
                    className={`w-full p-4 rounded-xl text-left transition-all border-2 ${
                      respost
                        ? correcta
                          ? 'bg-emerald-100 border-emerald-400 text-emerald-800'
                          : seleccionada
                            ? 'bg-red-100 border-red-400 text-red-800'
                            : 'bg-gray-50 border-gray-200 text-gray-500'
                        : 'bg-white border-gray-200 hover:border-pink-300 hover:bg-pink-50'
                    }`}
                  >
                    <div className="flex items-center gap-3">
                      <span className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${
                        respost && correcta ? 'bg-emerald-500 text-white' :
                        respost && seleccionada ? 'bg-red-500 text-white' :
                        'bg-gray-100 text-gray-600'
                      }`}>
                        {respost && correcta ? <Check size={16} /> : respost && seleccionada ? <X size={16} /> : String.fromCharCode(65 + i)}
                      </span>
                      <span className="font-medium">{op}</span>
                    </div>
                  </button>
                );
              })}
            </div>

            {quizRespuestas[quizPregunta] !== undefined && (
              <div className="mt-6 flex justify-end">
                <button
                  onClick={() => quizPregunta < preguntesFiltrades.length - 1 ? setQuizPregunta(quizPregunta + 1) : setQuizTerminado(true)}
                  className="px-6 py-2 bg-pink-500 text-white rounded-lg font-medium hover:bg-pink-600"
                >
                  {quizPregunta < preguntesFiltrades.length - 1 ? t('ui', 'seguent') + ' ‚Üí' : idioma === 'val' ? 'Veure resultat' : 'See result'}
                </button>
              </div>
            )}
          </Card>
        )}
      </div>
    );
  };


  // ============================================================================
  // RENDER PRINCIPAL
  // ============================================================================
  
  const renderSection = () => {
    switch (section) {
      case 'inicio': return <Inicio />;
      case 'puntmort': return <PuntMort />;
      case 'costos': return <Costos />;
      case 'productivitat': return <Productivitat />;
      case 'van': return <VanTir />;
      case 'formes': return <FormesJuridiques />;
      case 'financament': return <Financament />;
      case 'ratios': return <Ratios />;
      case 'rrhh': return <RRHH />;
      case 'produccio': return <Produccio />;
      case 'marketing': return <Marketing />;
      case 'estrategia': return <Estrategia />;
      case 'canvas': return <Canvas />;
      case 'analisi': return <Analisi />;
      case 'creixement': return <Creixement />;
      case 'innovacio': return <Innovacio />;
      case 'quiz': return <Quiz />;
      default: return <Inicio />;
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-white to-pink-50">
      {/* Header */}
      <header className="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 shadow-sm">
        <div className="max-w-7xl mx-auto px-4">
          <div className="flex items-center justify-between h-16">
            <button onClick={() => setSection('inicio')} className="flex items-center gap-2 font-black text-xl text-gray-800">
              <Building2 className="text-pink-500" size={28} />
              <span>{t('inicio', 'titol')}</span>
            </button>
            
            <div className="hidden lg:flex items-center gap-1 flex-wrap">
              <NavBtn sec="puntmort" icono={Target} label={t('nav', 'puntmort')} />
              <NavBtn sec="costos" icono={Calculator} label={t('nav', 'costos')} />
              <NavBtn sec="van" icono={TrendingUp} label="VAN/TIR" />
              <NavBtn sec="formes" icono={Building} label={t('nav', 'formes')} />
              <NavBtn sec="financament" icono={Wallet} label={t('nav', 'financament')} />
              <NavBtn sec="ratios" icono={PieChart} label={t('nav', 'ratios')} />
              <NavBtn sec="rrhh" icono={Users} label="RRHH" />
              <NavBtn sec="marketing" icono={Megaphone} label="Marketing" />
              <NavBtn sec="estrategia" icono={Compass} label={t('nav', 'estrategia')} />
              <NavBtn sec="canvas" icono={Layers} label="Canvas" />
              <NavBtn sec="quiz" icono={Brain} label="Quiz" />
            </div>

            <div className="flex items-center gap-2">
              <a href="./index.html" className="p-2 text-gray-600 hover:text-pink-500 hover:bg-pink-50 rounded-lg transition-all" title="Tornar a l'inici">
                <Home size={20} />
              </a>
              <LanguageSelector />
              <button onClick={() => setMenuOpen(!menuOpen)} className="lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg">
                {menuOpen ? <X size={24} /> : <Menu size={24} />}
              </button>
            </div>
          </div>
        </div>
        
        {/* Mobile menu */}
        {menuOpen && (
          <div className="lg:hidden bg-white border-t border-gray-100 p-4">
            <div className="grid grid-cols-3 gap-2">
              {[
                { sec: 'inicio', icon: Home, label: t('nav', 'inicio') },
                { sec: 'puntmort', icon: Target, label: t('nav', 'puntmort') },
                { sec: 'costos', icon: Calculator, label: t('nav', 'costos') },
                { sec: 'productivitat', icon: BarChart3, label: t('nav', 'productivitat') },
                { sec: 'van', icon: TrendingUp, label: 'VAN/TIR' },
                { sec: 'formes', icon: Building, label: t('nav', 'formes') },
                { sec: 'financament', icon: Wallet, label: t('nav', 'financament') },
                { sec: 'ratios', icon: PieChart, label: t('nav', 'ratios') },
                { sec: 'rrhh', icon: Users, label: 'RRHH' },
                { sec: 'produccio', icon: Factory, label: t('nav', 'produccio') },
                { sec: 'marketing', icon: Megaphone, label: 'Marketing' },
                { sec: 'estrategia', icon: Compass, label: t('nav', 'estrategia') },
                { sec: 'canvas', icon: Layers, label: 'Canvas' },
                { sec: 'analisi', icon: Search, label: t('nav', 'analisi') },
                { sec: 'creixement', icon: Rocket, label: t('nav', 'creixement') },
                { sec: 'innovacio', icon: Sparkles, label: t('nav', 'innovacio') },
                { sec: 'quiz', icon: Brain, label: 'Quiz' },
              ].map(item => (
                <button
                  key={item.sec}
                  onClick={() => { setSection(item.sec); setMenuOpen(false); }}
                  className={`p-3 rounded-lg text-center ${section === item.sec ? 'bg-pink-100 text-pink-700' : 'bg-gray-50 text-gray-600'}`}
                >
                  <item.icon size={20} className="mx-auto mb-1" />
                  <span className="text-xs font-medium">{item.label}</span>
                </button>
              ))}
            </div>
          </div>
        )}
      </header>

      {/* Main content */}
      <main className="max-w-7xl mx-auto px-4 py-8">
        {renderSection()}
      </main>

      {/* Glossary button */}
      <button
        onClick={() => setShowGlosario(true)}
        className="fixed bottom-6 left-6 p-4 bg-pink-500 text-white rounded-full shadow-lg hover:bg-pink-600 transition-all hover:scale-110 z-40"
        title={t('nav', 'glosari')}
      >
        <BookOpen size={24} />
      </button>

      {/* Glossary modal */}
      {showGlosario && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50" onClick={() => setShowGlosario(false)}>
          <div className="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden" onClick={e => e.stopPropagation()}>
            <div className="p-4 border-b border-gray-100 flex items-center justify-between">
              <h3 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                <BookOpen className="text-pink-500" /> {t('nav', 'glosari')}
              </h3>
              <button onClick={() => setShowGlosario(false)} className="text-gray-400 hover:text-gray-600">
                <X size={24} />
              </button>
            </div>
            <div className="p-4 border-b border-gray-100">
              <div className="relative">
                <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={20} />
                <input
                  type="text"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  placeholder={t('ui', 'buscar')}
                  className="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-300 focus:border-pink-300"
                />
              </div>
            </div>
            <div className="overflow-y-auto max-h-[60vh] p-4">
              <div className="space-y-2">
                {filteredGlosario.map((g, i) => (
                  <div key={i} className="p-3 bg-gray-50 rounded-lg border border-gray-100 hover:border-pink-200 transition-all">
                    <p className="font-bold text-pink-600">{g.term}</p>
                    <p className="text-sm text-gray-600">{g.def}</p>
                    <span className="inline-block mt-1 px-2 py-0.5 bg-pink-100 text-pink-700 rounded text-xs">{g.cat}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Footer */}
      <footer className="bg-gray-50 border-t border-gray-100 py-6 mt-12">
        <div className="max-w-7xl mx-auto px-4 text-center text-gray-500 text-sm">
          <p className="font-medium text-gray-700 mb-1">
            {idioma === 'val' && 'üéì App Educativa d\'Economia de l\'Empresa'}
            {idioma === 'es' && 'üéì App Educativa de Econom√≠a de la Empresa'}
            {idioma === 'en' && 'üéì Business Economics Educational App'}
          </p>
          <p>
            {idioma === 'val' && 'Batxillerat ¬∑ Cicles Formatius ¬∑ Universitat'}
            {idioma === 'es' && 'Bachillerato ¬∑ Ciclos Formativos ¬∑ Universidad'}
            {idioma === 'en' && 'High School ¬∑ Vocational Training ¬∑ University'}
          </p>
        </div>
      </footer>
    </div>
  );
}

        ReactDOM.render(<EmpresaApp />, document.getElementById('root'));
    </script>
</body>
</html>
